<html lang="ko" data-phocus-theme="dark">
  <head>
    <script src="https://pagead2.googlesyndication.com/pagead/managed/js/adsense/m202508190101/reactive_library_fy2021.js"></script>
    <script
      type="text/javascript"
      async=""
      src="https://www.googletagmanager.com/gtag/js?id=G-96MML77SCQ&amp;cx=c&amp;gtm=4e58k1"
    ></script>
    <script src="https://pagead2.googlesyndication.com/pagead/managed/js/adsense/m202508190101/show_ads_impl_fy2021.js"></script>
    <script type="text/javascript">
      if (!window.T) {
        window.T = {};
      }
      window.T.config = {
        TOP_SSL_URL: "https://www.tistory.com",
        PREVIEW: false,
        ROLE: "owner",
        PREV_PAGE: "",
        NEXT_PAGE: "",
        BLOG: {
          id: 5765047,
          name: "mag1c",
          title: "개발잘하고싶다",
          isDormancy: false,
          nickName: "mag1c",
          status: "open",
          profileStatus: "normal",
        },
        NEED_COMMENT_LOGIN: false,
        COMMENT_LOGIN_CONFIRM_MESSAGE: "",
        LOGIN_URL:
          "https://www.tistory.com/auth/login/?redirectUrl=https://mag1c.tistory.com/",
        DEFAULT_URL: "https://mag1c.tistory.com",
        USER: {
          name: "mag1c",
          homepage: "https://mag1c.tistory.com",
          id: 5711895,
          profileImage:
            "https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970",
        },
        SUBSCRIPTION: {
          status: "none",
          isConnected: false,
          isPending: false,
          isWait: false,
          isProcessing: false,
          isNone: true,
        },
        IS_LOGIN: true,
        HAS_BLOG: true,
        IS_SUPPORT: false,
        IS_SCRAPABLE: true,
        TOP_URL: "http://www.tistory.com",
        JOIN_URL: "https://www.tistory.com/member/join",
        PHASE: "prod",
        ROLE_GROUP: "member",
      };
      window.T.entryInfo = null;
      window.appInfo = {
        domain: "tistory.com",
        topUrl: "https://www.tistory.com",
        loginUrl: "https://www.tistory.com/auth/login",
        logoutUrl: "https://www.tistory.com/auth/logout",
      };
      window.initData = {
        user: { id: 5711895, loginId: "95jjh@naver.com", name: "mag1c" },
      };

      window.TistoryBlog = {
        basePath: "",
        url: "https://mag1c.tistory.com",
        tistoryUrl: "https://mag1c.tistory.com",
        manageUrl: "https://mag1c.tistory.com/manage",
        token:
          "HOtGCodCSmyGIDM1je6U7Qf+DBBRfRhP41PZ67q7r5aP4jRVpvBDiVTpY25m4heG",
      };
      var servicePath = "";
      var blogURL = "";
    </script>

    <!-- BusinessLicenseInfo - START -->

    <link
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/plugin/BusinessLicenseInfo/style.css"
      rel="stylesheet"
      type="text/css"
    />

    <script>
      function switchFold(entryId) {
        var businessLayer = document.getElementById(
          "businessInfoLayer_" + entryId
        );

        if (businessLayer) {
          if (businessLayer.className.indexOf("unfold_license") > 0) {
            businessLayer.className = "business_license_layer";
          } else {
            businessLayer.className = "business_license_layer unfold_license";
          }
        }
      }
    </script>

    <!-- BusinessLicenseInfo - END -->
    <!-- DaumShow - START -->
    <style type="text/css">
      #daumSearchBox {
        height: 21px;
        background-image: url(//i1.daumcdn.net/imgsrc.search/search_all/show/tistory/plugin/bg_search2_2.gif);
        margin: 5px auto;
        padding: 0;
      }

      #daumSearchBox input {
        background: none;
        margin: 0;
        padding: 0;
        border: 0;
      }

      #daumSearchBox #daumLogo {
        width: 34px;
        height: 21px;
        float: left;
        margin-right: 5px;
        background-image: url(//i1.daumcdn.net/img-media/tistory/img/bg_search1_2_2010ci.gif);
      }

      #daumSearchBox #show_q {
        background-color: transparent;
        border: none;
        font: 12px Gulim, Sans-serif;
        color: #555;
        margin-top: 4px;
        margin-right: 15px;
        float: left;
      }

      #daumSearchBox #show_btn {
        background-image: url(//i1.daumcdn.net/imgsrc.search/search_all/show/tistory/plugin/bt_search_2.gif);
        width: 37px;
        height: 21px;
        float: left;
        margin: 0;
        cursor: pointer;
        text-indent: -1000em;
      }
    </style>

    <!-- DaumShow - END -->

    <!-- GoogleAnalytics - START -->
    <script
      src="https://www.googletagmanager.com/gtag/js?id=10171474952"
      async="async"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "10171474952", {
        cookie_domain: "auto",
        cookie_flags: "max-age=0;domain=.tistory.com",
        cookie_expires: 7 * 24 * 60 * 60, // 7 days, in seconds
      });
    </script>

    <!-- GoogleAnalytics - END -->

    <!-- System - START -->

    <!-- System - END -->

    <!-- GoogleSearchConsole - START -->

    <!-- BEGIN GOOGLE_SITE_VERIFICATION -->
    <meta
      name="google-site-verification"
      content="1yo0VO45WIXhw2MNmlDSsJSXhZgt4o8ovlT8K9pKLVY"
    />
    <!-- END GOOGLE_SITE_VERIFICATION -->

    <!-- GoogleSearchConsole - END -->

    <!-- TistoryProfileLayer - START -->
    <link
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/plugin/TistoryProfileLayer/style.css"
      rel="stylesheet"
      type="text/css"
    />
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/plugin/TistoryProfileLayer/script.js"
    ></script>

    <!-- TistoryProfileLayer - END -->

    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="format-detection" content="telephone=no" />
    <script
      src="//t1.daumcdn.net/tistory_admin/lib/jquery/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="//t1.daumcdn.net/tiara/js/v1/tiara.min.js"
    ></script>
    <meta name="referrer" content="always" />
    <meta
      name="google-adsense-platform-account"
      content="ca-host-pub-9691043933427338"
    />
    <meta name="google-adsense-platform-domain" content="tistory.com" />
    <meta name="google-adsense-account" content="ca-pub-7990673941637819" />
    <meta name="description" content="2년차 주니어 개발자." />

    <!-- BEGIN OPENGRAPH -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://mag1c.tistory.com" />
    <meta property="og:site_name" content="개발잘하고싶다" />
    <meta property="og:title" content="개발잘하고싶다" />
    <meta property="og:description" content="2년차 주니어 개발자." />
    <meta
      property="og:image"
      content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970"
    />
    <meta property="og:article:author" content="'mag1c'" />
    <!-- END OPENGRAPH -->

    <!-- BEGIN TWITTERCARD -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@TISTORY" />
    <meta name="twitter:title" content="개발잘하고싶다" />
    <meta name="twitter:description" content="2년차 주니어 개발자." />
    <meta
      property="twitter:image"
      content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970"
    />
    <!-- END TWITTERCARD -->
    <script
      type="module"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/pc/dist/index.js"
      defer=""
    ></script>
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/pc/dist/index-legacy.js"
      defer=""
      nomodule="true"
    ></script>
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/pc/dist/polyfills-legacy.js"
      defer=""
      nomodule="true"
    ></script>
    <link
      rel="icon"
      sizes="any"
      href="https://t1.daumcdn.net/tistory_admin/favicon/tistory_favicon_32x32.ico"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="https://t1.daumcdn.net/tistory_admin/top_v2/bi-tistory-favicon.svg"
    />
    <link
      rel="apple-touch-icon"
      href="https://t1.daumcdn.net/tistory_admin/top_v2/tistory-apple-touch-favicon.png"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://t1.daumcdn.net/tistory_admin/www/style/font.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/content.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/pc/dist/index.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/uselessPMargin.css"
    />
    <script type="text/javascript">
      (function () {
        var tjQuery = jQuery.noConflict(true);
        window.tjQuery = tjQuery;
        window.orgjQuery = window.jQuery;
        window.jQuery = tjQuery;
        window.jQuery = window.orgjQuery;
        delete window.orgjQuery;
      })();
    </script>
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/script/base.js"
    ></script>
    <script
      type="text/javascript"
      src="//developers.kakao.com/sdk/js/kakao.min.js"
    ></script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>개발잘하고싶다</title>

    <!-- SEO 메타 태그 -->
    <meta name="description" content="2년차 주니어 개발자." />
    <meta name="keywords" content="" />
    <link rel="canonical" href="https://mag1c.tistory.com/" />

    <!-- Open Graph 태그 -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="개발잘하고싶다" />
    <meta property="og:description" content="2년차 주니어 개발자." />
    <meta
      property="og:image"
      content="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
    />
    <meta property="og:url" content="https://mag1c.tistory.com/" />
    <meta property="og:site_name" content="개발잘하고싶다" />

    <!-- Twitter Card 태그 -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="개발잘하고싶다" />
    <meta name="twitter:description" content="2년차 주니어 개발자." />
    <meta
      name="twitter:image"
      content="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
    />

    <!-- 티스토리 필수 링크 -->
    <link
      rel="alternate"
      type="application/rss+xml"
      title="개발잘하고싶다"
      href="https://mag1c.tistory.com/rss"
    />
    <link rel="pingback" href="" />

    <!-- 스타일시트 -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory/5765047/skin/style.css?_version_=1755948427"
    />

    <!-- jQuery (티스토리 플러그인용) -->
    <script src="//t1.daumcdn.net/tistory_admin/lib/jquery/jquery-1.12.4.min.js"></script>

    <!-- 구글 애널리틱스 -->
    <script
      async=""
      src="https://www.googletagmanager.com/gtag/js?id=G-96MML77SCQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-96MML77SCQ");
    </script>

    <!-- 티스토리 기본 기능 (T버튼 없이) -->
    <script type="text/javascript">
      window.hideMenubar = true;
    </script>

    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/revenue.css"
    />
    <link rel="canonical" href="https://mag1c.tistory.com" />

    <!-- BEGIN STRUCTURED_DATA -->
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "/search/{search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    <!-- END STRUCTURED_DATA -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/dialog.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="//t1.daumcdn.net/tistory_admin/www/style/top/font.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/postBtn.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/style/tistory.css"
    />
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/script/common.js"
    ></script>

    <style type="text/css">
      #DragSchLayer {
        display: block;
        position: absolute;
        z-index: 1000;
        width: 61px;
        height: 31px;
        margin: -30px 0px 0px -5px;
        background: url(//search1.daumcdn.net/search/statics/common/pi/btn_drag_rect.png);
        cursor: pointer;
      }
      @media only screen and (-webkit-min-device-pixel-ratio: 1.5),
        only screen and (min-device-pixel-ratio: 1.5),
        only screen and (min-resolution: 1.5dppx) {
        #DragSchLayer {
          background-image: url(//search1.daumcdn.net/search/statics/common/pi/r2/btn_drag_rect.png);
          background-size: 61px 31px;
        }
      }
    </style>
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta
      http-equiv="origin-trial"
      content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
    <meta
      http-equiv="origin-trial"
      content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"
    />
  </head>
  <body id="tt-body-index" aria-hidden="false" style="padding: 0px">
    <!-- 헤더 -->
    <header
      class="site-header"
      style="
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 3px;
      "
    >
      <div class="header-container">
        <h1 class="site-title">
          <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
        </h1>
        <div class="header-controls">
          <button class="search-toggle" aria-label="검색">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
          <button class="menu-toggle" aria-label="메뉴">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- 검색 모달 -->
    <div class="search-modal">
      <div class="search-modal-content">
        <button class="search-close">×</button>

        <div class="search-form-wrapper">
          <input
            type="text"
            name="search"
            value=""
            placeholder="검색어를 입력하세요"
            onkeypress="if (event.keyCode == 13) { try {
window.location.href = '/search' + '/' + looseURIEncode(document.getElementsByName('search')[0].value);
document.getElementsByName('search')[0].value = '';
return false;
} catch (e) {} }"
            autofocus=""
          />
          <button
            type="button"
            onclick="try {
window.location.href = '/search' + '/' + looseURIEncode(document.getElementsByName('search')[0].value);
document.getElementsByName('search')[0].value = '';
return false;
} catch (e) {}"
            class="search-submit-btn"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- 사이드바 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title">개발잘하고싶다</h2>
        <button class="sidebar-close">×</button>
      </div>
      <div class="sidebar-content">
        <nav class="sidebar-nav">
          <!-- 카테고리 -->

          <div class="sidebar-section">
            <h3
              style="
                font-size: 1.1rem;
                margin-bottom: 15px;
                color: var(--text-primary);
              "
            >
              카테고리
            </h3>
            <div class="category-tree">
              <ul class="tt_category">
                <li class="">
                  <a href="/category" class="link_tit">
                    전체 <span class="c_cnt">513</span>
                    <img
                      alt="N"
                      src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                      style="vertical-align: middle; padding-left: 2px"
                  /></a>
                  <ul class="category_list">
                    <li class="">
                      <a href="/category/Tech" class="link_item">
                        Tech <span class="c_cnt">324</span>
                      </a>
                      <ul class="sub_category_list">
                        <li class="">
                          <a
                            href="/category/Tech/Java%20%26%20Spring"
                            class="link_sub_item"
                          >
                            Java &amp; Spring <span class="c_cnt">101</span>
                          </a>
                        </li>
                        <li class="">
                          <a href="/category/Tech/Kotlin" class="link_sub_item">
                            Kotlin <span class="c_cnt">3</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/JS%20%26%20TS"
                            class="link_sub_item"
                          >
                            JS &amp; TS <span class="c_cnt">19</span>
                          </a>
                        </li>
                        <li class="">
                          <a href="/category/Tech/NodeJS" class="link_sub_item">
                            NodeJS <span class="c_cnt">20</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4"
                            class="link_sub_item"
                          >
                            데이터베이스 <span class="c_cnt">24</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC"
                            class="link_sub_item"
                          >
                            네트워크 <span class="c_cnt">11</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85"
                            class="link_sub_item"
                          >
                            트러블슈팅 <span class="c_cnt">74</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98"
                            class="link_sub_item"
                          >
                            알고리즘 <span class="c_cnt">15</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0"
                            class="link_sub_item"
                          >
                            자료구조 <span class="c_cnt">3</span>
                          </a>
                        </li>
                        <li class="">
                          <a href="/category/Tech/Test" class="link_sub_item">
                            Test <span class="c_cnt">15</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%ED%8C%A8%EB%9F%AC%EB%8B%A4%EC%9E%84"
                            class="link_sub_item"
                          >
                            패러다임 <span class="c_cnt">1</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/Tech/%EA%B8%B0%ED%83%80"
                            class="link_sub_item"
                          >
                            기타 <span class="c_cnt">38</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li class="">
                      <a href="/category/%EC%82%BD%EC%A7%88" class="link_item">
                        삽질 <span class="c_cnt">36</span>
                      </a>
                      <ul class="sub_category_list">
                        <li class="">
                          <a
                            href="/category/%EC%82%BD%EC%A7%88/%EC%82%AC%EC%9D%B4%EB%93%9C%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8"
                            class="link_sub_item"
                          >
                            사이드 프로젝트 <span class="c_cnt">24</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/%EC%82%BD%EC%A7%88/%EC%97%85%EB%AC%B4"
                            class="link_sub_item"
                          >
                            업무 <span class="c_cnt">12</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li class="">
                      <a href="/category/OpenSource" class="link_item">
                        OpenSource <span class="c_cnt">8</span>
                        <img
                          alt="N"
                          src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                          style="vertical-align: middle; padding-left: 2px"
                      /></a>
                    </li>
                    <li class="">
                      <a
                        href="/category/%EA%B3%B5%EB%B6%80%EB%B0%A9"
                        class="link_item"
                      >
                        공부방 <span class="c_cnt">3</span>
                      </a>
                    </li>
                    <li class="">
                      <a href="/category/%ED%9A%8C%EA%B3%A0" class="link_item">
                        회고 <span class="c_cnt">17</span>
                      </a>
                    </li>
                    <li class="">
                      <a href="/category/P.S." class="link_item">
                        P.S. <span class="c_cnt">114</span>
                      </a>
                      <ul class="sub_category_list">
                        <li class="">
                          <a
                            href="/category/P.S./%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4"
                            class="link_sub_item"
                          >
                            프로그래머스 <span class="c_cnt">67</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/P.S./%EB%B0%B1%EC%A4%80"
                            class="link_sub_item"
                          >
                            백준 <span class="c_cnt">39</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/P.S./leetcode"
                            class="link_sub_item"
                          >
                            leetcode <span class="c_cnt">6</span>
                          </a>
                        </li>
                        <li class="">
                          <a
                            href="/category/P.S./HackerRank"
                            class="link_sub_item"
                          >
                            HackerRank <span class="c_cnt">2</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li class="">
                      <a href="/category/%EC%9E%A1" class="link_item">
                        잡 <span class="c_cnt">10</span>
                        <img
                          alt="N"
                          src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                          style="vertical-align: middle; padding-left: 2px"
                      /></a>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>

          <!-- 사이드바 광고 (구글 애드센스) -->

          <!-- SNS 링크 -->
          <div
            class="sidebar-section"
            style="
              border-top: 1px solid rgba(0, 0, 0, 0.1);
              padding-top: 30px;
              margin-top: 30px;
              display: none;
            "
          >
            <ul class="sidebar-links"></ul>
          </div>

          <!-- 관리자 컨트롤 -->
          <div class="sidebar-section admin-controls">
            <div class="admin-buttons">
              <a href="https://mag1c.tistory.com/manage/post" class="admin-btn"
                >글쓰기</a
              >
              <a href="https://mag1c.tistory.com/manage" class="admin-btn"
                >관리</a
              >
              <a
                href="https://www.tistory.com/auth/logout"
                class="admin-btn"
                onclick="return confirm('로그아웃 하시겠습니까?');"
                >로그아웃</a
              >
            </div>
          </div>

          <!-- 사이드바 푸터 -->
          <div class="sidebar-footer">
            <p class="sidebar-credit">
              Designed by
              <a href="https://mag1c.tistory.com" target="_blank">mag1c</a>
            </p>
          </div>
        </nav>
      </div>
    </aside>

    <!-- 모바일 사이드바 오버레이 -->
    <div class="sidebar-overlay"></div>

    <!-- 메인 컨텐츠 -->
    <main class="main-content" style="height: auto !important">
      <!-- 홈페이지 히어로 캐러셀 (JS로 표시) -->
      <section class="hero-carousel" id="mainCarousel" style="display: block">
        <div class="carousel-container">
          <div class="carousel-track" style="transform: translateX(-300%)">
            <!-- 캐러셀 슬라이드는 JavaScript로 생성 -->

            <article class="carousel-slide">
              <div
                class="slide-background"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLxdTy%2FbtsP2COf1CR%2FAAAAAAAAAAAAAAAAAAAAAO4sFMxgixcBfAuTm0TWTtz7f4coLA9QkWF5gr63JxyJ%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlxEBhZTO48jElOxlhfem9Nq0Zjk%253D');
                "
              ></div>
              <div class="slide-overlay"></div>
              <div class="slide-content">
                <div class="slide-number">2025</div>
                <h2 class="slide-title">
                  Prisma v6.14.0의 성능 개선에 따른 브레이킹 체인지, 이에 기여한
                  이야기.
                </h2>
                <p class="slide-excerpt">
                  서론 들어가기전 기여에 필요해서 Prisma에 대해 간단하게 뜯어본
                  포스팅이 있으니,전반적인 내용 이해에 도움이 될 것 같아서
                  정리해놓았으니 필요 시 한 번 훑어보시길 권장드립니다...
                </p>
                <a href="/580" class="slide-link">자세히보기</a>
              </div>
            </article>

            <article class="carousel-slide">
              <div
                class="slide-background"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F46LWx%2FbtsP0fAjksL%2FAAAAAAAAAAAAAAAAAAAAACmOLp61oJ9cqC7a39gGePTGkAx420PEletbUORPNwaa%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNoTo8%252F4Cu8%252FZjPCyyy%252BZm121MYk%253D');
                "
              ></div>
              <div class="slide-overlay"></div>
              <div class="slide-content">
                <div class="slide-number">2025</div>
                <h2 class="slide-title">Prisma는 왜 Type-Safe할까?</h2>
                <p class="slide-excerpt">
                  TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고
                  하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도
                  TypeORM은 기피하고 Prisma를 ...
                </p>
                <a href="/581" class="slide-link">자세히보기</a>
              </div>
            </article>

            <article class="carousel-slide">
              <div
                class="slide-background"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fdm9WWW%2FbtsPXW8VfYl%2FAAAAAAAAAAAAAAAAAAAAADdCFtk_MxHfefRd5ShFguDvqVLTM2SE8ipJF5ISwro3%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvEybL%252Fpr1aiCUtkNYtdDls6DQ9E%253D');
                "
              ></div>
              <div class="slide-overlay"></div>
              <div class="slide-content">
                <div class="slide-number">2025</div>
                <h2 class="slide-title">
                  바이브 코딩으로 티스토리 커스텀 스킨 만들기 (Feat. Claude
                  code)
                </h2>
                <p class="slide-excerpt">
                  클로드 코드 지분율 99%의 티스토리 커스텀 스킨을 만들었습니다.
                  기술 블로그를 3년 가까이 운영하면서, 언젠가는 개인 스킨을
                  만들어야지했는데 반쪽 짜리(Powered By Cla...
                </p>
                <a href="/579" class="slide-link">자세히보기</a>
              </div>
            </article>

            <article class="carousel-slide">
              <div
                class="slide-background"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D');
                "
              ></div>
              <div class="slide-overlay"></div>
              <div class="slide-content">
                <div class="slide-number">2025</div>
                <h2 class="slide-title">
                  [Rate Limit - 3] Fixed Window Counter, Sliding Window Logging,
                  Sliding Window Counter 알고리즘
                </h2>
                <p class="slide-excerpt">
                  [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket,
                  Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logg...
                </p>
                <a href="/578" class="slide-link">자세히보기</a>
              </div>
            </article>

            <article class="carousel-slide">
              <div
                class="slide-background"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D');
                "
              ></div>
              <div class="slide-overlay"></div>
              <div class="slide-content">
                <div class="slide-number">2025</div>
                <h2 class="slide-title">
                  [Rate Limit - 2] Token Bucket, Leaky Bucket 알고리즘
                </h2>
                <p class="slide-excerpt">
                  [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket,
                  Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logg...
                </p>
                <a href="/577" class="slide-link">자세히보기</a>
              </div>
            </article>
          </div>

          <!-- 캐러셀 컨트롤 -->
          <button class="carousel-prev" aria-label="이전">
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button class="carousel-next" aria-label="다음">
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>

          <!-- 캐러셀 인디케이터 -->
          <div class="carousel-indicators">
            <button class="carousel-indicator" aria-label="슬라이드 1"></button
            ><button class="carousel-indicator" aria-label="슬라이드 2"></button
            ><button class="carousel-indicator" aria-label="슬라이드 3"></button
            ><button
              class="carousel-indicator active"
              aria-label="슬라이드 4"
            ></button
            ><button
              class="carousel-indicator"
              aria-label="슬라이드 5"
            ></button>
          </div>

          <!-- 구독 버튼 제거됨 -->
        </div>
      </section>

      <!-- 공지사항 -->

      <!-- 게시글 리스트 섹션 -->

      <section class="post-list-section" style="height: auto !important">
        <div class="section-header">
          <div class="search-info">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <span class="search-keyword"></span>
            <span class="search-count">(513)</span>
          </div>

          <div class="section-controls">
            <div class="view-toggles">
              <button
                class="view-toggle grid-view active"
                data-view="grid"
                aria-label="그리드 보기"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                </svg>
              </button>
              <button
                class="view-toggle list-view"
                data-view="list"
                aria-label="리스트 보기"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <rect x="3" y="4" width="18" height="2"></rect>
                  <rect x="3" y="9" width="18" height="2"></rect>
                  <rect x="3" y="14" width="18" height="2"></rect>
                  <rect x="3" y="19" width="18" height="2"></rect>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="post-grid grid-view" style="height: auto !important">
          <div
            class="google-auto-placed"
            style="
              width: 100%;
              height: auto !important;
              clear: both;
              text-align: center;
            "
          >
            <ins
              data-ad-format="auto"
              class="adsbygoogle adsbygoogle-noablate"
              data-ad-client="ca-pub-7990673941637819"
              data-adsbygoogle-status="done"
              style="
                display: block;
                margin: 10px auto;
                background-color: transparent;
                height: 280px;
              "
              data-ad-status="filled"
              ><div
                id="aswift_21_host"
                style="
                  border: none;
                  height: 280px;
                  width: 420px;
                  margin: 0px;
                  padding: 0px;
                  position: relative;
                  visibility: visible;
                  background-color: transparent;
                  display: inline-block;
                  overflow: visible;
                "
              >
                <iframe
                  id="aswift_21"
                  name="aswift_21"
                  browsingtopics="true"
                  style="
                    left: 0;
                    position: absolute;
                    top: 0;
                    border: 0;
                    width: 420px;
                    height: 280px;
                    min-height: auto;
                    max-height: none;
                    min-width: auto;
                    max-width: none;
                  "
                  sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                  width="420"
                  height="280"
                  frameborder="0"
                  marginwidth="0"
                  marginheight="0"
                  vspace="0"
                  hspace="0"
                  allowtransparency="true"
                  scrolling="no"
                  allow="attribution-reporting; run-ad-auction"
                  src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=280&amp;adk=2842444147&amp;adf=3626142574&amp;pi=t.aa~a.3776685112~rp.2&amp;w=420&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1755948572&amp;rafmt=1&amp;to=qs&amp;pwprc=3234849431&amp;format=420x280&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;fwr=0&amp;pra=3&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=40&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948572202&amp;bpp=1&amp;bdt=869&amp;idt=-M&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C0x0%2C370x280%2C370x280&amp;nras=4&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=197&amp;ady=1188&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=22&amp;uci=a!m&amp;btvi=3&amp;fsb=1&amp;dtd=7"
                  data-google-container-id="a!m"
                  tabindex="0"
                  title="Advertisement"
                  aria-label="Advertisement"
                  data-google-query-id="CLGllJfqoI8DFStTwgUdNgM34g"
                  data-load-complete="true"
                ></iframe></div
            ></ins>
          </div>

          <article
            class="post-card"
            data-category="OpenSource"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLxdTy%2FbtsP2COf1CR%2FAAAAAAAAAAAAAAAAAAAAAO4sFMxgixcBfAuTm0TWTtz7f4coLA9QkWF5gr63JxyJ%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlxEBhZTO48jElOxlhfem9Nq0Zjk%253D"
            data-title='Prisma v6.14.0의 성능 개선에 따른 브레이킹 체인지, 이에 기여한 이야기.&lt;img src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif" style="vertical-align:middle; padding-left:5px; width:10px; height:10px;"/&gt;'
            data-summary="서론 들어가기전 기여에 필요해서 Prisma에 대해 간단하게 뜯어본 포스팅이 있으니,전반적인 내용 이해에 도움이 될 것 같아서 정리해놓았으니 필요 시 한 번 훑어보시길 권장드립니다. Prisma는 왜 Type-Safe할까?TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장mag1c.tistory.com 오픈소스 기여모임 9기의 참여자로 nestjs에 5개, loki, gemini-cli, Prisma에 각 1개씩 7개의 PR을 생성했고, 그 중 2개의 PR이 머지되었습니다. 그 중 Prisma에 컨트리뷰터가 된 내용을 다뤘습니.."
            data-link="/580"
          >
            <a href="/580" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLxdTy%2FbtsP2COf1CR%2FAAAAAAAAAAAAAAAAAAAAAO4sFMxgixcBfAuTm0TWTtz7f4coLA9QkWF5gr63JxyJ%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlxEBhZTO48jElOxlhfem9Nq0Zjk%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >Prisma v6.14.0의 성능 개선에 따른 브레이킹 체인지, 이에
                    기여한 이야기.<img
                      src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                      style="
                        vertical-align: middle;
                        padding-left: 5px;
                        width: 10px;
                        height: 10px;
                      "
                  /></span>
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  서론 들어가기전 기여에 필요해서 Prisma에 대해 간단하게 뜯어본
                  포스팅이 있으니,전반적인 내용 이해에 도움이 될 것 같아서
                  정리해놓았으니 필요 시 한 번 훑어보시길 권장드립니다. Prisma는
                  왜 Type-Safe할까?TypeORM을 쓰던 개발자분들은 거의 대부분
                  Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련
                  커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인
                  것을 종종 느꼈습니다. (굉장mag1c.tistory.com 오픈소스 기여모임
                  9기의 참여자로 nestjs에 5개, loki, gemini-cli, Prisma에 각
                  1개씩 7개의 PR을 생성했고, 그 중 2개의 PR이 머지되었습니다. 그
                  중 Prisma에 컨트리뷰터가 된 내용을 다뤘습니..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.22</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="OpenSource"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F46LWx%2FbtsP0fAjksL%2FAAAAAAAAAAAAAAAAAAAAACmOLp61oJ9cqC7a39gGePTGkAx420PEletbUORPNwaa%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNoTo8%252F4Cu8%252FZjPCyyy%252BZm121MYk%253D"
            data-title='Prisma는 왜 Type-Safe할까?&lt;img src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif" style="vertical-align:middle; padding-left:5px; width:10px; height:10px;"/&gt;'
            data-summary="TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장히 주관적임) 이 주장의 근간에는 Type-Safe한 ORM인것이 메인일 것 같습니다. (물론 다른 장점들도 많을 것 같은데 차차 파헤쳐보죠) 이번에 오픈소스 기여를 통해 처음으로 Prisma 코드를 약간 파보았습니다.TypeORM만 쓰고 거의 겉핥기식으로 사용했었는데, 이번 기회에 제대로 Prisma에 입문해보려고 합니다. PrismaPrisma는 스키마 기반 코드 생성형 ORM입니다. schema.prisma를 바탕으로 런타임 이전에 Prisma Client를 생성해야합니다.."
            data-link="/581"
          >
            <a href="/581" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F46LWx%2FbtsP0fAjksL%2FAAAAAAAAAAAAAAAAAAAAACmOLp61oJ9cqC7a39gGePTGkAx420PEletbUORPNwaa%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNoTo8%252F4Cu8%252FZjPCyyy%252BZm121MYk%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >Prisma는 왜 Type-Safe할까?<img
                      src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                      style="
                        vertical-align: middle;
                        padding-left: 5px;
                        width: 10px;
                        height: 10px;
                      "
                  /></span>
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고
                  하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도
                  TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종
                  느꼈습니다. (굉장히 주관적임) 이 주장의 근간에는 Type-Safe한
                  ORM인것이 메인일 것 같습니다. (물론 다른 장점들도 많을 것
                  같은데 차차 파헤쳐보죠) 이번에 오픈소스 기여를 통해 처음으로
                  Prisma 코드를 약간 파보았습니다.TypeORM만 쓰고 거의
                  겉핥기식으로 사용했었는데, 이번 기회에 제대로 Prisma에
                  입문해보려고 합니다. PrismaPrisma는 스키마 기반 코드 생성형
                  ORM입니다. schema.prisma를 바탕으로 런타임 이전에 Prisma
                  Client를 생성해야합니다..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.21</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="잡"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fdm9WWW%2FbtsPXW8VfYl%2FAAAAAAAAAAAAAAAAAAAAADdCFtk_MxHfefRd5ShFguDvqVLTM2SE8ipJF5ISwro3%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvEybL%252Fpr1aiCUtkNYtdDls6DQ9E%253D"
            data-title='바이브 코딩으로 티스토리 커스텀 스킨 만들기 (Feat. Claude code)&lt;img src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif" style="vertical-align:middle; padding-left:5px; width:10px; height:10px;"/&gt;'
            data-summary="클로드 코드 지분율 99%의 티스토리 커스텀 스킨을 만들었습니다. 기술 블로그를 3년 가까이 운영하면서, 언젠가는 개인 스킨을 만들어야지했는데 반쪽 짜리(Powered By Claude Code ;;) 개인 스킨을 완성했습니다. 디자인은 포스팅 시점부터 제 블로그에 이미 적용되어있는 상태이니 둘러보시고 마음에 드신다면 아래 레포의 가이드를 따라 사용해주시면 되겠습니다. 비개발자분들도 접속하셔서 코드를 ZIP으로 다운로드만 받아서 티스토리에 등록만 하면 사용이 가능합니다. 사용에 어려움이 있으신 분은 댓글 남겨주시면 답변 드리겠습니다. GitHub - mag123c/tistory-mag1c-skinContribute to mag123c/tistory-mag1c-skin development by creat.."
            data-link="/579"
            style="height: auto !important"
          >
            <a
              href="/579"
              class="post-card-link"
              style="height: auto !important"
            >
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fdm9WWW%2FbtsPXW8VfYl%2FAAAAAAAAAAAAAAAAAAAAADdCFtk_MxHfefRd5ShFguDvqVLTM2SE8ipJF5ISwro3%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvEybL%252Fpr1aiCUtkNYtdDls6DQ9E%253D');
                  "
                ></div>
              </div>
              <div
                class="post-card-content"
                style="height: auto !important; min-height: 0px !important"
              >
                <h3 class="post-card-title">
                  <span class="title-text"
                    >바이브 코딩으로 티스토리 커스텀 스킨 만들기 (Feat. Claude
                    code)<img
                      src="https://tistory1.daumcdn.net/tistory_admin/blogs/image/category/new_ico_5.gif"
                      style="
                        vertical-align: middle;
                        padding-left: 5px;
                        width: 10px;
                        height: 10px;
                      "
                  /></span>
                  <div class="title-badges"></div>
                </h3>
                <div
                  class="google-auto-placed ap_container"
                  style="
                    width: 100%;
                    height: auto;
                    clear: both;
                    text-align: center;
                  "
                >
                  <ins
                    data-ad-format="auto"
                    class="adsbygoogle adsbygoogle-noablate"
                    data-ad-client="ca-pub-7990673941637819"
                    data-adsbygoogle-status="done"
                    style="
                      display: block;
                      margin: auto;
                      background-color: transparent;
                      height: 280px;
                    "
                    data-ad-status="filled"
                    ><div
                      id="aswift_19_host"
                      style="
                        border: none;
                        height: 280px;
                        width: 370px;
                        margin: 0px;
                        padding: 0px;
                        position: relative;
                        visibility: visible;
                        background-color: transparent;
                        display: inline-block;
                        overflow: visible;
                      "
                    >
                      <iframe
                        id="aswift_19"
                        name="aswift_19"
                        browsingtopics="true"
                        style="
                          left: 0;
                          position: absolute;
                          top: 0;
                          border: 0;
                          width: 370px;
                          height: 280px;
                          min-height: auto;
                          max-height: none;
                          min-width: auto;
                          max-width: none;
                        "
                        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                        width="370"
                        height="280"
                        frameborder="0"
                        marginwidth="0"
                        marginheight="0"
                        vspace="0"
                        hspace="0"
                        allowtransparency="true"
                        scrolling="no"
                        allow="attribution-reporting; run-ad-auction"
                        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=280&amp;adk=1057059480&amp;adf=339358146&amp;w=370&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1755948572&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=3234849431&amp;ad_type=text_image&amp;format=370x280&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;fwr=0&amp;pra=3&amp;rh=309&amp;rw=370&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948572181&amp;bpp=1&amp;bdt=848&amp;idt=-M&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C0x0&amp;nras=2&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=1122&amp;ady=1469&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=384&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=20&amp;uci=a!k&amp;btvi=1&amp;fsb=1&amp;dtd=9"
                        data-google-container-id="a!k"
                        tabindex="0"
                        title="Advertisement"
                        aria-label="Advertisement"
                        data-google-query-id="CIyjk5fqoI8DFdVEwgUd_IwlOA"
                        data-load-complete="true"
                      ></iframe></div
                  ></ins>
                </div>
                <p class="post-card-excerpt">
                  클로드 코드 지분율 99%의 티스토리 커스텀 스킨을 만들었습니다.
                  기술 블로그를 3년 가까이 운영하면서, 언젠가는 개인 스킨을
                  만들어야지했는데 반쪽 짜리(Powered By Claude Code ;;) 개인
                  스킨을 완성했습니다. 디자인은 포스팅 시점부터 제 블로그에 이미
                  적용되어있는 상태이니 둘러보시고 마음에 드신다면 아래 레포의
                  가이드를 따라 사용해주시면 되겠습니다. 비개발자분들도
                  접속하셔서 코드를 ZIP으로 다운로드만 받아서 티스토리에 등록만
                  하면 사용이 가능합니다. 사용에 어려움이 있으신 분은 댓글
                  남겨주시면 답변 드리겠습니다. GitHub -
                  mag123c/tistory-mag1c-skinContribute to
                  mag123c/tistory-mag1c-skin development by creat..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.20</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="카테고리 없음"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D"
            data-title="[Rate Limit - 3] Fixed Window Counter, Sliding Window Logging, Sliding Window Counter 알고리즘"
            data-summary="[목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 지난 포스팅에선, Bucket 방식의 Token Bucket, Leaky Bucket 알고리즘을 살펴보고, 직접 구현과 테스트를 진행했다.이번 글에선 Window 방식의 알고리즘인 Fixed Window Counter, Sliding Window Logging, Sliding Window Counter을 다룬다. 모든 예제 코드는 아래 Github에서 확인할 수 있다. GitHub - mag123c/rate-limiterContribute to mag123c/rate-.."
            data-link="/578"
          >
            <a href="/578" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >[Rate Limit - 3] Fixed Window Counter, Sliding Window
                    Logging, Sliding Window Counter 알고리즘</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket,
                  Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging,
                  Sliding Window Counter 알고리즘 지난 포스팅에선, Bucket 방식의
                  Token Bucket, Leaky Bucket 알고리즘을 살펴보고, 직접 구현과
                  테스트를 진행했다.이번 글에선 Window 방식의 알고리즘인 Fixed
                  Window Counter, Sliding Window Logging, Sliding Window
                  Counter을 다룬다. 모든 예제 코드는 아래 Github에서 확인할 수
                  있다. GitHub - mag123c/rate-limiterContribute to
                  mag123c/rate-..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.11</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="공부방"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D"
            data-title="[Rate Limit - 2] Token Bucket, Leaky Bucket 알고리즘"
            data-summary="[목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 지난 포스팅에선, Rate Limit이란 무엇이고 설계시 주의사항, 특히 분산 환경에서의 Race Condition 처리에 대해 알아보았다.이번 포스팅에선, Rate Limit을 구현할 수 있는 알고리즘 중 Bucket 기반의 알고리즘들에 대해 살펴보려고 한다. 이번 포스팅을 포함한 Rate Limit에 관련된 모든 코드는 아래 깃허브에서 확인할 수 있다. GitHub - mag123c/rate-limiterContribute to mag123c/rate-limite.."
            data-link="/577"
          >
            <a href="/577" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >[Rate Limit - 2] Token Bucket, Leaky Bucket 알고리즘</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket,
                  Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging,
                  Sliding Window Counter 알고리즘 지난 포스팅에선, Rate
                  Limit이란 무엇이고 설계시 주의사항, 특히 분산 환경에서의 Race
                  Condition 처리에 대해 알아보았다.이번 포스팅에선, Rate Limit을
                  구현할 수 있는 알고리즘 중 Bucket 기반의 알고리즘들에 대해
                  살펴보려고 한다. 이번 포스팅을 포함한 Rate Limit에 관련된 모든
                  코드는 아래 깃허브에서 확인할 수 있다. GitHub -
                  mag123c/rate-limiterContribute to mag123c/rate-limite..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.08</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="공부방"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtRPLV%2FbtsPF8txhld%2FAAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DQYkj%252BoNaiI3XNuUt4wt%252FFoK8s5A%253D"
            data-title="[Rate Limit - 1] Rate Limit이란? (설계 시 주의사항)"
            data-summary="사이드 프로젝트에서 AWS에 100달러 이상의 과금이 된 적이 있다. 이 때 처음으로 Rate Limit을 도입했고, A/B 테스트를 통해 적절한 임계치를 찾았던 기억이 있다. 최근, 가상 면접 사례로 배우는 대규모 시스템 설계 기초 를 다시 읽으면서, Rate Limit에 대해 깊이 있게 정리해놓지 않았다는 것을 깨닫고, 정리하는 글이 되시겠다(?) [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 Rate Limit Rate Limit는 클라이언트 또는 서비스가 보내는 트래픽의 처리율(rate)을 제어하기 위.."
            data-link="/576"
          >
            <a href="/576" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtRPLV%2FbtsPF8txhld%2FAAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DQYkj%252BoNaiI3XNuUt4wt%252FFoK8s5A%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >[Rate Limit - 1] Rate Limit이란? (설계 시 주의사항)</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  사이드 프로젝트에서 AWS에 100달러 이상의 과금이 된 적이 있다.
                  이 때 처음으로 Rate Limit을 도입했고, A/B 테스트를 통해 적절한
                  임계치를 찾았던 기억이 있다. 최근, 가상 면접 사례로 배우는
                  대규모 시스템 설계 기초 를 다시 읽으면서, Rate Limit에 대해
                  깊이 있게 정리해놓지 않았다는 것을 깨닫고, 정리하는 글이
                  되시겠다(?) [목차]1. Rate Limit이란? 설계 시 주의사항2. Token
                  Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window
                  Logging, Sliding Window Counter 알고리즘 Rate Limit Rate
                  Limit는 클라이언트 또는 서비스가 보내는 트래픽의
                  처리율(rate)을 제어하기 위..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.06</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="회고"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdtmZ2C%2FbtsPFuXURZ5%2FAAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8Gv%252FI8G6cseYUU%252BTkEvQFo2MEVY%253D"
            data-title="Claude Code Max (100 달러) 한 달 사용 후기"
            data-summary="돈 쓸 일이 많아서, 최대한 Gemini CLI를 주로 이용하고 GPT 4o를 겜스고에서 결제해서 사용하고 있었는데개발자들 사이에서 Claude Code가 넘사라는 이야기를 링크드인, X, 유튜브 등의 커뮤니티에서 너무 많이 듣다보니 도저히 안되겠다 싶어서 Claude Code를 결제해서 한 달 사용해봤다. (겜스고는 클로드 코드 맥스 1인 구독권을 팔아라!!! 제발!!!) 처음에는 100달러, 200달러라는 요금이 두 강아지를 키우는 가장(?)에게 너무 비싼 것 같아서 소소하게 Pro 요금제를 결제해서 사용했는데, 문제는 20달러로는 금방 토큰 사용량을 초과해버려서, 갈증이 났다. 큰 맘 먹고 Max 100 달러짜리로 사용해봤다. 초라하기 짝이 없는 성적표(?)를 받았다. (커피한잔 앱으로 유명한 .."
            data-link="/575"
          >
            <a href="/575" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdtmZ2C%2FbtsPFuXURZ5%2FAAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8Gv%252FI8G6cseYUU%252BTkEvQFo2MEVY%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >Claude Code Max (100 달러) 한 달 사용 후기</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  돈 쓸 일이 많아서, 최대한 Gemini CLI를 주로 이용하고 GPT 4o를
                  겜스고에서 결제해서 사용하고 있었는데개발자들 사이에서 Claude
                  Code가 넘사라는 이야기를 링크드인, X, 유튜브 등의 커뮤니티에서
                  너무 많이 듣다보니 도저히 안되겠다 싶어서 Claude Code를
                  결제해서 한 달 사용해봤다. (겜스고는 클로드 코드 맥스 1인
                  구독권을 팔아라!!! 제발!!!) 처음에는 100달러, 200달러라는
                  요금이 두 강아지를 키우는 가장(?)에게 너무 비싼 것 같아서
                  소소하게 Pro 요금제를 결제해서 사용했는데, 문제는 20달러로는
                  금방 토큰 사용량을 초과해버려서, 갈증이 났다. 큰 맘 먹고 Max
                  100 달러짜리로 사용해봤다. 초라하기 짝이 없는 성적표(?)를
                  받았다. (커피한잔 앱으로 유명한 ..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.08.03</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="잡"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FceSDIW%2FbtsPFjaiizE%2FAAAAAAAAAAAAAAAAAAAAAFflTWqYjz0CU3ty7RWp68j-gbaLz7XUzW2lc9yvGY_R%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252BfJ8cS9ynpqXSHlsYg1kaFDwG%252B8%253D"
            data-title="님 방능임? 스타크래프트/워크래프트 포트포워딩의 원리"
            data-summary='추억의 "방능"공유기를 사용하는 집에서 스타크래프트, 워크래프트 같은 게임을 했던 사람이라면, 방능이라는 단어를 한 번씩 들어봤을거라 생각한다. 내가 만든 게임 방에 다른 사람이 들어올 수 있는 상태를 뜻하는 말로, 그 시절에는 방능이 안되면 포트포워딩을 해야했고, 네이버를 뒤져서 방법을 찾아보면 공유기에서 설정할 수 있다는 말을 듣고 마구잡이로 따라했었다. 최근 스타크래프트 영상을 몇 개 보다보니 갑자기 그 시절이 생각났다. 그 때는 단순 따라하기만했던 블로그의 설정들을 개발자가 된 지금 왜 공유기 설정이 필요했는지, 게임을 호스팅한다는 게 무슨 의미인지 정리해볼 수 있었다. 방장이 호스트인 P2P 통신스타크래프트, 워크래프트는 P2P 방식이다. 서버가 방을 관리하는 것이 아닌, 내가 직접 방장이..'
            data-link="/574"
            style="height: auto !important"
          >
            <a
              href="/574"
              class="post-card-link"
              style="height: auto !important"
            >
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FceSDIW%2FbtsPFjaiizE%2FAAAAAAAAAAAAAAAAAAAAAFflTWqYjz0CU3ty7RWp68j-gbaLz7XUzW2lc9yvGY_R%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252BfJ8cS9ynpqXSHlsYg1kaFDwG%252B8%253D');
                  "
                ></div>
              </div>
              <div
                class="post-card-content"
                style="height: auto !important; min-height: 0px !important"
              >
                <h3 class="post-card-title">
                  <span class="title-text"
                    >님 방능임? 스타크래프트/워크래프트 포트포워딩의 원리</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <div
                  class="google-auto-placed ap_container"
                  style="
                    width: 100%;
                    height: auto;
                    clear: both;
                    text-align: center;
                  "
                >
                  <ins
                    data-ad-format="auto"
                    class="adsbygoogle adsbygoogle-noablate"
                    data-ad-client="ca-pub-7990673941637819"
                    data-adsbygoogle-status="done"
                    style="
                      display: block;
                      margin: auto;
                      background-color: transparent;
                      height: 280px;
                    "
                    data-ad-status="filled"
                    ><div
                      id="aswift_20_host"
                      style="
                        border: none;
                        height: 280px;
                        width: 370px;
                        margin: 0px;
                        padding: 0px;
                        position: relative;
                        visibility: visible;
                        background-color: transparent;
                        display: inline-block;
                        overflow: visible;
                      "
                    >
                      <iframe
                        id="aswift_20"
                        name="aswift_20"
                        browsingtopics="true"
                        style="
                          left: 0;
                          position: absolute;
                          top: 0;
                          border: 0;
                          width: 370px;
                          height: 280px;
                          min-height: auto;
                          max-height: none;
                          min-width: auto;
                          max-width: none;
                        "
                        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                        width="370"
                        height="280"
                        frameborder="0"
                        marginwidth="0"
                        marginheight="0"
                        vspace="0"
                        hspace="0"
                        allowtransparency="true"
                        scrolling="no"
                        allow="attribution-reporting; run-ad-auction"
                        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=280&amp;adk=1057059480&amp;adf=3108898096&amp;w=370&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1755948572&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=3234849431&amp;ad_type=text_image&amp;format=370x280&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;fwr=0&amp;pra=3&amp;rh=309&amp;rw=370&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948572181&amp;bpp=1&amp;bdt=848&amp;idt=1&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C0x0%2C370x280&amp;nras=3&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=672&amp;ady=2304&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=384&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=21&amp;uci=a!l&amp;btvi=2&amp;fsb=1&amp;dtd=9"
                        data-google-container-id="a!l"
                        tabindex="0"
                        title="Advertisement"
                        aria-label="Advertisement"
                        data-google-query-id="CPKCk5fqoI8DFUhFwgUdvTI7dw"
                        data-load-complete="true"
                      ></iframe></div
                  ></ins>
                </div>
                <p class="post-card-excerpt">
                  추억의 "방능"공유기를 사용하는 집에서 스타크래프트, 워크래프트
                  같은 게임을 했던 사람이라면, 방능이라는 단어를 한 번씩
                  들어봤을거라 생각한다. 내가 만든 게임 방에 다른 사람이 들어올
                  수 있는 상태를 뜻하는 말로, 그 시절에는 방능이 안되면
                  포트포워딩을 해야했고, 네이버를 뒤져서 방법을 찾아보면
                  공유기에서 설정할 수 있다는 말을 듣고 마구잡이로 따라했었다.
                  최근 스타크래프트 영상을 몇 개 보다보니 갑자기 그 시절이
                  생각났다. 그 때는 단순 따라하기만했던 블로그의 설정들을
                  개발자가 된 지금 왜 공유기 설정이 필요했는지, 게임을
                  호스팅한다는 게 무슨 의미인지 정리해볼 수 있었다. 방장이
                  호스트인 P2P 통신스타크래프트, 워크래프트는 P2P 방식이다.
                  서버가 방을 관리하는 것이 아닌, 내가 직접 방장이..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.07.31</span>
                </div>
              </div>
            </a>
          </article>

          <article
            class="post-card"
            data-category="OpenSource"
            data-thumbnail="https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FraUNz%2FbtsPlG5UMka%2FAAAAAAAAAAAAAAAAAAAAAFwPiiMgOpyGGWvrPIQ5eAvXEEtT8H26AsvTfjQwV4B3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252FuQvzQk3sNAIOuvNEo9q3MIM3ss%253D"
            data-title="오픈소스 기여하기) NestJS Express↔Fastify 미들웨어 등록 일관성 개선하기"
            data-summary="nest의 e2e이 글을 읽으시는 nest를 활용하는 개발자분들은, e2e를 작성하시나요? 어떻게 작성하고 계신가요?보통은 nest의 공식 문서 가이드에 따라 TestingModule을 통해 NestApplication을 init한 후 사용하실 겁니다.beforeAll(async () =&gt; { const moduleRef = await Test.createTestingModule({ imports: [CatsModule], }) .overrideProvider(CatsService) .useValue(catsService) .compile(); app = moduleRef.createNestApplication(); app.use(thirdPartyMiddleWare()); // i.."
            data-link="/573"
          >
            <a href="/573" class="post-card-link">
              <div class="post-card-thumbnail">
                <div
                  class="post-thumbnail-bg"
                  style="
                    background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FraUNz%2FbtsPlG5UMka%2FAAAAAAAAAAAAAAAAAAAAAFwPiiMgOpyGGWvrPIQ5eAvXEEtT8H26AsvTfjQwV4B3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252FuQvzQk3sNAIOuvNEo9q3MIM3ss%253D');
                  "
                ></div>
              </div>
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <span class="title-text"
                    >오픈소스 기여하기) NestJS Express↔Fastify 미들웨어 등록
                    일관성 개선하기</span
                  >
                  <div class="title-badges"></div>
                </h3>
                <p class="post-card-excerpt">
                  nest의 e2e이 글을 읽으시는 nest를 활용하는 개발자분들은, e2e를
                  작성하시나요? 어떻게 작성하고 계신가요?보통은 nest의 공식 문서
                  가이드에 따라 TestingModule을 통해 NestApplication을 init한 후
                  사용하실 겁니다.beforeAll(async () =&gt; { const moduleRef =
                  await Test.createTestingModule({ imports: [CatsModule], })
                  .overrideProvider(CatsService) .useValue(catsService)
                  .compile(); app = moduleRef.createNestApplication();
                  app.use(thirdPartyMiddleWare()); // i..
                </p>
                <div class="post-card-meta">
                  <span class="post-date">2025.07.16</span>
                </div>
              </div>
            </a>
          </article>

          <div
            class="google-auto-placed"
            style="
              width: 100%;
              height: auto !important;
              clear: both;
              text-align: center;
            "
          >
            <ins
              data-ad-format="auto"
              class="adsbygoogle adsbygoogle-noablate"
              data-ad-client="ca-pub-7990673941637819"
              data-adsbygoogle-status="done"
              style="
                display: block;
                margin: 10px auto;
                background-color: transparent;
                height: 280px;
              "
              data-ad-status="filled"
              ><div
                id="aswift_22_host"
                style="
                  border: none;
                  height: 280px;
                  width: 420px;
                  margin: 0px;
                  padding: 0px;
                  position: relative;
                  visibility: visible;
                  background-color: transparent;
                  display: inline-block;
                  overflow: visible;
                "
              >
                <iframe
                  id="aswift_22"
                  name="aswift_22"
                  browsingtopics="true"
                  style="
                    left: 0;
                    position: absolute;
                    top: 0;
                    border: 0;
                    width: 420px;
                    height: 280px;
                    min-height: auto;
                    max-height: none;
                    min-width: auto;
                    max-width: none;
                  "
                  sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                  width="420"
                  height="280"
                  frameborder="0"
                  marginwidth="0"
                  marginheight="0"
                  vspace="0"
                  hspace="0"
                  allowtransparency="true"
                  scrolling="no"
                  allow="attribution-reporting; run-ad-auction"
                  src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=280&amp;adk=2842444147&amp;adf=3714874890&amp;pi=t.aa~a.3776685112~rp.3&amp;w=420&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1755948572&amp;rafmt=1&amp;to=qs&amp;pwprc=3234849431&amp;format=420x280&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;fwr=0&amp;pra=3&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=40&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948572202&amp;bpp=1&amp;bdt=869&amp;idt=0&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C0x0%2C370x280%2C370x280%2C420x280&amp;nras=5&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=647&amp;ady=3026&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=23&amp;uci=a!n&amp;btvi=4&amp;fsb=1&amp;dtd=8"
                  data-google-container-id="a!n"
                  tabindex="0"
                  title="Advertisement"
                  aria-label="Advertisement"
                  data-google-query-id="CIPQlZfqoI8DFSFOwgUd6L0O_g"
                  data-load-complete="true"
                ></iframe></div
            ></ins>
          </div>
        </div>

        <!-- 페이지네이션 -->

        <div class="pagination">
          <div class="page-numbers">
            <a class="page-num" href="/?page=1"
              ><span class="selected">1</span></a
            >

            <a class="page-num" href="/?page=2"><span class="">2</span></a>

            <a class="page-num" href="/?page=3"><span class="">3</span></a>

            <a class="page-num" href="/?page=4"><span class="">4</span></a>

            <a class="page-num"><span class="">···</span></a>

            <a class="page-num" href="/?page=57"><span class="">57</span></a>
          </div>
        </div>
      </section>

      <!-- 게시글 상세 -->

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLxdTy%2FbtsP2COf1CR%2FAAAAAAAAAAAAAAAAAAAAAO4sFMxgixcBfAuTm0TWTtz7f4coLA9QkWF5gr63JxyJ%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlxEBhZTO48jElOxlhfem9Nq0Zjk%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            Prisma v6.14.0의 성능 개선에 따른 브레이킹 체인지, 이에 기여한
            이야기.
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">OpenSource</span>

            <span class="post-hero-date">2025. 8. 22. 14:44</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/580?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(580); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_6FtbFl"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_0_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_0"
                    name="aswift_0"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=3130235007&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571416&amp;bpp=2&amp;bdt=83&amp;idt=118&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;correlator=7792042947413&amp;frm=20&amp;pv=2&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=1&amp;uci=a!1&amp;fsb=1&amp;dtd=125"
                    data-google-container-id="a!1"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CMq57pbqoI8DFahMwgUdDd4c1w"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <h2 style="text-align: left" data-ke-size="size26" id="heading-0">
              서론
            </h2>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="스크린샷 2025-08-21 오후 2.47.00.png"
              data-origin-width="1804"
              data-origin-height="282"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/c6pQkS/btsP0TwQC9v/AAAAAAAAAAAAAAAAAAAAANesF9N263abseaHkUhIcmL_2AGOJAWOP_LDTHXWv_c0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=meoxDfxKCO56n6ZLrHTmF44lYu8%3D"
                data-phocus="https://blog.kakaocdn.net/dna/c6pQkS/btsP0TwQC9v/AAAAAAAAAAAAAAAAAAAAANesF9N263abseaHkUhIcmL_2AGOJAWOP_LDTHXWv_c0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=meoxDfxKCO56n6ZLrHTmF44lYu8%3D"
                data-alt="오픈소스 메인 브렌치에 박제!"
                ><img
                  src="https://blog.kakaocdn.net/dna/c6pQkS/btsP0TwQC9v/AAAAAAAAAAAAAAAAAAAAANesF9N263abseaHkUhIcmL_2AGOJAWOP_LDTHXWv_c0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=meoxDfxKCO56n6ZLrHTmF44lYu8%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fc6pQkS%2FbtsP0TwQC9v%2FAAAAAAAAAAAAAAAAAAAAANesF9N263abseaHkUhIcmL_2AGOJAWOP_LDTHXWv_c0%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DmeoxDfxKCO56n6ZLrHTmF44lYu8%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1804"
                  height="282"
                  data-filename="스크린샷 2025-08-21 오후 2.47.00.png"
                  data-origin-width="1804"
                  data-origin-height="282"
                  data-phocus-index="0"
              /></span>
              <figcaption>오픈소스 메인 브렌치에 박제!</figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">
              <br /><b
                >들어가기전 기여에 필요해서 Prisma에 대해 간단하게 뜯어본
                포스팅이 있으니,</b
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <b
                >전반적인 내용 이해에 도움이 될 것 같아서 정리해놓았으니 필요 시
                한 번 훑어보시길 권장드립니다.</b
              >
            </p>
            <figure
              id="og_1755788030121"
              contenteditable="false"
              data-ke-type="opengraph"
              data-ke-align="alignCenter"
              data-og-type="article"
              data-og-title="Prisma는 왜 Type-Safe할까?"
              data-og-description="TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장"
              data-og-host="mag1c.tistory.com"
              data-og-source-url="https://mag1c.tistory.com/581"
              data-og-url="https://mag1c.tistory.com/581"
              data-og-image="https://blog.kakaocdn.net/dna/bEH5C9/hyZymiTP8D/AAAAAAAAAAAAAAAAAAAAAM1RGfk7229gfyLvtrwOtvBvH1gP_wA2Uvz6oYzaFdaE/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=QtcELZ%2FTyIEJtR4xBJdSRlt0trc%3D"
            >
              <a
                href="https://mag1c.tistory.com/581"
                target="_blank"
                rel="noopener"
                data-source-url="https://mag1c.tistory.com/581"
              >
                <div
                  class="og-image"
                  style="
                    background-image: url('https://blog.kakaocdn.net/dna/bEH5C9/hyZymiTP8D/AAAAAAAAAAAAAAAAAAAAAM1RGfk7229gfyLvtrwOtvBvH1gP_wA2Uvz6oYzaFdaE/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=QtcELZ%2FTyIEJtR4xBJdSRlt0trc%3D');
                  "
                >
                  &nbsp;
                </div>
                <div class="og-text">
                  <p class="og-title" data-ke-size="size16">
                    Prisma는 왜 Type-Safe할까?
                  </p>
                  <p class="og-desc" data-ke-size="size16">
                    TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!!
                    라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도
                    TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종
                    느꼈습니다. (굉장
                  </p>
                  <p class="og-host" data-ke-size="size16">mag1c.tistory.com</p>
                </div>
              </a>
            </figure>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              오픈소스 기여모임 9기의 참여자로 nestjs에 5개, loki, gemini-cli,
              Prisma에 각 1개씩 7개의 PR을 생성했고, 그 중 2개의 PR이
              머지되었습니다. 그 중 Prisma에 컨트리뷰터가 된 내용을 다뤘습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              제가 처음으로 Prisma 생성한 이번 PR은 6.14.0에 반영된 Prisma의
              퍼포먼스 개선에서 발생한 이슈를 해결한 내용으로, 퍼포먼스 개선
              PR을 분석해보고, 제 PR이 이전 PR의 어떤 문제를 해결했는지의 순서로
              작성되었습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26" id="heading-1">
              문제 원인: 타입 퍼포먼스 개선
            </h2>
            <p data-ke-size="size16">
              <a
                href="https://github.com/prisma/prisma/releases/tag/6.14.0#:~:text=Improved%20type%20performance"
                target="_blank"
                rel="noopener"
                >6.14.0 릴리즈 노트</a
              >
              안에는, IDE에서 타입 추론에 대한 성능 개선의 내용도 있었습니다.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="2436"
              data-origin-height="248"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/W46jS/btsPZOiTRg2/AAAAAAAAAAAAAAAAAAAAAP0WQtcnBFUveCJUnenMNx-DUOPK91O9gak9CcSomqto/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sp5Y38b7vZTfvekeANhQH3hUaAU%3D"
                data-phocus="https://blog.kakaocdn.net/dna/W46jS/btsPZOiTRg2/AAAAAAAAAAAAAAAAAAAAAP0WQtcnBFUveCJUnenMNx-DUOPK91O9gak9CcSomqto/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sp5Y38b7vZTfvekeANhQH3hUaAU%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/W46jS/btsPZOiTRg2/AAAAAAAAAAAAAAAAAAAAAP0WQtcnBFUveCJUnenMNx-DUOPK91O9gak9CcSomqto/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sp5Y38b7vZTfvekeANhQH3hUaAU%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FW46jS%2FbtsPZOiTRg2%2FAAAAAAAAAAAAAAAAAAAAAP0WQtcnBFUveCJUnenMNx-DUOPK91O9gak9CcSomqto%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dsp5Y38b7vZTfvekeANhQH3hUaAU%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="2436"
                  height="248"
                  data-origin-width="2436"
                  data-origin-height="248"
                  data-phocus-index="1"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              벤치마크 테스트 코드를 보면, 타입 체킹이 약 1300만회에서 1000회
              수준으로 엄청난 퍼포먼스 개선이 있었습니다.
            </p>
            <p data-ke-size="size16">
              하지만 이 변경사항으로 6.12.0에 Preview로 등장한 ESM 호환
              Generator를 사용할 때, 기존 처럼 PrismaClient를 사용할 수 없게
              되었습니다.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1328"
              data-origin-height="562"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                data-phocus="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLNIuy%2FbtsP29ekJP1%2FAAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dqsl3KECJvkCveQHOKln3uDWDSlQ%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="791"
                  height="335"
                  data-origin-width="1328"
                  data-origin-height="562"
                  data-phocus-index="2"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              PR에서, 타입 퍼포먼스 개선을 위해 변경된 주요 코드 PrismaClient
              생성자 인터페이스고, 변경 사항은 다음과 같습니다.
            </p>
            <pre
              id="code_1755832077120"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// &lt;=6.13.0: ClientOptions와 로그 옵션 제네릭에 기본값이 있었다.</span>
<span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> PrismaClientConstructor {
<span class="hljs-keyword" style="">new</span> &lt;
ClientOptions <span class="hljs-keyword" style="">extends</span> Prisma.PrismaClientOptions = Prisma.PrismaClientOptions,
U = LogOptions&lt;ClientOptions&gt;,
ExtArgs <span class="hljs-keyword" style="">extends</span> runtime.Types.Extensions.InternalArgs = runtime.Types.Extensions.DefaultArgs,
&gt;(options?: Prisma.Subset&lt;ClientOptions, Prisma.PrismaClientOptions&gt;):
PrismaClient&lt;ClientOptions, U, ExtArgs&gt;
}

<span class="hljs-comment" style="">// &gt;=6.14.0: 타입 체크 성능을 높이기 위해 개선</span>
<span class="hljs-comment" style="">//   1. 기존의 ClientOptions을 분리 (기존의 Options, LogOpts, OmitOpts)</span>
<span class="hljs-comment" style="">//   2. ⭐️ PrismaClientOptions, LogOptions에 타입 기본값이 제거됨 ⭐️ </span>
<span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> PrismaClientConstructor {
<span class="hljs-keyword" style="">new</span> &lt;
Options <span class="hljs-keyword" style="">extends</span> Prisma.PrismaClientOptions,
LogOpts <span class="hljs-keyword" style="">extends</span> LogOptions&lt;Options&gt;,
OmitOpts <span class="hljs-keyword" style="">extends</span> Prisma.PrismaClientOptions[<span class="hljs-string" style="">'omit'</span>] = Options <span class="hljs-keyword" style="">extends</span> { <span class="hljs-attr" style="">omit</span>: infer U } ? U : Prisma.PrismaClientOptions[<span class="hljs-string" style="">'omit'</span>],
ExtArgs <span class="hljs-keyword" style="">extends</span> runtime.Types.Extensions.InternalArgs = runtime.Types.Extensions.DefaultArgs,
&gt;(options?: Options): PrismaClient&lt;LogOpts, OmitOpts, ExtArgs&gt;
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              아래는, 6.14.0에 반영된 타입 퍼포먼스 개선에 대한 PR과, 개선의
              이유를 정리해봤습니다.
            </p>
            <h2 data-ke-size="size26" id="heading-2">
              타입 퍼포먼스 개선의 이유
            </h2>
            <h4 data-ke-size="size20" id="heading-3">1. 문제 원인</h4>
            <p data-ke-size="size16">
              제가 Prisma의 의도를 정확히 파악할 수는 없겠으나,
              <span style="color: #ee2323"
                >TypeScript의 덕 타이핑에서 문제를 찾을 수 있었습니다.</span
              >
            </p>
            <pre
              id="code_1755833570086"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">type</span> PrismaClientOptions = {
log?: LogLevel[] | LogDefinition[]
datasourceUrl?: <span class="hljs-built_in" style="">string</span>
omit?: {
[ModelName: <span class="hljs-built_in" style="">string</span>]: {
[FieldName: <span class="hljs-built_in" style="">string</span>]: <span class="hljs-built_in" style="">boolean</span>
}
}
}

<span class="hljs-comment" style="">// &lt;=6.13.0: 하나의 제네릭</span>
<span class="hljs-keyword" style="">type</span> OldPrismaClient&lt;ClientOptions <span class="hljs-keyword" style="">extends</span> PrismaClientOptions&gt; = {
<span class="hljs-attr" style="">user</span>: UserDelegate&lt;ClientOptions&gt;
post: PostDelegate&lt;ClientOptions&gt;
<span class="hljs-comment" style="">// schema.prisma에 정의한 여러 모델들.</span>
}

<span class="hljs-keyword" style="">type</span> UserDelegate&lt;ClientOptions&gt; = {
<span class="hljs-attr" style="">findMany</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">args?: UserFindManyArgs&lt;ClientOptions&gt;</span>) =&gt;</span> <span class="hljs-built_in" style="">Promise</span>&lt;User[]&gt;
findFirst: <span class="hljs-function" style="">(<span class="hljs-params" style="">args?: UserFindFirstArgs&lt;ClientOptions&gt;</span>) =&gt;</span> <span class="hljs-built_in" style="">Promise</span>&lt;User | <span class="hljs-literal" style="">null</span>&gt;
create: <span class="hljs-function" style="">(<span class="hljs-params" style="">args: UserCreateArgs&lt;ClientOptions&gt;</span>) =&gt;</span> <span class="hljs-built_in" style="">Promise</span>&lt;User&gt;
<span class="hljs-comment" style="">// Prisma에서 지원하는 수많은 인터페이스들</span>
}

<span class="hljs-keyword" style="">type</span> UserFindManyArgs&lt;ClientOptions&gt; = {
where?: UserWhereInput
select?: UserSelect&lt;ClientOptions&gt;
include?: UserInclude&lt;ClientOptions&gt;
omit?: ExtractOmit&lt;ClientOptions, <span class="hljs-string" style="">'user'</span>&gt;  <span class="hljs-comment" style="">// 재귀적으로 Omit하여 Payload 생성</span>
}

<span class="hljs-keyword" style="">type</span> ExtractOmit&lt;ClientOptions, Model&gt; =
ClientOptions <span class="hljs-keyword" style="">extends</span> { <span class="hljs-attr" style="">omit</span>: infer O }
? O <span class="hljs-keyword" style="">extends</span> { [K <span class="hljs-keyword" style="">in</span> Model]: infer Fields }
? Fields
: <span class="hljs-built_in" style="">never</span>
: <span class="hljs-built_in" style="">never</span></code></pre>
            <p data-ke-size="size16">
              우리는 PrismaClient 인스턴스를 생성하는 데서 끝이지만, 내부적으로
              TypeScript는 거대한 하나의 제네릭 타입을 통해 아래와 같이 타입을
              추론합니다. 현재 Nest를 사용하고 있기 때문에, Nest로 예를
              들어보겠습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              일반적으로 Nest에서 PrimsaClient는 다음과 같은 방식으로
              사용됩니다.
            </p>
            <pre
              id="code_1755833692915"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// 1. PrismaClient를 상속한 DB Connector Service (NestJS 공식문서 예제)</span>
<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">PrismaService</span> <span class="hljs-keyword" style="">extends</span> <span class="hljs-title" style="">PrismaClient</span> </span>{  <span class="hljs-comment" style="">// 상속 시 타입 체크</span>
<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-built_in" style="">super</span>({ <span class="hljs-attr" style="">log</span>: [<span class="hljs-string" style="">'query'</span>] })
}
}

<span class="hljs-comment" style="">// 2.의존성 주입으로 사용.</span>
<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">UserService</span> </span>{
<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> prisma: PrismaClient</span>)</span> {}  <span class="hljs-comment" style="">// 파라미터 타입 체크</span>
}

<span class="hljs-comment" style="">// 3. 트랜잭션을 위한 유틸리티 함수</span>
<span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-keyword" style="">function</span> <span class="hljs-title" style="">withTransaction</span>(<span class="hljs-params" style="">
prisma: PrismaClient,  <span class="hljs-comment" style="">// 파라미터 타입 체크</span>
callback: (tx: PrismaClient) =&gt; <span class="hljs-built_in" style="">Promise</span>&lt;<span class="hljs-built_in" style="">void</span>&gt;
</span>) </span>{
}

<span class="hljs-comment" style="">// 4. 혹은 일반적인 타입 명시</span>
<span class="hljs-keyword" style="">let</span> myClient: PrismaClient;
myClient = <span class="hljs-keyword" style="">new</span> PrismaClient({ <span class="hljs-attr" style="">log</span>: [<span class="hljs-string" style="">'query'</span>] });</code></pre>
            <p data-ke-size="size16">
              <span style="color: #ee2323"
                >TypeScript는 덕 타이핑을 통해 타입 호환성을 체크합니다.</span
              >
            </p>
            <p data-ke-size="size16">
              이 때, 하나의 거대한 제네릭인 ClientOptions가 모든 곳에 전파되어
              모든 모델의 메서드가 ClientOptions에 의존하는 상황이 만들어집니다.
              덕 타이핑 때문에, 모든 ClientOptions가 있는 생성된 프리즈마
              코드들을 돌면서, 구조 전체를 체크해야만 했습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">간단하게 다시 설명해보겠습니다.</p>
            <pre
              id="code_1755837762845"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">model User {
id Int <span class="hljs-meta" style="">@id</span> <span class="hljs-meta" style="">@default</span>(autoincrement())
name <span class="hljs-built_in" style="">String</span>
}</code></pre>
            <p data-ke-size="size16">
              위처럼 모델이 user 하나만 있다고 가정해도, 타입 호환성의 체크는
              다음과 같이 이루어질 것으로 예상됩니다.
            </p>
            <pre
              id="code_1755837885093"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">PrismaService</span> <span class="hljs-keyword" style="">extends</span> <span class="hljs-title" style="">PrismaClient</span> </span>{
<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-built_in" style="">super</span>({ <span class="hljs-attr" style="">log</span>: [<span class="hljs-string" style="">'query'</span>] })
}
}

<span class="hljs-comment" style="">// TS는 PrismaService의 인스턴스가 PrismaClient와 호환되는지 체크합니다.</span>
<span class="hljs-comment" style="">//   프로퍼티, 함수 시그니처, 파라미터 등.</span>

<span class="hljs-comment" style="">// 프로퍼티 체크</span>
<span class="hljs-comment" style="">// PrismaService는 PrismaClient의 모든 프로퍼티를 가지는가?</span>
<span class="hljs-comment" style="">// user: UserDelegate</span>
<span class="hljs-comment" style="">// $connect(): Promise&lt;void&gt;</span>
<span class="hljs-comment" style="">// $disconnect(): Promise&lt;void&gt;</span>
<span class="hljs-comment" style="">// ... 수십 개의 프로퍼티와 메서드</span>

<span class="hljs-comment" style="">// 메서드 시그니처 체크</span>
<span class="hljs-comment" style="">// (args?: UserFindManyArgs&lt;{ log: ['query'] }&gt;) =&gt; Promise&lt;User[]&gt;</span>
<span class="hljs-comment" style="">//                           ↑ ClientOptions 전체가 전파</span>

<span class="hljs-comment" style="">// 메서드 파라미터의 깊은 체크</span>
<span class="hljs-comment" style="">// UserFindManyArgs의 모든 프로퍼티 체크</span>
<span class="hljs-comment" style="">// - where?: UserWhereInput</span>
<span class="hljs-comment" style="">// - select?: UserSelect&lt;{ log: ['query'] }&gt;</span>
<span class="hljs-comment" style="">// - include?: UserInclude&lt;{ log: ['query'] }&gt;</span>
<span class="hljs-comment" style="">// - omit?: ExtractOmit&lt;{ log: ['query'] }, 'user'&gt;</span>

<span class="hljs-comment" style="">// 중첩된 타입들의 재귀적 체크</span>
<span class="hljs-comment" style="">// select의 각 필드, include의 관계들 등등....</span>
<span class="hljs-comment" style="">// 이 과정이 모든 모델, 모든 메서드에 대해 반복됩니다.</span></code></pre>
            <p data-ke-size="size16">
              모델이 커지면 커질수록, 모델의 필드가 많아질수록 비례해서 증가하게
              되겠죠. 이는 Prisma의 벤치마크 코드에도 잘 드러나있습니다.
            </p>
            <pre
              id="code_1755838050533"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// Prisma의 benchmark 코드 일부</span>
bench(<span class="hljs-string" style="">'log config applied'</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">const</span> client = <span class="hljs-keyword" style="">new</span> PrismaClientConstructor({
<span class="hljs-attr" style="">log</span>: [
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'query'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'event'</span> },
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'error'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'stdout'</span> },
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'warn'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'stdout'</span> },
],
})

<span class="hljs-comment" style="">/**
* TypeScript는 덕타이핑을 사용하기 때문에,
* passClientAround(client) 호출 시점에 client가 
* PrismaClient 타입과 구조적으로 동일한지 모든 프로퍼티와 메서드를 비교합니다.
*/</span> 
<span class="hljs-keyword" style="">const</span> passClientAround = <span class="hljs-function" style="">(<span class="hljs-params" style="">prisma: PrismaClient</span>) =&gt;</span> {
<span class="hljs-keyword" style="">return</span> prisma
}

<span class="hljs-keyword" style="">return</span> passClientAround(client)
}).types([<span class="hljs-number" style="">13720983</span>, <span class="hljs-string" style="">'instantiations'</span>]) <span class="hljs-comment" style="">// 1300만건</span></code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h4 data-ke-size="size20" id="heading-4">2. 개선</h4>
            <p data-ke-size="size16">
              위에서 정리한 내용을 바탕으로, 이 문제의 원인은 ClientOptions라는
              거대한 하나의 타입만 사용했기 때문입니다.
            </p>
            <p data-ke-size="size16">
              그래서 Prisma에서는 아래와 같이 타입들을 목적별로 분리한 것
              같아요.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>LogOpts: $on() 메서드에만 영향을 주는 로그 옵션들</li>
              <li>OmitOpts: 모델 메서드에만 영향을 주는 옵션들</li>
            </ul>
            <p data-ke-size="size16">
              이를 통해 불필요한 타입 전파를 차단하려고 하는 시도였다고 볼 수
              있을 것 같습니다. 기대 효과는, 변경된 벤치마크 코드에서도 볼 수
              있다시피 엄청난 개선이 되었습니다. 위의 로그 옵션에 대한 벤치마크
              코드를 다시 볼까요?
            </p>
            <pre
              id="code_1755839801196"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">bench(<span class="hljs-string" style="">'log config applied'</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">const</span> client = <span class="hljs-keyword" style="">new</span> PrismaClientConstructor({
<span class="hljs-attr" style="">log</span>: [
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'query'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'event'</span> },
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'error'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'stdout'</span> },
{ <span class="hljs-attr" style="">level</span>: <span class="hljs-string" style="">'warn'</span>, <span class="hljs-attr" style="">emit</span>: <span class="hljs-string" style="">'stdout'</span> },
],
})

<span class="hljs-keyword" style="">const</span> passClientAround = <span class="hljs-function" style="">(<span class="hljs-params" style="">prisma: PrismaClient</span>) =&gt;</span> {
<span class="hljs-comment" style="">// @ts-expect-error - using a non-existent event type is a type error</span>
prisma.$on(<span class="hljs-string" style="">'foobarbaz'</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">event</span>) =&gt;</span> {
<span class="hljs-built_in" style="">console</span>.log(event)
})
<span class="hljs-keyword" style="">return</span> prisma
}

<span class="hljs-keyword" style="">const</span> passToAnyClientAround = <span class="hljs-function" style="">(<span class="hljs-params" style="">prisma: PrismaClient&lt;<span class="hljs-built_in" style="">any</span>&gt;</span>) =&gt;</span> {
prisma.$on(<span class="hljs-string" style="">'info'</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">event</span>) =&gt;</span> {
<span class="hljs-built_in" style="">console</span>.log(event)
})
<span class="hljs-keyword" style="">return</span> prisma
}

client.$on(<span class="hljs-string" style="">'query'</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">event</span>) =&gt;</span> {
<span class="hljs-built_in" style="">console</span>.log(event)
})

<span class="hljs-comment" style="">// @ts-expect-error - info is not a valid event type because we do not pass it in the client options</span>
client.$on(<span class="hljs-string" style="">'info'</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">event</span>) =&gt;</span> {
<span class="hljs-built_in" style="">console</span>.log(event)
})

passClientAround(client)
passToAnyClientAround(client)
}).types([<span class="hljs-number" style="">697</span>, <span class="hljs-string" style="">'instantiations'</span>]) <span class="hljs-comment" style="">// 1300만 &gt; 697</span></code></pre>
            <p data-ke-size="size16">
              타입 세분화를 통해 로그 옵션에 대한 타입 호환성을 체크하다보니,
              같은 모델을 정의했다고 하더라도 약 1300만 회에서 700회 정도로 말도
              안되는 수치로 감소했던 것을 볼 수 있습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26" id="heading-5">
              breaking changes 해결하기
            </h2>
            <p data-ke-size="size16">
              다시 제 기여 얘기로 돌아와서, 위 변경사항 때문에 6.14.0으로
              업데이트를 했을 때 PrismaClient를 사용하는 거의 모든 코드에서 빨간
              줄이 등장(?)하게 되었습니다.
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <span style="color: #9d9d9d"
                ><u
                  >(6.12.0에 도입된 ESM-Generator을 사용할 때 발생하며, 기존의
                  js Generator은 이상 없는 것으로 확인했습니다.)</u
                ></span
              >
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1328"
              data-origin-height="562"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                data-phocus="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/LNIuy/btsP29ekJP1/AAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=qsl3KECJvkCveQHOKln3uDWDSlQ%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLNIuy%2FbtsP29ekJP1%2FAAAAAAAAAAAAAAAAAAAAACgbumjAX1VtgF0L5OSTJzLF_sNtw1iwbouSGIEgHqGB%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dqsl3KECJvkCveQHOKln3uDWDSlQ%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="791"
                  height="335"
                  data-origin-width="1328"
                  data-origin-height="562"
                  data-phocus-index="3"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              NestJS 기준의 코드 예시인데요, 어떤 프레임워크든 간에 Prisma를
              사용하는 많은 개발자들이 PrismaClient에 제네릭을 명시하지 않고
              사용했기 때문에 위 변경 사항은 breaking changes가 될 수 밖에
              없습니다. 모든 PrismaClient관련 코드를 수정해야했으니까요.
              아래처럼요.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="936"
              data-origin-height="724"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/OBdcu/btsP3eUMLnW/AAAAAAAAAAAAAAAAAAAAANG7QewUJebFahpOMMraKNYDMN1Jo9c7jmBEbjIlAeoZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0T%2FNBDNBqSEa7h3GHUpQ8g4t%2F8k%3D"
                data-phocus="https://blog.kakaocdn.net/dna/OBdcu/btsP3eUMLnW/AAAAAAAAAAAAAAAAAAAAANG7QewUJebFahpOMMraKNYDMN1Jo9c7jmBEbjIlAeoZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0T%2FNBDNBqSEa7h3GHUpQ8g4t%2F8k%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/OBdcu/btsP3eUMLnW/AAAAAAAAAAAAAAAAAAAAANG7QewUJebFahpOMMraKNYDMN1Jo9c7jmBEbjIlAeoZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0T%2FNBDNBqSEa7h3GHUpQ8g4t%2F8k%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FOBdcu%2FbtsP3eUMLnW%2FAAAAAAAAAAAAAAAAAAAAANG7QewUJebFahpOMMraKNYDMN1Jo9c7jmBEbjIlAeoZ%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D0T%252FNBDNBqSEa7h3GHUpQ8g4t%252F8k%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="629"
                  height="487"
                  data-origin-width="936"
                  data-origin-height="724"
                  data-phocus-index="4"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              PR 내용만 보면 별 거 없는 딱 두 줄의 추가인데요. 저는 기존
              퍼포먼스 향상을 유지하면서도 많은 개발자들이 코드를 수정하지
              않고도 기존 코드 그대로 사용이 가능하도록, PrismaClient에 디폴트
              타입을 추가해줬습니다.
            </p>
            <pre
              id="code_1755840815496"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// Options, LogOpts에 디폴트 옵션 추가.</span>
<span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> PrismaClientConstructor {
${indent(<span class="hljs-built_in" style="">this</span>.jsDoc, TAB_SIZE)}
<span class="hljs-keyword" style="">new</span> &lt;
Options <span class="hljs-keyword" style="">extends</span> Prisma.PrismaClientOptions = Prisma.PrismaClientOptions,
LogOpts <span class="hljs-keyword" style="">extends</span> LogOptions&lt;Options&gt; = LogOptions&lt;Options&gt;,
OmitOpts <span class="hljs-keyword" style="">extends</span> Prisma.PrismaClientOptions[<span class="hljs-string" style="">'omit'</span>] = Options <span class="hljs-keyword" style="">extends</span> { <span class="hljs-attr" style="">omit</span>: infer U } ? U : Prisma.PrismaClientOptions[<span class="hljs-string" style="">'omit'</span>],
ExtArgs <span class="hljs-keyword" style="">extends</span> runtime.Types.Extensions.InternalArgs = runtime.Types.Extensions.DefaultArgs
&gt;(options?: Prisma.Subset&lt;Options, Prisma.PrismaClientOptions&gt; ): PrismaClient&lt;LogOpts, OmitOpts, ExtArgs&gt;</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이렇게 해서, 바로 PR이 merge가 되었고, 제 PR만 단독으로 머지된
              탓에, 아마 Latest Commit에 제 프로필 사진이 올라가지 않았나
              싶네요.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26" id="heading-6">정리</h2>
            <p data-ke-size="size16">
              Prisma를 거의 처음 사용해보면서, 오픈소스 기여를 위해 관련 코드를
              깊이 파헤쳐보고 궁금증이 생겨 Prisma가 왜 Type-Safe한 ORM인지까지
              돌아봤습니다. 물론 프리즈마 엔진 코드가 생소한 Rust이고, Prisma에
              익숙하지 않아 분석이 다소 완벽하지 않았네요.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              단 한 줄, 두 줄의 코드 변경으로 대다수의 개발자들에게 breaking
              changes 없이 확장된 기능, 더 좋은 퍼포먼스를 제공할 수 있는 기여를
              했다는 생각에 현재까지 기여 중에 코드 길이 대비 가장 뿌듯했던 기여
              순간이었던 것 같습니다. 더불어 TypeScript와도 조금 더 친해지는
              계기가 되었던 것 같아요.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              오픈소스 기여는 이렇게 단 한줄의 변경으로 수 억명의 사람들에게
              임팩트를 줄 수 있고, 더불어 사용하고 있는 기술에 대한 깊은 이해,
              기술의 기반이 되는 더 깊이 있는 지식까지도 습득할 수 있는 좋은
              기회인 것 같습니다. 앞으로도 여기저기 사용하는 기술들에 대해 관심
              있게 둘러 볼 예정입니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              오픈 소스 기여에 어려움을 겪고 계신 분들이 있다면,
              <a
                href="https://www.linkedin.com/in/injae-kim-dev/"
                target="_blank"
                rel="noopener"
                >인제님</a
              >이 운영하시는
              <a
                href="https://medium.com/opensource-contributors/%EB%AA%A8%EC%A7%91-%EC%A4%91-%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4-%EA%B8%B0%EC%97%AC-%EB%AA%A8%EC%9E%84-9%EA%B8%B0-%EC%B0%B8%EA%B0%80%EC%9E%90%EB%A5%BC-%EB%AA%A8%EC%A7%91%ED%95%A9%EB%8B%88%EB%8B%A4-8%EC%9B%94%EA%B0%84-%EC%A7%84%ED%96%89-%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4-%ED%82%A4%EB%A7%81-%EA%B5%BF%EC%A6%88-%EC%84%A0%EB%AC%BC%EA%B9%8C%EC%A7%80-aadfa4c7e59e"
                target="_blank"
                rel="noopener"
                >오픈소스 기여 모임</a
              >에 참여해보시는 것은 어떨까요?
            </p>
            <p data-ke-size="size16">
              다양한 분야에서 여러 기여를 하신 운영진분들과 참여자분들과
              소통하면서, 이슈 선정부터 PR 기여까지 많은 도움을 얻을 수
              있습니다!
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26" id="heading-7">참조</h2>
            <p data-ke-size="size16">
              <a
                href="https://www.prisma.io/"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://www.prisma.io/</a
              >
            </p>
            <p data-ke-size="size16">
              <a
                href="https://www.typescriptlang.org/docs/handbook/2/generics.html"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://www.typescriptlang.org/docs/handbook/2/generics.html</a
              >
            </p>
            <p data-ke-size="size16">
              <a href="https://github.com/prisma/prisma/releases/tag/6.14.0"
                >https://github.com/prisma/prisma/releases/tag/6.14.0</a
              >
            </p>
            <p data-ke-size="size16">
              <a
                href="https://github.com/prisma/prisma/pull/27777"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://github.com/prisma/prisma/pull/27777</a
              >
            </p>
            <p data-ke-size="size16">
              <a
                href="https://stackoverflow.com/questions/70545982/why-am-i-getting-type-instantiation-is-excessively-deep-and-possibly-infinite?utm_source=chatgpt.com"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://stackoverflow.com/questions/70545982/why-am-i-getting-type-instantiation-is-excessively-deep-and-possibly-infinite?utm_source=chatgpt.com</a
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_or0msH"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_1_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_1"
                    name="aswift_1"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=1312983526&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571418&amp;bpp=1&amp;bdt=85&amp;idt=136&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=2&amp;uci=a!2&amp;fsb=1&amp;dtd=140"
                    data-google-container-id="a!2"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CLWW7pbqoI8DFbhFwgUdtkI1gA"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 580,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-580"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FLxdTy%2FbtsP2COf1CR%2FAAAAAAAAAAAAAAAAAAAAAO4sFMxgixcBfAuTm0TWTtz7f4coLA9QkWF5gr63JxyJ%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlxEBhZTO48jElOxlhfem9Nq0Zjk%253D"
                  data-title="Prisma v6.14.0의 성능 개선에 따른 브레이킹 체인지, 이에 기여한 이야기."
                  data-description="서론 들어가기전 기여에 필요해서 Prisma에 대해 간단하게 뜯어본 포스팅이 있으니,전반적인 내용 이해에 도움이 될 것 같아서 정리해놓았으니 필요 시 한 번 훑어보시길 권장드립니다. Prisma는 왜 Type-Safe할까?TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장mag1c.tistory.com 오픈소스 기여모임 9기의 참여자로 nestjs에 5개, loki, gemini-cli, Prisma에 각 1개씩 7개의 PR을 생성했고, 그 중 2개의 PR이 머지되었습니다. 그 중 Prisma에 컨트리뷰터가 된 내용을 다뤘습니.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/580"
                  data-relative-pc-url="/580"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer">
                  <div class="bundle_post">
                    <button
                      class="btn_mark"
                      data-service="url"
                      data-tiara-action-name="공유_클릭"
                      data-tiara-layer="copy_url"
                      data-tiara-copy="URL복사"
                    >
                      <span class="ico_sns ico_url"></span
                      ><span class="txt_sns">URL 복사</span></button
                    ><button
                      class="btn_mark"
                      data-service="kakaotalk"
                      data-tiara-action-name="공유_클릭"
                      data-tiara-layer="kakao"
                      data-tiara-copy="카카오톡 공유"
                    >
                      <span class="ico_sns ico_kt"></span
                      ><span class="txt_sns">카카오톡 공유</span></button
                    ><button
                      class="btn_mark"
                      data-service="facebook"
                      data-tiara-action-name="공유_클릭"
                      data-tiara-layer="facebook"
                      data-tiara-copy="페이스북 공유"
                    >
                      <span class="ico_sns ico_fb"></span
                      ><span class="txt_sns">페이스북 공유</span></button
                    ><button
                      class="btn_mark"
                      data-service="twitter"
                      data-tiara-action-name="공유_클릭"
                      data-tiara-layer="X"
                      data-tiara-copy="엑스 공유"
                    >
                      <span class="ico_sns ico_x"></span
                      ><span class="txt_sns">엑스 공유</span></button
                    ><span class="ico_postbtn ico_arrbt"></span>
                  </div>
                </div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="580"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="580"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry580Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://redsun.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >방금이요꽝꽝</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.22 15:56
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=580&amp;commentId=27279266"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">왔다간 흔적 남깁니다~</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_580"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(580, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/580"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 580); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[580] = true;
          findFragmentAndHighlight(580);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F46LWx%2FbtsP0fAjksL%2FAAAAAAAAAAAAAAAAAAAAACmOLp61oJ9cqC7a39gGePTGkAx420PEletbUORPNwaa%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNoTo8%252F4Cu8%252FZjPCyyy%252BZm121MYk%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">Prisma는 왜 Type-Safe할까?</h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">OpenSource</span>

            <span class="post-hero-date">2025. 8. 21. 23:52</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/581?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(581); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_SGP68z"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_2_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_2"
                    name="aswift_2"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=1575885580&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571418&amp;bpp=1&amp;bdt=85&amp;idt=147&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=3&amp;uci=a!3&amp;fsb=1&amp;dtd=150"
                    data-google-container-id="a!3"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CLue7pbqoI8DFXBFwgUdnhkcrQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고
              하더군요.
            </p>
            <p data-ke-size="size16">
              제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고
              Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장히 주관적임)
              이 주장의 근간에는 Type-Safe한 ORM인것이 메인일 것 같습니다. (물론
              다른 장점들도 많을 것 같은데 차차 파헤쳐보죠)
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이번에 오픈소스 기여를 통해 처음으로 Prisma 코드를 약간
              파보았습니다.
            </p>
            <p data-ke-size="size16">
              TypeORM만 쓰고 거의 겉핥기식으로 사용했었는데, 이번 기회에 제대로
              Prisma에 입문해보려고 합니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Prisma</h2>
            <p data-ke-size="size16">
              Prisma는 스키마 기반 코드 생성형 ORM입니다. schema.prisma를
              바탕으로 런타임 이전에 Prisma Client를 생성해야합니다.<span
                >&nbsp;</span
              ><b>(prisma generate)</b>
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="668"
              data-origin-height="231"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/mwYKI/btsP1oJVcRT/AAAAAAAAAAAAAAAAAAAAAERUDR0n8dwpaycpUF44wvoaOP7mUJX6P8PvMNEgJswW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=gAfbB4MlAHyZU1D4qT9j%2BCWXy2w%3D"
                data-phocus="https://blog.kakaocdn.net/dna/mwYKI/btsP1oJVcRT/AAAAAAAAAAAAAAAAAAAAAERUDR0n8dwpaycpUF44wvoaOP7mUJX6P8PvMNEgJswW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=gAfbB4MlAHyZU1D4qT9j%2BCWXy2w%3D"
                data-alt="https://www.prisma.io/typescript"
                ><img
                  src="https://blog.kakaocdn.net/dna/mwYKI/btsP1oJVcRT/AAAAAAAAAAAAAAAAAAAAAERUDR0n8dwpaycpUF44wvoaOP7mUJX6P8PvMNEgJswW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=gAfbB4MlAHyZU1D4qT9j%2BCWXy2w%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FmwYKI%2FbtsP1oJVcRT%2FAAAAAAAAAAAAAAAAAAAAAERUDR0n8dwpaycpUF44wvoaOP7mUJX6P8PvMNEgJswW%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DgAfbB4MlAHyZU1D4qT9j%252BCWXy2w%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="668"
                  height="231"
                  data-origin-width="668"
                  data-origin-height="231"
                  data-phocus-index="5"
              /></span>
              <figcaption>https://www.prisma.io/typescript</figcaption>
            </figure>
            <p></p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              그래서일까요? 많은 레퍼런스들에서도 Type-Safe하다고 언급하고,
              공식문서에서도 fully type-safe, zero-cost type-safe하다고
              명시되어있습니다. 이쪽 진영(?)의 ORM이 익숙하지 않으신 분들을 위해
              예시를 준비했습니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              비교 대상은<span>&nbsp;</span
              ><b><u>이름부터 엄청나게 type-safe할 것 같은 TypeORM</u></b
              >입니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">TypeORM vs Prisma</h3>
            <pre
              id="code_1755765290417"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">UserEntity</span> </span>{
<span class="hljs-meta" style="">@PrimaryGeneratedColumn</span>(<span class="hljs-string" style="">'increment'</span>)
id!: <span class="hljs-built_in" style="">number</span>;
<span class="hljs-meta" style="">@Column</span>()
name!: <span class="hljs-built_in" style="">string</span>;
}

<span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-title" style="">getName</span>(<span class="hljs-params" style="">id: <span class="hljs-built_in" style="">number</span></span>)</span> {
<span class="hljs-keyword" style="">const</span> user = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">this</span>.userRepostiory.findOne({
<span class="hljs-attr" style="">select</span>: [<span class="hljs-string" style="">'name'</span>],
<span class="hljs-attr" style="">where</span>: { id }
});
<span class="hljs-keyword" style="">return</span> user;
}</code></pre>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              코드를 통해 getName()의 리턴 타입이
              <b
                ><span style="background-color: #dddddd"
                  >Pick&lt;UserEntity, 'name'&gt;</span
                ></b
              >일 것으로 예상됩니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              하지만 TypeORM은 Entity 자체를 타입으로 추론합니다. 엉뚱하죠? 실제
              동작과 타입 추론이 어긋납니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              getName()에서 user를 할당한 후, user.id에 접근도 잘 됩니다. IDE도
              올바르게 추적해주고, 경고나 에러도 발생시키지 않죠.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1688"
              data-origin-height="562"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/p9M10/btsP1tR0UQJ/AAAAAAAAAAAAAAAAAAAAAHjXkyj8ct-igL2jGasSX6peYN9yRudUu3V-fYRT3sda/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=IIDcptqrFzithZrdXvjyTFj8%2Bo0%3D"
                data-phocus="https://blog.kakaocdn.net/dna/p9M10/btsP1tR0UQJ/AAAAAAAAAAAAAAAAAAAAAHjXkyj8ct-igL2jGasSX6peYN9yRudUu3V-fYRT3sda/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=IIDcptqrFzithZrdXvjyTFj8%2Bo0%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/p9M10/btsP1tR0UQJ/AAAAAAAAAAAAAAAAAAAAAHjXkyj8ct-igL2jGasSX6peYN9yRudUu3V-fYRT3sda/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=IIDcptqrFzithZrdXvjyTFj8%2Bo0%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fp9M10%2FbtsP1tR0UQJ%2FAAAAAAAAAAAAAAAAAAAAAHjXkyj8ct-igL2jGasSX6peYN9yRudUu3V-fYRT3sda%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DIIDcptqrFzithZrdXvjyTFj8%252Bo0%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1688"
                  height="562"
                  data-origin-width="1688"
                  data-origin-height="562"
                  data-phocus-index="6"
              /></span>
            </figure>
            <p></p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              물론, getName을 호출하는 함수의 리턴타입을 강제하는 방법도
              있습니다만, 우리는 그걸 원치 않습니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              물론, TypeORM을 사용하면서 전역으로 타입을 래핑하는 인터페이스를
              만들 수도 있습니다만, 우리는 그걸 원치 않습니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              오픈소스를 사용하는 이유는 다양하지만, 편리하고 다양한 기능을
              제공받아 사용하는 이유도 있으니까요. 결국 개발자가 직접 래핑해야
              하는 번거로움이 생기죠
              <s
                ><span style="color: #9d9d9d"
                  ><b>(귀찮아요 ㅡㅡ (?))</b></span
                ></s
              >
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              Prisma는 어떨까요?
            </p>
            <pre
              id="code_1755765290419"
              class="scala"
              data-ke-type="codeblock"
              data-ke-language="typescript"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">model <span class="hljs-type" style="">User</span> {
id   <span class="hljs-type" style="">Int</span>    <span class="hljs-meta" style="">@id</span> <span class="hljs-meta" style="">@default</span>(autoincrement())
name <span class="hljs-type" style="">String</span>
}

<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">PrismaService</span> <span class="hljs-keyword" style="">extends</span> <span class="hljs-title" style="">PrismaClient</span> </span>{
async getUserName(id: number) {
<span class="hljs-keyword" style="">return</span> await <span class="hljs-keyword" style="">this</span>.user.findFirst({
where: { id },
select: {
name: <span class="hljs-literal" style="">true</span>,
},
});
}
}</code></pre>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              Prisma에서 같은 쿼리를 실행시켜보면, 결과는 정확하게 select된
              프로퍼티들만 타입으로 추론합니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1124"
              data-origin-height="574"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/yzFIf/btsP1TXiufh/AAAAAAAAAAAAAAAAAAAAAPEs9wX3tMqGaqW3occXOha-oJOb1Gfe3UYqQioi3tdK/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=%2B3aehxp952RsjbHOYu9X49JC53w%3D"
                data-phocus="https://blog.kakaocdn.net/dna/yzFIf/btsP1TXiufh/AAAAAAAAAAAAAAAAAAAAAPEs9wX3tMqGaqW3occXOha-oJOb1Gfe3UYqQioi3tdK/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=%2B3aehxp952RsjbHOYu9X49JC53w%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/yzFIf/btsP1TXiufh/AAAAAAAAAAAAAAAAAAAAAPEs9wX3tMqGaqW3occXOha-oJOb1Gfe3UYqQioi3tdK/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=%2B3aehxp952RsjbHOYu9X49JC53w%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FyzFIf%2FbtsP1TXiufh%2FAAAAAAAAAAAAAAAAAAAAAPEs9wX3tMqGaqW3occXOha-oJOb1Gfe3UYqQioi3tdK%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252B3aehxp952RsjbHOYu9X49JC53w%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1124"
                  height="574"
                  data-origin-width="1124"
                  data-origin-height="574"
                  data-phocus-index="7"
              /></span>
            </figure>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1982"
              data-origin-height="648"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/ckeWGj/btsP1Xk5h3R/AAAAAAAAAAAAAAAAAAAAAJRyyaVMqNztf-KU4wD7oFHmJzFib7lk5mkpWkOsKJS7/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=M7ZSB7Uw0655jC4egMzKf9M9avo%3D"
                data-phocus="https://blog.kakaocdn.net/dna/ckeWGj/btsP1Xk5h3R/AAAAAAAAAAAAAAAAAAAAAJRyyaVMqNztf-KU4wD7oFHmJzFib7lk5mkpWkOsKJS7/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=M7ZSB7Uw0655jC4egMzKf9M9avo%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/ckeWGj/btsP1Xk5h3R/AAAAAAAAAAAAAAAAAAAAAJRyyaVMqNztf-KU4wD7oFHmJzFib7lk5mkpWkOsKJS7/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=M7ZSB7Uw0655jC4egMzKf9M9avo%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FckeWGj%2FbtsP1Xk5h3R%2FAAAAAAAAAAAAAAAAAAAAAJRyyaVMqNztf-KU4wD7oFHmJzFib7lk5mkpWkOsKJS7%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DM7ZSB7Uw0655jC4egMzKf9M9avo%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1982"
                  height="648"
                  data-origin-width="1982"
                  data-origin-height="648"
                  data-phocus-index="8"
              /></span>
            </figure>
            <p></p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <h3 style="color: #333333; text-align: start" data-ke-size="size23">
              TypeORM의 타입 추론
            </h3>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              간략한 이유는 다음과 같습니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="text-align: left" data-ke-size="size16">
              TypeORM은, 테이블 모델 설계 문서가 아닌 실제 클래스 형태로
              엔터티를 작성합니다. 그리고 Repository Interface 사용을 위해
              TypeORM의 Repository 클래스의 제네릭으로 엔터티 타입을 명시하여
              사용하죠. Repository의 각 인터페이스들은 이 Entity 제네릭 타입을
              받아서 타입 추론을 하도록 구성되어있습니다. 아래처럼요.
            </p>
            <pre
              id="code_1755765290421"
              class="scala"
              data-ke-type="codeblock"
              data-ke-language="typescript"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">const userRepository = <span class="hljs-keyword" style="">new</span> <span class="hljs-type" style="">Repository</span>&lt;<span class="hljs-type" style="">UserEntity</span>&gt;();

<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">Repository&lt;Entity</span> <span class="hljs-keyword" style="">extends</span> <span class="hljs-title" style="">ObjectLiteral&gt;</span> </span>{
findOne(options?: <span class="hljs-type" style="">FindOneOptions</span>&lt;<span class="hljs-type" style="">Entity</span>&gt;): <span class="hljs-type" style="">Promise</span>&lt;<span class="hljs-type" style="">Entity</span> | undefined&gt;;
}</code></pre>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              ORM에서 FindOptions의 select의 키인 keyof Entity로 타입 추론을
              해주지 않는 이상, 위에서 말한 것 처럼 개발자가 직접 타입 좁히기를
              통해 type-safe하게 만들어서 사용해야합니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <h3 style="color: #333333; text-align: start" data-ke-size="size23">
              Prisma의 타입 추론
            </h3>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              반면에 Prisma는 다르죠. Prisma는 스키마 기반 코드 생성 ORM입니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              런타임 전에 schema.prisma를 해석해서(prisma generate)
              @prisma/client를 만들어 둡니다. 그래서 쿼리 작성 시점부터 타입이
              이미 결정되어 있고, select/include에 따라 반환 타입이 정교하게
              내로잉됩니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              코드를 보면서 간략하게 타입을 만들어내는 파이프라인을
              요약해봤습니다.
            </p>
            <blockquote data-ke-style="style2">
              schema.prisma &gt; Rust/WASM 파서 &gt; DMMF JSON &gt; DMMF Helper
              클래스 &gt; TSClient 코드 생성 &gt; 파일 출력(@prisma/client로)
            </blockquote>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              각 과정들을 조금 더 자세히 보도록 하죠.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <h4 style="color: #333333; text-align: start" data-ke-size="size20">
              1. prisma generate
            </h4>
            <p data-ke-size="size16">
              npx prisma generate와 같은 명령어를 사용해보셨을거에요. Prisma의
              타입 생성은 이 명령어로 시작됩니다.
            </p>
            <p data-ke-size="size16">
              이 명령은 CLI 내부의 Generate.ts에서 실행 흐름이 잡히고, 이후 각
              generator을 초기화하고 실행시킵니다.
            </p>
            <pre
              id="code_1755782836331"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// packages/cli/src/Generate.ts</span>
<span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">Generate</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">Command</span> </span>{
<span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-title" style="">execute</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-comment" style="">// generator 등록 및 실행 흐름 담당</span>
}
}</code></pre>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              이 때,
              <a
                href="https://github.com/prisma/prisma/blob/4c2b06f3/packages/internals/src/get-generators/getGenerators.ts"
                target="_blank"
                rel="noopener"
                >getGenerators</a
              >
              함수가 팩토리 역할을 수행하고, schema.prisma의 generator client {
              ... } 설정을 읽고 @prisma/client 생성기를 찾아 초기화합니다.
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <p style="color: #333333; text-align: start" data-ke-size="size16">
              &nbsp;
            </p>
            <h4 style="color: #333333; text-align: start" data-ke-size="size20">
              2. Schema 파싱 및 가공
            </h4>
            <p data-ke-size="size16">
              schema.prisma를 중간 포맷인 DMMF(Data Model Meta Format)으로
              파싱합니다.
            </p>
            <p data-ke-size="size16">
              이 과정은 Rust로 구현된 프리즈마 엔진의 파서를 WASM(WebAssembly)로
              컴파일해서 NodeJS에서 실행합니다.
            </p>
            <pre
              id="code_1755783024394"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// packages/client/src/getDmmf.ts</span>
<span class="hljs-keyword" style="">const</span> dmmf = <span class="hljs-keyword" style="">await</span> wasm.getDMMF({ <span class="hljs-attr" style="">datamodel</span>: schema })</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <a
                href="https://github.com/prisma/prisma-engines/blob/main/prisma-schema-wasm/src/lib.rs"
                target="_blank"
                rel="noopener"
                >직접 wasm이 구현되어 있는 Rust코드</a
              >를 당장에는 이해할 수 없어, 축약하자면 getDMMF를 통해 스키마가
              해석되고, 결과는
              <span style="color: #ee2323">JSON 형태의 DMMF</span>로 변환됩니다.
              이 JSON형태 위에 모델, 필드, 연관 관계등을 쉽게 탐색할 수 있도록
              DMMF 클래스로 래핑되고, 모델/타입/연산을 빠르게 조회할 수 있는
              Map이 만들어집니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h4 data-ke-size="size20">3. TypeScript 코드 생성(PrismaClient)</h4>
            <p data-ke-size="size16">
              이 과정 후에, PrismaClientTsGenerator에 의해 Prisma Client 코드를
              생성하는데요.
            </p>
            <pre
              id="code_1755784018283"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">TSClient</span> </span>{
<span class="hljs-keyword" style="">protected</span> <span class="hljs-keyword" style="">readonly</span> dmmf: DMMFHelper
<span class="hljs-keyword" style="">protected</span> <span class="hljs-keyword" style="">readonly</span> genericsInfo: GenericArgsInfo

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">protected</span> <span class="hljs-keyword" style="">readonly</span> options: TSClientOptions</span>)</span> {
<span class="hljs-built_in" style="">this</span>.dmmf = <span class="hljs-keyword" style="">new</span> DMMFHelper(options.dmmf)
<span class="hljs-built_in" style="">this</span>.genericsInfo = <span class="hljs-keyword" style="">new</span> GenericArgsInfo(<span class="hljs-built_in" style="">this</span>.dmmf)
}

generateClientFiles(): FileMap {
<span class="hljs-keyword" style="">const</span> context = <span class="hljs-keyword" style="">new</span> GenerateContext({
<span class="hljs-attr" style="">dmmf</span>: <span class="hljs-built_in" style="">this</span>.dmmf,
<span class="hljs-attr" style="">genericArgsInfo</span>: <span class="hljs-built_in" style="">this</span>.genericsInfo,
<span class="hljs-attr" style="">runtimeImport</span>: <span class="hljs-string" style="">`<span class="hljs-subst" style="">${<span class="hljs-built_in" style="">this</span>.options.runtimeBase}</span>/<span class="hljs-subst" style="">${<span class="hljs-built_in" style="">this</span>.options.runtimeName}</span>`</span>,
<span class="hljs-attr" style="">outputFileName</span>: generatedFileNameMapper(<span class="hljs-built_in" style="">this</span>.options.generatedFileExtension),
<span class="hljs-attr" style="">importFileName</span>: importFileNameMapper(<span class="hljs-built_in" style="">this</span>.options.importFileExtension),
<span class="hljs-attr" style="">generator</span>: <span class="hljs-built_in" style="">this</span>.options.generator,
})

<span class="hljs-keyword" style="">const</span> modelNames = <span class="hljs-built_in" style="">Object</span>.values(context.dmmf.typeAndModelMap)
.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">model</span>) =&gt;</span> context.dmmf.outputTypeMap.model[model.name])
.map(<span class="hljs-function" style="">(<span class="hljs-params" style="">model</span>) =&gt;</span> model.name)

<span class="hljs-keyword" style="">const</span> modelsFileMap: FileMap = modelNames.reduce(<span class="hljs-function" style="">(<span class="hljs-params" style="">acc, modelName</span>) =&gt;</span> {
acc[context.outputFileName(modelName)] = createModelFile(context, modelName)
<span class="hljs-keyword" style="">return</span> acc
}, {})

<span class="hljs-keyword" style="">return</span> {
[context.outputFileName(<span class="hljs-string" style="">'client'</span>)]: createClientFile(context, <span class="hljs-built_in" style="">this</span>.options),
[context.outputFileName(<span class="hljs-string" style="">'enums'</span>)]: createEnumsFile(context),
[context.outputFileName(<span class="hljs-string" style="">'commonInputTypes'</span>)]: createCommonInputTypeFiles(context),
[context.outputFileName(<span class="hljs-string" style="">'models'</span>)]: createModelsFile(context, modelNames),
<span class="hljs-attr" style="">models</span>: modelsFileMap,
<span class="hljs-attr" style="">internal</span>: {
[context.outputFileName(<span class="hljs-string" style="">'prismaNamespace'</span>)]: createPrismaNamespaceFile(context, <span class="hljs-built_in" style="">this</span>.options),
[context.outputFileName(<span class="hljs-string" style="">'class'</span>)]: createClassFile(context, <span class="hljs-built_in" style="">this</span>.options),
},
}
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              위에서 열심히 만든 JSON 래핑 클래스인 DMMFHelper을 토대로
              PrismaClient를 생성합니다. 모델별 CRUD 메서드와 쿼리 옵션, 타입
              시그니처들이 생성되게 되죠. 생성되는 대표 파일 구성은 대략 다음과
              같습니다.
            </p>
            <ul
              style="list-style-type: disc"
              data-end="1346"
              data-start="898"
              data-ke-list-type="disc"
            >
              <li data-end="987" data-start="898">
                client: class PrismaClient { user: UserDelegate; ... } 및 각
                모델 delegate 메서드 시그니처
              </li>
              <li data-end="1031" data-start="988">
                models/*, models.ts: 모델 단위 타입 조각들
              </li>
              <li data-end="1073" data-start="1032">
                enums.ts: 스키마 enum → TS enum/type
              </li>
              <li data-end="1167" data-start="1074">
                commonInputTypes.ts: WhereInput, OrderBy,
                ScalarWhereWithAggregates 같은 공용 인풋 타입
              </li>
              <li data-end="1268" data-start="1168">
                internal/prismaNamespace.ts: Prisma.UserGetPayload&lt;S&gt;,
                Prisma.UserSelect 등 타입 네임스페이스
              </li>
              <li data-end="1346" data-start="1269">
                런타임 번들 참조: 환경별(node, edge, react-native, wasm) 런타임
                import 경로 세팅
              </li>
            </ul>
            <p data-end="1437" data-start="1348" data-ke-size="size16">
              &nbsp;
            </p>
            <p data-end="1437" data-start="1348" data-ke-size="size16">
              &nbsp;
            </p>
            <h3 data-end="1437" data-start="1348" data-ke-size="size23">
              그래서 왜 Prisma는 type-safe한데?
            </h3>
            <p data-ke-size="size16">
              간략히 살펴본 generate 파이프라인의 결과물이 미리 계산된 타입
              정의인데요.
            </p>
            <p data-ke-size="size16">
              이 타입 안에는 Model, Output, Payload라는 개념이 녹아있습니다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                Model: 스키마의 row에 대한 기본 스칼라가 typescript 인터페이스로
                정의된 타입.
              </li>
              <li>
                Output: 집계/그룹핑 처럼 형태가 확정적인 연산 결과는
                AggregateUser, UserGroupByOutputType같은 명시적 Output 타입으로
                노출돼요. row 관점의 원형 출력은 별도 파일/타입명으로
                고정되어있지 않고 아래 Payload가 그 역할을 수행합니다.
              </li>
              <li>
                Payload: 기본 정의된 Payload를 기반으로 제네릭 타입이 들어오면,
                조건부/매핑 유틸리티 타입이 이를 해석해서 Payload를 즉석해서
                추론합니다.
              </li>
            </ul>
            <pre
              id="code_1755787058275"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">type</span> $UserPayload&lt;ExtArgs = $Extensions.DefaultArgs&gt; = {
<span class="hljs-attr" style="">name</span>: <span class="hljs-string" style="">'User'</span>;
objects: {};                      <span class="hljs-comment" style="">// 관계(객체) 필드</span>
scalars: { <span class="hljs-attr" style="">id</span>: <span class="hljs-built_in" style="">number</span>; name: <span class="hljs-built_in" style="">string</span> };  <span class="hljs-comment" style="">// 스칼라 필드</span>
composites: {};
}

<span class="hljs-keyword" style="">type</span> UserGetPayload&lt;S <span class="hljs-keyword" style="">extends</span> <span class="hljs-built_in" style="">boolean</span> | <span class="hljs-literal" style="">null</span> | <span class="hljs-literal" style="">undefined</span> | UserDefaultArgs&gt; =
$Result.GetResult&lt;Prisma.$UserPayload, S&gt;;</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              다시 돌아와서, 위의 쿼리를 다시 살펴볼까요?
            </p>
            <pre
              id="code_1755787099446"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">const</span> user = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">this</span>.user.findFirst({
<span class="hljs-attr" style="">where</span>: { id },
<span class="hljs-attr" style="">select</span>: {
<span class="hljs-attr" style="">name</span>: <span class="hljs-literal" style="">true</span>,
},
});

&gt;&gt;

findFirst&lt;T <span class="hljs-keyword" style="">extends</span> UserFindFirstArgs&gt;(
args?: SelectSubset&lt;T, UserFindFirstArgs&lt;ExtArgs&gt;&gt;,
): Prisma__UserClient&lt;
$Result.GetResult&lt;
Prisma.$UserPayload&lt;ExtArgs&gt;,  <span class="hljs-comment" style="">// 모델 전체의 스칼라 정의</span>
T,                             <span class="hljs-comment" style="">// args의 타입 ( { select: { name: true }}</span>
<span class="hljs-string" style="">'findFirst'</span>,
GlobalOmitOptions
&gt; | <span class="hljs-literal" style="">null</span>,
<span class="hljs-literal" style="">null</span>,
ExtArgs,
GlobalOmitOptions
&gt;;</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              여기서 일어나는 타입 계산을 단계별로 풀어보면
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                T 캡처: args 타입인 ({ select: { name: ture } })가 그대로 T로
                캡처됩니다.
              </li>
              <li>
                유효성 검사: SelectSubset에 의해 허용되는 옵션만 통과시키도록
                컴파일 타임에 필터링돼요.
              </li>
              <li>
                반환 타입 계산: 내부의 $Result.GetResult가 $UserPayload에서
                T.select를 읽어 name만 뽑아 { name: string } 객체를 만듭니다.
                findFirst 특성상 결과가 없을 수 있기 때문에 | null이 붙게 돼요.
              </li>
            </ul>
            <p data-ke-size="size16">
              결과적으로, user.id에 접근하면 IDE에서 바로 타입 에러가 발생하는
              메시지가 보이게 되는거죠.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">정리</h3>
            <p data-ke-size="size16">
              사실 한 번에 뜯어보고 이해를 온전히 할 수 없었어요.
            </p>
            <p data-ke-size="size16">
              제가 많은 오픈소스를 보지는 않았지만, TS기반의 오픈소스 중 가장
              해석하기 힘들었습니다. 하지만 이런 파이프라인을 통해 왜
              type-safe하다는 건지 어느정도 실마리를 잡은 것 같아요. 다음엔,
              이렇게 Prisma를 뜯어보게 된 원인이 되었던 Prisma 6.14.0 업데이트의
              브레이킹 체인지를 해결하기 위한 기여를 했던 경험을
              공유해보겠습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">모자란 글이지만 읽어주셔서 감사합니다.</p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_0894y6"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_3_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_3"
                    name="aswift_3"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=1738863885&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571418&amp;bpp=1&amp;bdt=85&amp;idt=153&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=4&amp;uci=a!4&amp;fsb=1&amp;dtd=156"
                    data-google-container-id="a!4"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CIm07pbqoI8DFU5DwgUd4PUXiQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 581,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-581"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F46LWx%2FbtsP0fAjksL%2FAAAAAAAAAAAAAAAAAAAAACmOLp61oJ9cqC7a39gGePTGkAx420PEletbUORPNwaa%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNoTo8%252F4Cu8%252FZjPCyyy%252BZm121MYk%253D"
                  data-title="Prisma는 왜 Type-Safe할까?"
                  data-description="TypeORM을 쓰던 개발자분들은 거의 대부분 Prisma 쓰세요!!! 라고 하더군요.제가 눈팅하는 Node, Nest관련 커뮤니티들에서도 TypeORM은 기피하고 Prisma를 권장하는 분위기인 것을 종종 느꼈습니다. (굉장히 주관적임) 이 주장의 근간에는 Type-Safe한 ORM인것이 메인일 것 같습니다. (물론 다른 장점들도 많을 것 같은데 차차 파헤쳐보죠) 이번에 오픈소스 기여를 통해 처음으로 Prisma 코드를 약간 파보았습니다.TypeORM만 쓰고 거의 겉핥기식으로 사용했었는데, 이번 기회에 제대로 Prisma에 입문해보려고 합니다. PrismaPrisma는 스키마 기반 코드 생성형 ORM입니다. schema.prisma를 바탕으로 런타임 이전에 Prisma Client를 생성해야합니다.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/581"
                  data-relative-pc-url="/581"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="581"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="581"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a href="/tag/Prisma">Prisma</a>,
          <a href="/tag/Prisma%20type-safe">Prisma type-safe</a>,
          <a href="/tag/prisma%20type-safe%20%EC%9B%90%EB%A6%AC"
            >prisma type-safe 원리</a
          >, <a href="/tag/prisma/client">prisma/client</a>,
          <a
            href="/tag/%ED%94%84%EB%A6%AC%EC%A6%88%EB%A7%88%20%EB%8F%99%EC%9E%91%20%EC%9B%90%EB%A6%AC"
            >프리즈마 동작 원리</a
          >,
          <a
            href="/tag/%ED%94%84%EB%A6%AC%EC%A6%88%EB%A7%88%20%ED%83%80%EC%9E%85%20%EC%B6%94%EB%A1%A0"
            >프리즈마 타입 추론</a
          >
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry581Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://redsun.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >방금이요꽝꽝</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.22 10:54
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=581&amp;commentId=27275679"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">왔다간 흔적 남깁니다~</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_581"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(581, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/581"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 581); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[581] = true;
          findFragmentAndHighlight(581);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fdm9WWW%2FbtsPXW8VfYl%2FAAAAAAAAAAAAAAAAAAAAADdCFtk_MxHfefRd5ShFguDvqVLTM2SE8ipJF5ISwro3%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvEybL%252Fpr1aiCUtkNYtdDls6DQ9E%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            바이브 코딩으로 티스토리 커스텀 스킨 만들기 (Feat. Claude code)
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">잡</span>

            <span class="post-hero-date">2025. 8. 20. 22:09</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/579?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(579); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_9ZBcSW"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_4_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_4"
                    name="aswift_4"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=1702268755&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=157&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=5&amp;uci=a!5&amp;fsb=1&amp;dtd=159"
                    data-google-container-id="a!5"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="COSq7pbqoI8DFd1WwgUdP4M5Og"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              클로드 코드 지분율 99%의 티스토리 커스텀 스킨을 만들었습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              기술 블로그를 3년 가까이 운영하면서, 언젠가는 개인 스킨을
              만들어야지했는데 반쪽 짜리(Powered By Claude Code ;;) 개인 스킨을
              완성했습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              디자인은 포스팅 시점부터 제 블로그에 이미 적용되어있는 상태이니
              둘러보시고 마음에 드신다면 아래 레포의 가이드를 따라 사용해주시면
              되겠습니다. 비개발자분들도 접속하셔서 코드를 ZIP으로 다운로드만
              받아서 티스토리에 등록만 하면 사용이 가능합니다. 사용에 어려움이
              있으신 분은 댓글 남겨주시면 답변 드리겠습니다.
            </p>
            <figure
              id="og_1755695037507"
              contenteditable="false"
              data-ke-type="opengraph"
              data-ke-align="alignCenter"
              data-og-type="object"
              data-og-title="GitHub - mag123c/tistory-mag1c-skin"
              data-og-description="Contribute to mag123c/tistory-mag1c-skin development by creating an account on GitHub."
              data-og-host="github.com"
              data-og-source-url="https://github.com/mag123c/tistory-mag1c-skin"
              data-og-url="https://github.com/mag123c/tistory-mag1c-skin"
              data-og-image="https://blog.kakaocdn.net/dna/dPCTW7/hyZDcZOQmP/AAAAAAAAAAAAAAAAAAAAAEIf5D9IeKj2dtyQGP1mtwq6APnQJSKVVKm4vi0GXAxz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=3Eh7CaEywVhbGcrv8dPS2YBCbwk%3D"
            >
              <a
                href="https://github.com/mag123c/tistory-mag1c-skin"
                target="_blank"
                rel="noopener"
                data-source-url="https://github.com/mag123c/tistory-mag1c-skin"
              >
                <div
                  class="og-image"
                  style="
                    background-image: url('https://blog.kakaocdn.net/dna/dPCTW7/hyZDcZOQmP/AAAAAAAAAAAAAAAAAAAAAEIf5D9IeKj2dtyQGP1mtwq6APnQJSKVVKm4vi0GXAxz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=3Eh7CaEywVhbGcrv8dPS2YBCbwk%3D');
                  "
                >
                  &nbsp;
                </div>
                <div class="og-text">
                  <p class="og-title" data-ke-size="size16">
                    GitHub - mag123c/tistory-mag1c-skin
                  </p>
                  <p class="og-desc" data-ke-size="size16">
                    Contribute to mag123c/tistory-mag1c-skin development by
                    creating an account on GitHub.
                  </p>
                  <p class="og-host" data-ke-size="size16">github.com</p>
                </div>
              </a>
            </figure>
            <p data-ke-size="size16">
              <br />제 입맛에 맞게 만들어서, 디자인도 심플하고 부가 기능도 별로
              없지만, 많은 사용자가 사용할 만큼 좋은 퀄리티도 아니지만, 적당히
              많이 사용해주셨으면 좋겠습니다 ㅋㅋㅋ
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              저도 실사용 유저로서 사용성에 문제가 있는 것들을 최우선으로
              작업하면서 더 나은 방향으로 개선해보겠습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">
              <b
                ><span style="color: #9d9d9d"
                  ><s
                    >여담이지만, 스킨 테스트를 한다고 빈 계정을 만들어서 글을 막
                    올리면서 테스트하고있었는데, 30명이나 방문하더라구요..
                    뭐지?</s
                  ></span
                ></b
              >
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="3680"
              data-origin-height="2382"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/CT1Sc/btsP0tRYEW8/AAAAAAAAAAAAAAAAAAAAALvYBCdjp1223U5iIJLjzi8n3tkGFzOXCIARWRV_Wdiu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8KZqSCw79ovy8IxhQeAprwLwxkI%3D"
                data-phocus="https://blog.kakaocdn.net/dna/CT1Sc/btsP0tRYEW8/AAAAAAAAAAAAAAAAAAAAALvYBCdjp1223U5iIJLjzi8n3tkGFzOXCIARWRV_Wdiu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8KZqSCw79ovy8IxhQeAprwLwxkI%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/CT1Sc/btsP0tRYEW8/AAAAAAAAAAAAAAAAAAAAALvYBCdjp1223U5iIJLjzi8n3tkGFzOXCIARWRV_Wdiu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8KZqSCw79ovy8IxhQeAprwLwxkI%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FCT1Sc%2FbtsP0tRYEW8%2FAAAAAAAAAAAAAAAAAAAAALvYBCdjp1223U5iIJLjzi8n3tkGFzOXCIARWRV_Wdiu%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8KZqSCw79ovy8IxhQeAprwLwxkI%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="574"
                  height="372"
                  data-origin-width="3680"
                  data-origin-height="2382"
                  data-phocus-index="9"
              /></span>
            </figure>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1830"
              data-origin-height="946"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/boaCJW/btsPZ5w12ML/AAAAAAAAAAAAAAAAAAAAAE_A3kB6GLddmtrgHY6JsfV8MMqQOImCXmnIxn4LcQH_/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=vLDzxoiKIPj8nn6S%2FKI24c%2Fvk00%3D"
                data-phocus="https://blog.kakaocdn.net/dna/boaCJW/btsPZ5w12ML/AAAAAAAAAAAAAAAAAAAAAE_A3kB6GLddmtrgHY6JsfV8MMqQOImCXmnIxn4LcQH_/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=vLDzxoiKIPj8nn6S%2FKI24c%2Fvk00%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/boaCJW/btsPZ5w12ML/AAAAAAAAAAAAAAAAAAAAAE_A3kB6GLddmtrgHY6JsfV8MMqQOImCXmnIxn4LcQH_/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=vLDzxoiKIPj8nn6S%2FKI24c%2Fvk00%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FboaCJW%2FbtsPZ5w12ML%2FAAAAAAAAAAAAAAAAAAAAAE_A3kB6GLddmtrgHY6JsfV8MMqQOImCXmnIxn4LcQH_%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvLDzxoiKIPj8nn6S%252FKI24c%252Fvk00%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="528"
                  height="273"
                  data-origin-width="1830"
                  data-origin-height="946"
                  data-phocus-index="10"
              /></span>
            </figure>
            <p></p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_EKxfbg"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_5_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_5"
                    name="aswift_5"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=2347115136&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=163&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=6&amp;uci=a!6&amp;fsb=1&amp;dtd=165"
                    data-google-container-id="a!6"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="COGY75bqoI8DFU5ZwgUdxSQz7A"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 579,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-579"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fdm9WWW%2FbtsPXW8VfYl%2FAAAAAAAAAAAAAAAAAAAAADdCFtk_MxHfefRd5ShFguDvqVLTM2SE8ipJF5ISwro3%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvEybL%252Fpr1aiCUtkNYtdDls6DQ9E%253D"
                  data-title="바이브 코딩으로 티스토리 커스텀 스킨 만들기 (Feat. Claude code)"
                  data-description="클로드 코드 지분율 99%의 티스토리 커스텀 스킨을 만들었습니다. 기술 블로그를 3년 가까이 운영하면서, 언젠가는 개인 스킨을 만들어야지했는데 반쪽 짜리(Powered By Claude Code ;;) 개인 스킨을 완성했습니다. 디자인은 포스팅 시점부터 제 블로그에 이미 적용되어있는 상태이니 둘러보시고 마음에 드신다면 아래 레포의 가이드를 따라 사용해주시면 되겠습니다. 비개발자분들도 접속하셔서 코드를 ZIP으로 다운로드만 받아서 티스토리에 등록만 하면 사용이 가능합니다. 사용에 어려움이 있으신 분은 댓글 남겨주시면 답변 드리겠습니다. GitHub - mag123c/tistory-mag1c-skinContribute to mag123c/tistory-mag1c-skin development by creat.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/579"
                  data-relative-pc-url="/579"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="579"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="579"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a href="/tag/AI%20%ED%99%9C%EC%9A%A9">AI 활용</a>,
          <a href="/tag/claude%20code">claude code</a>,
          <a href="/tag/%EB%B0%94%EC%9D%B4%EB%B8%8C%20%EC%BD%94%EB%94%A9"
            >바이브 코딩</a
          >, <a href="/tag/%ED%81%B4%EB%A1%9C%EB%93%9C">클로드</a>,
          <a href="/tag/%ED%81%B4%EB%A1%9C%EB%93%9C%20%EC%BD%94%EB%93%9C"
            >클로드 코드</a
          >,
          <a
            href="/tag/%ED%8B%B0%EC%8A%A4%ED%86%A0%EB%A6%AC%20%EC%8A%A4%ED%82%A8%20%EB%A7%8C%EB%93%A4%EA%B8%B0"
            >티스토리 스킨 만들기</a
          >,
          <a
            href="/tag/%ED%8B%B0%EC%8A%A4%ED%86%A0%EB%A6%AC%20%EC%8A%A4%ED%82%A8%20%EC%A0%9C%EC%9E%91"
            >티스토리 스킨 제작</a
          >,
          <a
            href="/tag/%ED%8B%B0%EC%8A%A4%ED%86%A0%EB%A6%AC%20%EC%BB%A4%EC%8A%A4%ED%85%80%20%EC%8A%A4%ED%82%A8"
            >티스토리 커스텀 스킨</a
          >
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry579Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list"></div>

            <form
              method="post"
              action="/comment/add/579"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 579); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[579] = true;
          findFragmentAndHighlight(579);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            [Rate Limit - 3] Fixed Window Counter, Sliding Window Logging,
            Sliding Window Counter 알고리즘
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">카테고리 없음</span>

            <span class="post-hero-date">2025. 8. 11. 18:00</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/578?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(578); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_ds6Uis"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_6_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_6"
                    name="aswift_6"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=1378207236&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=168&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=7&amp;uci=a!7&amp;fsb=1&amp;dtd=170"
                    data-google-container-id="a!7"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="COuL75bqoI8DFTlNwgUdfc8BMg"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p style="text-align: center" data-ke-size="size16">[목차]</p>
            <p style="text-align: center" data-ke-size="size16">
              <span style="color: #9d9d9d"
                ><u
                  ><a
                    style="color: #9d9d9d"
                    href="https://mag1c.tistory.com/576"
                    >1. Rate Limit이란? 설계 시 주의사항</a
                  ></u
                ></span
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <a
                href="https://mag1c.tistory.com/577"
                target="_blank"
                rel="noopener"
                ><span style="color: #9d9d9d"
                  ><u>2. Token Bucket, Leaky Bucket 알고리즘</u></span
                ></a
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <u
                ><span style="color: #009a87"
                  >3. Fixed Window, Sliding Window Logging, Sliding Window
                  Counter 알고리즘</span
                ></u
              >
            </p>
            <p data-end="669" data-start="632" data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              지난 포스팅에선, <b>Bucket 방식</b>의 Token Bucket, Leaky Bucket
              알고리즘을 살펴보고, 직접 구현과 테스트를 진행했다.
            </p>
            <p data-ke-size="size16">
              이번 글에선 <b>Window 방식</b>의 알고리즘인
              <b
                >Fixed Window Counter, Sliding Window Logging, Sliding Window
                Counter</b
              >을 다룬다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              모든 예제 코드는 아래 Github에서 확인할 수 있다.
            </p>
            <figure
              id="og_1754744502099"
              contenteditable="false"
              data-ke-type="opengraph"
              data-ke-align="alignCenter"
              data-og-type="object"
              data-og-title="GitHub - mag123c/rate-limiter"
              data-og-description="Contribute to mag123c/rate-limiter development by creating an account on GitHub."
              data-og-host="github.com"
              data-og-source-url="https://github.com/mag123c/rate-limiter"
              data-og-url="https://github.com/mag123c/rate-limiter"
              data-og-image="https://blog.kakaocdn.net/dna/gap4I/hyZuywnFbf/AAAAAAAAAAAAAAAAAAAAAO9OMOgES8Qly_I5oEfDwGL0XgPOLMPf5QCJxecJyWaF/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=bUsO65GWYOJRbBRMcDXxFuPKL7c%3D"
            >
              <a
                href="https://github.com/mag123c/rate-limiter"
                target="_blank"
                rel="noopener"
                data-source-url="https://github.com/mag123c/rate-limiter"
              >
                <div
                  class="og-image"
                  style="
                    background-image: url('https://blog.kakaocdn.net/dna/gap4I/hyZuywnFbf/AAAAAAAAAAAAAAAAAAAAAO9OMOgES8Qly_I5oEfDwGL0XgPOLMPf5QCJxecJyWaF/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=bUsO65GWYOJRbBRMcDXxFuPKL7c%3D');
                  "
                >
                  &nbsp;
                </div>
                <div class="og-text">
                  <p class="og-title" data-ke-size="size16">
                    GitHub - mag123c/rate-limiter
                  </p>
                  <p class="og-desc" data-ke-size="size16">
                    Contribute to mag123c/rate-limiter development by creating
                    an account on GitHub.
                  </p>
                  <p class="og-host" data-ke-size="size16">github.com</p>
                </div>
              </a>
            </figure>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Fixed Window Counter</h2>
            <p data-ke-size="size16">
              Fixed Window는 일정한 간격의 윈도우로 구간을 나누고, 각 구간마다
              카운터를 붙인다. 예를 들어, 1초마다 윈도우를 나누고 임계치를 3으로
              설정하면, 요청이 들어올 때마다 카운터를 증가시키고, 임계치를
              초과하면 요청을 거부한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1104"
              data-origin-height="1004"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/nGocc/btsPL2HK8SH/AAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XzQLxPq7chHhm2voP29vm69Vl4E%3D"
                data-phocus="https://blog.kakaocdn.net/dna/nGocc/btsPL2HK8SH/AAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XzQLxPq7chHhm2voP29vm69Vl4E%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/nGocc/btsPL2HK8SH/AAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XzQLxPq7chHhm2voP29vm69Vl4E%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="547"
                  height="497"
                  data-origin-width="1104"
                  data-origin-height="1004"
                  data-phocus-index="11"
              /></span>
            </figure>
            <p></p>
            <p data-end="875" data-start="869" data-ke-size="size16">&nbsp;</p>
            <p data-end="875" data-start="869" data-ke-size="size16">&nbsp;</p>
            <h3 data-end="875" data-start="869" data-ke-size="size23">장점</h3>
            <ul
              style="list-style-type: disc"
              data-end="973"
              data-start="876"
              data-ke-list-type="disc"
            >
              <li data-end="908" data-start="876">
                구현이 단순하다. (윈도우 시작 시간과 카운터만 관리)
              </li>
              <li data-end="928" data-start="909">
                메모리 사용이 매우 효율적이다.
              </li>
              <li data-end="973" data-start="929">
                “1초에 3번”, “1분에 100번” 같은 정책을 직관적으로 표현 가능하다.
              </li>
            </ul>
            <h3 data-end="981" data-start="975" data-ke-size="size23">단점</h3>
            <ul
              style="list-style-type: disc"
              data-end="1163"
              data-start="982"
              data-ke-list-type="disc"
            >
              <li data-end="1084" data-start="982">
                경계 구간에서 버스트가 발생할 수 있다.<br />예: 1분에 100회
                제한인데 00:59에 100회, 01:00에 100회 요청이 오면 2초 동안 200회
                처리가 필요하다.
              </li>
              <li data-end="1163" data-start="1085">
                짧은 시간 내 몰리는 트래픽을 균등하게 제어할 수 없다.<br />예:
                같은 윈도우 안에서 동시에 100회 요청이 들어오면 모두 허용된다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">만들어보기</h3>
            <pre
              id="code_1754746087554"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">type</span> FixedWindowClearConfig = {
<span class="hljs-attr" style="">callCount</span>: <span class="hljs-built_in" style="">number</span>;
maxCount: <span class="hljs-built_in" style="">number</span>;
};

<span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> FixedWindowConfig {
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 내 허용되는 최대 요청 수</span>
windowSizeMs: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 크기 (밀리초)</span>
clearConfig?: FixedWindowClearConfig;
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              위의 설명처럼 구현이 단순하다. 윈도우 설정에는 임계치와 윈도우
              크기를 지정한다.
            </p>
            <p data-ke-size="size16">
              clearConfig는 카운팅을 통해 LRU 방식으로 데이터를 삭제하려고
              만들어봤다. (Redis의 TTL처럼 구현할 계획이다.)
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754746324281"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">type</span> FixedWindow = {
<span class="hljs-attr" style="">counter</span>: <span class="hljs-built_in" style="">number</span>;
windowStart: <span class="hljs-built_in" style="">number</span>;
};</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              윈도우는, 특정 요청 주체의 counter와 마지막 요청 시간을 기록한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754746237113"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">FixedWindowRateLimiter</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">RateLimiter</span> </span>{
<span class="hljs-keyword" style="">private</span> windows: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, FixedWindow&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> config: FixedWindowConfig</span>)</span> {}

tryConsume(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">if</span> (
<span class="hljs-built_in" style="">this</span>.config.clearConfig?.callCount &amp;&amp;
<span class="hljs-built_in" style="">this</span>.config.clearConfig?.maxCount &amp;&amp;
<span class="hljs-built_in" style="">this</span>.config.clearConfig.callCount &gt;= <span class="hljs-built_in" style="">this</span>.config.clearConfig.maxCount
) {
<span class="hljs-built_in" style="">this</span>.cleanupExpiredWindows();
<span class="hljs-built_in" style="">this</span>.config.clearConfig.callCount++;
}

<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">this</span>.canConsumeRequest(key)) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Rate Limit Exceeded for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}
<span class="hljs-built_in" style="">this</span>.increaseCounter(key);
}

<span class="hljs-keyword" style="">private</span> canConsumeRequest(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">boolean</span> {
<span class="hljs-keyword" style="">let</span> <span class="hljs-built_in" style="">window</span> = <span class="hljs-built_in" style="">this</span>.windows.get(key);
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">window</span>) {
<span class="hljs-built_in" style="">window</span> = <span class="hljs-built_in" style="">this</span>.createWindow(key);
}
<span class="hljs-built_in" style="">this</span>.initializeCounter(<span class="hljs-built_in" style="">window</span>);
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">window</span>.counter &lt; <span class="hljs-built_in" style="">this</span>.config.threshold;
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">increaseCounter</span>(<span class="hljs-params" style="">key: <span class="hljs-built_in" style="">string</span></span>)</span> {
<span class="hljs-keyword" style="">const</span> <span class="hljs-built_in" style="">window</span> = <span class="hljs-built_in" style="">this</span>.windows.get(key);
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">window</span>) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Window not found for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}
<span class="hljs-built_in" style="">window</span>.counter++;
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">initializeCounter</span>(<span class="hljs-params" style=""><span class="hljs-built_in" style="">window</span>: FixedWindow</span>)</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">if</span> (now - <span class="hljs-built_in" style="">window</span>.windowStart &gt;= <span class="hljs-built_in" style="">this</span>.config.windowSizeMs) {
<span class="hljs-built_in" style="">window</span>.counter = <span class="hljs-number" style="">0</span>;
<span class="hljs-built_in" style="">window</span>.windowStart = now;
}
}

<span class="hljs-keyword" style="">private</span> createWindow(key: <span class="hljs-built_in" style="">string</span>): FixedWindow {
<span class="hljs-keyword" style="">const</span> <span class="hljs-built_in" style="">window</span>: FixedWindow = {
<span class="hljs-attr" style="">counter</span>: <span class="hljs-number" style="">0</span>,
<span class="hljs-attr" style="">windowStart</span>: <span class="hljs-built_in" style="">Date</span>.now(),
};
<span class="hljs-built_in" style="">this</span>.windows.set(key, <span class="hljs-built_in" style="">window</span>);
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">window</span>;
}

<span class="hljs-comment" style="">// TTL 기반 삭제</span>
<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">cleanupExpiredWindows</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">const</span> ttl = <span class="hljs-built_in" style="">this</span>.config.windowSizeMs * <span class="hljs-number" style="">10</span>;

<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">const</span> [key, <span class="hljs-built_in" style="">window</span>] <span class="hljs-keyword" style="">of</span> <span class="hljs-built_in" style="">this</span>.windows.entries()) {
<span class="hljs-keyword" style="">if</span> (now - <span class="hljs-built_in" style="">window</span>.windowStart &gt;= ttl) {
<span class="hljs-built_in" style="">this</span>.windows.delete(key);
}
}
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">구현 또한 매우 단순하다.</p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                요청이 들어올 때 마다 카운터를 초기화해야한다면 초기화한다.
                그렇지 않다면 유지한다
              </li>
              <li>
                카운터 설정에 설정된 임계치를 카운터가 초과했다면 429를
                반환한다.
              </li>
            </ul>
            <p data-ke-size="size16">
              Redis TTL을 비슷하게 구현해보고자 cleanupExpiredWindows()를
              clearConfig와 엮어 구현해본 것이 커스터마이징의 전부였고, 구현에
              별다른 어려움은 없다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">통합 테스트</h3>
            <pre
              id="code_1754746479441"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">import</span> request <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"supertest"</span>;
<span class="hljs-keyword" style="">import</span> { createApp } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../../app"</span>;
<span class="hljs-keyword" style="">import</span> { createFixedWindowMiddleware } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../middleware"</span>;

describe(<span class="hljs-string" style="">"Fixed Window Rate Limiter Integration"</span>, <span class="hljs-function" style="">() =&gt;</span> {
afterEach(<span class="hljs-function" style="">() =&gt;</span> {
jest.useRealTimers();
});

it(<span class="hljs-string" style="">"윈도우 내의 임계치에 도달하면 429 에러가 발생한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> threshold = <span class="hljs-number" style="">10</span>;
<span class="hljs-keyword" style="">const</span> windowSizeMs = <span class="hljs-number" style="">5000</span>;
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware({
threshold,
windowSizeMs,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; threshold; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}

<span class="hljs-keyword" style="">const</span> rejectedResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(rejectedResponse.status).toBe(<span class="hljs-number" style="">429</span>);
expect(rejectedResponse.body.error).toBe(<span class="hljs-string" style="">"Too Many Requests"</span>);
});

it(<span class="hljs-string" style="">"다른 IP 주소는 독립적인 rate limit을 가진다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);

<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);

expect(response1.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"동시 요청 처리 시 정확한 카운팅"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> threshold = <span class="hljs-number" style="">50</span>;
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware({
threshold,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 50개 동시 요청</span>
<span class="hljs-keyword" style="">const</span> promises = <span class="hljs-built_in" style="">Array</span>(threshold)
.fill(<span class="hljs-literal" style="">null</span>)
.map(<span class="hljs-function" style="">() =&gt;</span> request(app).get(<span class="hljs-string" style="">"/"</span>));

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);
<span class="hljs-keyword" style="">const</span> successCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">200</span>).length;
<span class="hljs-keyword" style="">const</span> failCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">429</span>).length;

<span class="hljs-comment" style="">// 정확히 threshold만큼만 성공</span>
expect(successCount).toBe(threshold);
expect(failCount).toBe(<span class="hljs-number" style="">0</span>);

<span class="hljs-comment" style="">// 추가 요청은 실패</span>
<span class="hljs-keyword" style="">const</span> extraResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(extraResponse.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"커스텀 키 생성기 사용 시 올바르게 동작"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
},
{
<span class="hljs-attr" style="">keyGenerator</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span>
req.headers[<span class="hljs-string" style="">"api-key"</span>]?.toString() || <span class="hljs-string" style="">"anonymous"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// API 키 "key1"로 2번 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);

<span class="hljs-comment" style="">// API 키 "key2"로 2번 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);

<span class="hljs-comment" style="">// 각 키별로 임계치 확인</span>
<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);

expect(response1.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// anonymous 키는 별도 카운트</span>
<span class="hljs-keyword" style="">const</span> anonymousResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(anonymousResponse.status).toBe(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"윈도우 경계에서 burst traffic 발생 가능 (Fixed Window의 한계)"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> threshold = <span class="hljs-number" style="">10</span>;
<span class="hljs-keyword" style="">const</span> windowSizeMs = <span class="hljs-number" style="">1000</span>; <span class="hljs-comment" style="">// 1초</span>
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware({
threshold,
windowSizeMs,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 실제 시간 기반 테스트</span>
<span class="hljs-keyword" style="">const</span> startTime = <span class="hljs-built_in" style="">Date</span>.now();

<span class="hljs-comment" style="">// 첫 번째 윈도우에서 threshold만큼 요청</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; threshold; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}

<span class="hljs-comment" style="">// 윈도우가 끝날 때까지 대기</span>
<span class="hljs-keyword" style="">const</span> elapsedTime = <span class="hljs-built_in" style="">Date</span>.now() - startTime;
<span class="hljs-keyword" style="">const</span> remainingTime = windowSizeMs - elapsedTime + <span class="hljs-number" style="">100</span>; <span class="hljs-comment" style="">// 여유 시간 추가</span>

<span class="hljs-keyword" style="">if</span> (remainingTime &gt; <span class="hljs-number" style="">0</span>) {
<span class="hljs-keyword" style="">await</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Promise</span>(<span class="hljs-function" style="">(<span class="hljs-params" style="">resolve</span>) =&gt;</span> <span class="hljs-built_in" style="">setTimeout</span>(resolve, remainingTime));
}

<span class="hljs-comment" style="">// 새 윈도우에서 다시 threshold만큼 요청 가능 (threshold * 2 BURST)</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; threshold; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}
});

it(<span class="hljs-string" style="">"skip 옵션 사용 시 특정 요청은 rate limit 제외"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
},
{
<span class="hljs-attr" style="">skip</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.path === <span class="hljs-string" style="">"/health"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
<span class="hljs-attr" style="">setupRoutes</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">app</span>) =&gt;</span> {
app.get(<span class="hljs-string" style="">"/health"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> res.json({ <span class="hljs-attr" style="">status</span>: <span class="hljs-string" style="">"ok"</span> }));
app.get(<span class="hljs-string" style="">"/api/users"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> res.json({ <span class="hljs-attr" style="">users</span>: [] }));
},
});

<span class="hljs-comment" style="">// 일반 요청은 rate limit 적용</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/users"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/users"</span>);
<span class="hljs-keyword" style="">const</span> limitedResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/users"</span>);
expect(limitedResponse.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// health check는 rate limit 제외</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">10</span>; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/health"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}
});

it(<span class="hljs-string" style="">"onLimitReached 콜백이 호출된다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">let</span> callbackCalled = <span class="hljs-literal" style="">false</span>;
<span class="hljs-keyword" style="">let</span> limitedPath = <span class="hljs-string" style="">""</span>;

<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
},
{
<span class="hljs-attr" style="">onLimitReached</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req, res</span>) =&gt;</span> {
callbackCalled = <span class="hljs-literal" style="">true</span>;
limitedPath = req.path;
res.status(<span class="hljs-number" style="">429</span>).json({ <span class="hljs-attr" style="">error</span>: <span class="hljs-string" style="">"Custom limit message"</span> });
},
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/test"</span>);
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/test"</span>);

expect(callbackCalled).toBe(<span class="hljs-literal" style="">true</span>);
expect(limitedPath).toBe(<span class="hljs-string" style="">"/test"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response.body.error).toBe(<span class="hljs-string" style="">"Custom limit message"</span>);
});

it(<span class="hljs-string" style="">"다양한 HTTP 메서드에 대해 동일하게 작동"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createFixedWindowMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">5</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">5000</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 다양한 메서드로 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">await</span> request(app).post(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">await</span> request(app).put(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">await</span> request(app).delete(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">await</span> request(app).patch(<span class="hljs-string" style="">"/"</span>);

<span class="hljs-comment" style="">// 임계치 도달</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
});
});</code></pre>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1144"
              data-origin-height="594"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/mbu7U/btsPLPIxHr2/AAAAAAAAAAAAAAAAAAAAANiagD1_bA8WZz8_iFo8qup6OUdsJTaHlQdSpIpXFi30/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=j%2FyFxQNFerZYh6%2FzOUFQg7T2ZLA%3D"
                data-phocus="https://blog.kakaocdn.net/dna/mbu7U/btsPLPIxHr2/AAAAAAAAAAAAAAAAAAAAANiagD1_bA8WZz8_iFo8qup6OUdsJTaHlQdSpIpXFi30/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=j%2FyFxQNFerZYh6%2FzOUFQg7T2ZLA%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/mbu7U/btsPLPIxHr2/AAAAAAAAAAAAAAAAAAAAANiagD1_bA8WZz8_iFo8qup6OUdsJTaHlQdSpIpXFi30/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=j%2FyFxQNFerZYh6%2FzOUFQg7T2ZLA%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fmbu7U%2FbtsPLPIxHr2%2FAAAAAAAAAAAAAAAAAAAAANiagD1_bA8WZz8_iFo8qup6OUdsJTaHlQdSpIpXFi30%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dj%252FyFxQNFerZYh6%252FzOUFQg7T2ZLA%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1144"
                  height="594"
                  data-origin-width="1144"
                  data-origin-height="594"
                  data-phocus-index="12"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              기본적인 기능들과 더불어, 단점들에 대해서도 테스트가 통과되는
              모습이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Sliding Window Logging</h2>
            <p data-ke-size="size16">
              Fixed Window Counter의 가장 큰 한계는
              <i><span style="color: #ee2323">윈도우 경계 부근 버스트</span></i
              >를 막을 방법이 없다는 점이다. Sliding Window Logging은 이를
              해결한다. 아래 설명들을 보면 알겠지만, 스코어를 저장하여 순서대로
              로깅하고 조회할 수 있는 Redis ZSET을 이용하여 구현이 쉽게
              가능하다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1846"
              data-origin-height="1104"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/ZmOo4/btsPN7HY4ay/AAAAAAAAAAAAAAAAAAAAAKYVazrrN_DUCobugZqGeZZ9FgaC9Yku9FTEMaYDyE6r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=4aLRyF0PVW%2BrwvyQ%2BUryfJdZBjM%3D"
                data-phocus="https://blog.kakaocdn.net/dna/ZmOo4/btsPN7HY4ay/AAAAAAAAAAAAAAAAAAAAAKYVazrrN_DUCobugZqGeZZ9FgaC9Yku9FTEMaYDyE6r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=4aLRyF0PVW%2BrwvyQ%2BUryfJdZBjM%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/ZmOo4/btsPN7HY4ay/AAAAAAAAAAAAAAAAAAAAAKYVazrrN_DUCobugZqGeZZ9FgaC9Yku9FTEMaYDyE6r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=4aLRyF0PVW%2BrwvyQ%2BUryfJdZBjM%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FZmOo4%2FbtsPN7HY4ay%2FAAAAAAAAAAAAAAAAAAAAAKYVazrrN_DUCobugZqGeZZ9FgaC9Yku9FTEMaYDyE6r%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D4aLRyF0PVW%252BrwvyQ%252BUryfJdZBjM%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1846"
                  height="1104"
                  data-origin-width="1846"
                  data-origin-height="1104"
                  data-phocus-index="13"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-end="1346" data-start="1337" data-ke-size="size23">
              동작 원리
            </h3>
            <ol
              style="list-style-type: decimal"
              data-end="1431"
              data-start="1347"
              data-ke-list-type="decimal"
            >
              <li data-end="1371" data-start="1347">
                요청 시 타임스탬프를 로그에 기록한다. (1, 2)
              </li>
              <li data-end="1396" data-start="1372">
                만료된 타임스탬프는 로그에서 제거한다. (3)
              </li>
              <li data-end="1431" data-start="1397">
                로그 크기가 임계치 이하이면 요청 허용, 초과하면 거부. (3, 4)
              </li>
            </ol>
            <p data-end="1537" data-start="1433" data-ke-size="size16">
              이 방식은
              <i><span style="color: #ee2323">정적인 경계가 없으므로</span></i>
              언제나 임계치 이하로만 처리할 수 있다.<br />다만, 거부된 요청의
              타임스탬프도 기록하기 때문에 Fixed Window 대비 메모리를 더
              사용한다.
            </p>
            <p data-end="1537" data-start="1433" data-ke-size="size16">
              &nbsp;
            </p>
            <h3 data-end="1545" data-start="1539" data-ke-size="size23">
              장점
            </h3>
            <ul
              style="list-style-type: disc"
              data-end="1583"
              data-start="1546"
              data-ke-list-type="disc"
            >
              <li data-end="1560" data-start="1546">버스트 방지에 강하다.</li>
              <li data-end="1583" data-start="1561">
                처리율을 안정적으로 유지할 수 있다.
              </li>
            </ul>
            <h3 data-end="1591" data-start="1585" data-ke-size="size23">
              단점
            </h3>
            <ul
              style="list-style-type: disc"
              data-end="1660"
              data-start="1592"
              data-ke-list-type="disc"
            >
              <li data-end="1609" data-start="1592">
                로그 크기만큼 메모리 사용.
              </li>
              <li data-end="1660" data-start="1610">
                요청 수가 많으면 GC/CPU 부하가 커질 수 있음(배열 filter 기반
                구현 시).
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">만들어보기</h3>
            <pre
              id="code_1754790576332"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> SlidingWindowConfig {
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 내 허용되는 최대 요청 수</span>
windowSizeMs: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 크기 (밀리초)</span>
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              윈도우 방식의 알고리즘들은 기본 설정은 비슷하다. 이번에도 역시
              임계치와 윈도우 사이즈만 기본 설정에 넣었다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754790848347"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">SlidingWindowLoggingRateLimiter</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">RateLimiter</span> </span>{
<span class="hljs-keyword" style="">private</span> timestamps: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, <span class="hljs-built_in" style="">number</span>[]&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> config: SlidingWindowLoggingConfig</span>)</span> {}

tryConsume(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">this</span>.canConsumeRequest(key, now)) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Rate limit exceeded`</span>);
}
<span class="hljs-built_in" style="">this</span>.addTimestamp(key, now);
}

<span class="hljs-keyword" style="">private</span> canConsumeRequest(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">now</span>: <span class="hljs-built_in" style="">number</span>): <span class="hljs-built_in" style="">boolean</span> {
<span class="hljs-keyword" style="">let</span> timestamps = <span class="hljs-built_in" style="">this</span>.timestamps.get(key);
<span class="hljs-keyword" style="">if</span> (!timestamps) {
timestamps = [];
<span class="hljs-built_in" style="">this</span>.timestamps.set(key, timestamps);
}

<span class="hljs-keyword" style="">const</span> windowStart = now - <span class="hljs-built_in" style="">this</span>.config.windowSizeMs;

<span class="hljs-comment" style="">// 윈도우 내의 요청만 필터링</span>
<span class="hljs-keyword" style="">const</span> validTimestamps = timestamps.filter(
<span class="hljs-function" style="">(<span class="hljs-params" style="">timestamp</span>) =&gt;</span> timestamp &gt;= windowStart
);

<span class="hljs-comment" style="">// 메모리 효율을 위해 오래된 타임스탬프 제거</span>
<span class="hljs-keyword" style="">if</span> (validTimestamps.length !== timestamps.length) {
<span class="hljs-built_in" style="">this</span>.timestamps.set(key, validTimestamps);
}

<span class="hljs-keyword" style="">return</span> validTimestamps.length &lt; <span class="hljs-built_in" style="">this</span>.config.threshold;
}

<span class="hljs-keyword" style="">private</span> addTimestamp(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">now</span>: <span class="hljs-built_in" style="">number</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">const</span> timestamps = <span class="hljs-built_in" style="">this</span>.timestamps.get(key);
<span class="hljs-keyword" style="">if</span> (!timestamps) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Timestamps not found for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}
timestamps.push(now);
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              순수 JS로 구현했기에 filter을 사용했지만, 매커니즘은 똑같다.
            </p>
            <p data-ke-size="size16">
              요청 시점에 타임스탬프 로그들을 적재하고 제거한다. 그리고 요청이
              수행될 수 있는지를 검증하여 작업 요청을 통과시키거나 드랍시킨다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">통합 테스트</h3>
            <pre
              id="code_1754791000882"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">import</span> request <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"supertest"</span>;
<span class="hljs-keyword" style="">import</span> { createApp } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../../app"</span>;
<span class="hljs-keyword" style="">import</span> { createSlidingWindowLoggingMiddleware } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../middleware"</span>;
<span class="hljs-keyword" style="">import</span> { SlidingWindowLoggingConfig } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../config"</span>;
<span class="hljs-keyword" style="">import</span> <span class="hljs-keyword" style="">type</span> { Express } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"express"</span>;

describe(<span class="hljs-string" style="">"SlidingWindowLogging Integration"</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">let</span> app: Express;
<span class="hljs-keyword" style="">let</span> config: SlidingWindowLoggingConfig;

beforeEach(<span class="hljs-function" style="">() =&gt;</span> {
jest.useFakeTimers();
config = {
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">5</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>, <span class="hljs-comment" style="">// 1초 윈도우</span>
};
<span class="hljs-keyword" style="">const</span> middleware = createSlidingWindowLoggingMiddleware(config);
app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [middleware] });
});

afterEach(<span class="hljs-function" style="">() =&gt;</span> {
jest.useRealTimers();
});

it(<span class="hljs-string" style="">"임계치까지 요청을 허용해야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> responses = [];

<span class="hljs-comment" style="">// 5개의 요청 모두 성공해야 함</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.100"</span>);
responses.push(response);
}

responses.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style="">response</span>) =&gt;</span> {
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
expect(response.body.message).toBe(<span class="hljs-string" style="">"Test endpoint"</span>);
});
});

it(<span class="hljs-string" style="">"임계치 초과 시 429 응답을 반환해야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-comment" style="">// 5개의 요청 성공</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.100"</span>);
}

<span class="hljs-comment" style="">// 6번째 요청은 429 응답</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.100"</span>);

expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response.body.error).toBe(<span class="hljs-string" style="">"Too Many Requests"</span>);
});

it(<span class="hljs-string" style="">"다른 IP 주소는 독립적인 rate limit을 가져야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-comment" style="">// IP1에 대해 5개 요청</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.100"</span>);
}

<span class="hljs-comment" style="">// IP2는 여전히 요청 가능</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.200"</span>);

expect(response.status).toBe(<span class="hljs-number" style="">200</span>);

<span class="hljs-comment" style="">// IP1은 더 이상 요청 불가</span>
<span class="hljs-keyword" style="">const</span> blockedResponse = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"192.168.1.100"</span>);

expect(blockedResponse.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"슬라이딩 윈도우가 정확하게 동작해야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 0ms: 2개 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

<span class="hljs-comment" style="">// 300ms: 2개 요청</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">300</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

<span class="hljs-comment" style="">// 700ms: 1개 요청 (총 5개)</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">400</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

<span class="hljs-comment" style="">// 6번째 요청은 실패</span>
<span class="hljs-keyword" style="">const</span> blockedResponse = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
expect(blockedResponse.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// 1001ms: 처음 2개가 윈도우를 벗어남</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">301</span>);

<span class="hljs-comment" style="">// 이제 2개 더 요청 가능</span>
<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(response1.status).toBe(<span class="hljs-number" style="">200</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">200</span>);

<span class="hljs-comment" style="">// 다시 임계치에 도달</span>
<span class="hljs-keyword" style="">const</span> finalBlockedResponse = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
expect(finalBlockedResponse.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"동시 요청을 정확히 처리해야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 6개의 동시 요청</span>
<span class="hljs-keyword" style="">const</span> promises = <span class="hljs-built_in" style="">Array</span>(<span class="hljs-number" style="">6</span>)
.fill(<span class="hljs-literal" style="">null</span>)
.map(<span class="hljs-function" style="">() =&gt;</span>
request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);

<span class="hljs-comment" style="">// 5개는 성공, 1개는 실패</span>
<span class="hljs-keyword" style="">const</span> successCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">200</span>).length;
<span class="hljs-keyword" style="">const</span> failCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">429</span>).length;

expect(successCount).toBe(<span class="hljs-number" style="">5</span>);
expect(failCount).toBe(<span class="hljs-number" style="">1</span>);
});

it(<span class="hljs-string" style="">"커스텀 키 생성기를 사용할 수 있어야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> customMiddleware = createSlidingWindowLoggingMiddleware(
config,
{
<span class="hljs-attr" style="">keyGenerator</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req: <span class="hljs-built_in" style="">any</span></span>) =&gt;</span> req.headers[<span class="hljs-string" style="">"api-key"</span>] || <span class="hljs-string" style="">"anonymous"</span>,
}
);
<span class="hljs-keyword" style="">const</span> customApp = createApp({ <span class="hljs-attr" style="">middlewares</span>: [customMiddleware] });

<span class="hljs-comment" style="">// 같은 API 키로 5개 요청</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(customApp).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user-123"</span>);
}

<span class="hljs-comment" style="">// 6번째 요청은 실패</span>
<span class="hljs-keyword" style="">const</span> blockedResponse = <span class="hljs-keyword" style="">await</span> request(customApp)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user-123"</span>);

expect(blockedResponse.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// 다른 API 키는 성공</span>
<span class="hljs-keyword" style="">const</span> differentKeyResponse = <span class="hljs-keyword" style="">await</span> request(customApp)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user-456"</span>);

expect(differentKeyResponse.status).toBe(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"skip 옵션으로 특정 요청을 제외할 수 있어야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> skipMiddleware = createSlidingWindowLoggingMiddleware(
config,
{
<span class="hljs-attr" style="">skip</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req: <span class="hljs-built_in" style="">any</span></span>) =&gt;</span> req.headers[<span class="hljs-string" style="">"skip-rate-limit"</span>] === <span class="hljs-string" style="">"true"</span>,
}
);
<span class="hljs-keyword" style="">const</span> skipApp = createApp({ <span class="hljs-attr" style="">middlewares</span>: [skipMiddleware] });

<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 5개의 일반 요청</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(skipApp).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
}

<span class="hljs-comment" style="">// skip 헤더가 있는 요청은 rate limit 무시</span>
<span class="hljs-keyword" style="">const</span> skipResponse = <span class="hljs-keyword" style="">await</span> request(skipApp)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip)
.set(<span class="hljs-string" style="">"skip-rate-limit"</span>, <span class="hljs-string" style="">"true"</span>);

expect(skipResponse.status).toBe(<span class="hljs-number" style="">200</span>);

<span class="hljs-comment" style="">// skip 헤더가 없는 요청은 여전히 차단</span>
<span class="hljs-keyword" style="">const</span> blockedResponse = <span class="hljs-keyword" style="">await</span> request(skipApp)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(blockedResponse.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"onLimitReached 콜백이 호출되어야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> onLimitReached = jest.fn(<span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> {
res.status(<span class="hljs-number" style="">429</span>).json({ <span class="hljs-attr" style="">error</span>: <span class="hljs-string" style="">"Too Many Requests"</span> });
});
<span class="hljs-keyword" style="">const</span> callbackMiddleware = createSlidingWindowLoggingMiddleware(
config,
{
onLimitReached,
}
);
<span class="hljs-keyword" style="">const</span> callbackApp = createApp({ <span class="hljs-attr" style="">middlewares</span>: [callbackMiddleware] });

<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 5개의 요청</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(callbackApp).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
}

expect(onLimitReached).not.toHaveBeenCalled();

<span class="hljs-comment" style="">// 6번째 요청 시 콜백 호출</span>
<span class="hljs-keyword" style="">await</span> request(callbackApp).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(onLimitReached).toHaveBeenCalledTimes(<span class="hljs-number" style="">1</span>);
expect(onLimitReached).toHaveBeenCalledWith(
expect.objectContaining({
<span class="hljs-attr" style="">ip</span>: ip,
}),
expect.any(<span class="hljs-built_in" style="">Object</span>)
);
});

it(<span class="hljs-string" style="">"다양한 HTTP 메서드를 지원해야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 다양한 메서드로 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).post(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).put(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).delete(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
<span class="hljs-keyword" style="">await</span> request(app).patch(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

<span class="hljs-comment" style="">// 6번째 요청은 메서드와 관계없이 차단</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"Fixed Window와 달리 윈도우 경계에서 버스트가 발생하지 않아야 한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> ip = <span class="hljs-string" style="">"192.168.1.100"</span>;

<span class="hljs-comment" style="">// 윈도우 끝 부분에서 5개 요청</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">900</span>); <span class="hljs-comment" style="">// 900ms 시점</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">5</span>; i++) {
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/api/test"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);
}

<span class="hljs-comment" style="">// 100ms 후 (새 윈도우 시작)</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">100</span>);

<span class="hljs-comment" style="">// Fixed Window와 달리 여전히 5개가 윈도우 내에 있음</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(response.status).toBe(<span class="hljs-number" style="">429</span>); <span class="hljs-comment" style="">// 여전히 차단됨</span>

<span class="hljs-comment" style="">// 901ms 더 지나야 첫 요청이 윈도우를 벗어남 (총 1001ms)</span>
jest.advanceTimersByTime(<span class="hljs-number" style="">901</span>);

<span class="hljs-comment" style="">// 이제 요청 가능</span>
<span class="hljs-keyword" style="">const</span> allowedResponse = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, ip);

expect(allowedResponse.status).toBe(<span class="hljs-number" style="">200</span>);
});
});</code></pre>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1172"
              data-origin-height="544"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bLuu6V/btsPNpvn4z3/AAAAAAAAAAAAAAAAAAAAAAuGkraSsCCxbr5CQ4loGS_8lDADCa4dU80kof58avsX/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=NFeLvpaBC8WqLYvsfvmEQM2iRSI%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bLuu6V/btsPNpvn4z3/AAAAAAAAAAAAAAAAAAAAAAuGkraSsCCxbr5CQ4loGS_8lDADCa4dU80kof58avsX/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=NFeLvpaBC8WqLYvsfvmEQM2iRSI%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bLuu6V/btsPNpvn4z3/AAAAAAAAAAAAAAAAAAAAAAuGkraSsCCxbr5CQ4loGS_8lDADCa4dU80kof58avsX/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=NFeLvpaBC8WqLYvsfvmEQM2iRSI%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbLuu6V%2FbtsPNpvn4z3%2FAAAAAAAAAAAAAAAAAAAAAAuGkraSsCCxbr5CQ4loGS_8lDADCa4dU80kof58avsX%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNFeLvpaBC8WqLYvsfvmEQM2iRSI%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1172"
                  height="544"
                  data-origin-width="1172"
                  data-origin-height="544"
                  data-phocus-index="14"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Sliding Window Counter</h2>
            <p data-ke-size="size16">
              Sliding Window Counter는 Fixed Window Counter와 Sliding Window
              Logging의 절충안이다.<br />현재 윈도우와 직전 윈도우의 카운트만
              저장해 <i><span style="color: #ee2323">가중 평균</span></i
              >으로 요청률을 추정한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-end="1881" data-start="1872" data-ke-size="size23">
              계산 공식
            </h3>
            <div>
              <blockquote data-ke-style="style2">
                추정 요청 수 = 현재 윈도우 카운트 + (직전 윈도우 카운트 × 겹치는
                비율)
              </blockquote>
            </div>
            <ul
              style="list-style-type: disc"
              data-end="2096"
              data-start="1935"
              data-ke-list-type="disc"
            >
              <li data-end="1966" data-start="1935">
                <b>현재 윈도우 카운트</b>: 현재 윈도우 내 요청 수
              </li>
              <li data-end="1998" data-start="1967">
                <b>직전 윈도우 카운트</b>: 이전 윈도우 내 요청 수
              </li>
              <li data-end="2096" data-start="1999">
                <b>겹치는 비율</b>: 현재 시점에서 이전 윈도우가 겹치는 비율
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-end="2104" data-start="2098" data-ke-size="size23">
              예시
            </h3>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="978"
              data-origin-height="834"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bYbBi8/btsPMXlGyno/AAAAAAAAAAAAAAAAAAAAAB23C50qzMFOvNrNa43z60jo24QbYXf2U7z-LklGrpit/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=Nn3SSWhG2q83mLv9w%2FIXjMAWbbM%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bYbBi8/btsPMXlGyno/AAAAAAAAAAAAAAAAAAAAAB23C50qzMFOvNrNa43z60jo24QbYXf2U7z-LklGrpit/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=Nn3SSWhG2q83mLv9w%2FIXjMAWbbM%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bYbBi8/btsPMXlGyno/AAAAAAAAAAAAAAAAAAAAAB23C50qzMFOvNrNa43z60jo24QbYXf2U7z-LklGrpit/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=Nn3SSWhG2q83mLv9w%2FIXjMAWbbM%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbYbBi8%2FbtsPMXlGyno%2FAAAAAAAAAAAAAAAAAAAAAB23C50qzMFOvNrNa43z60jo24QbYXf2U7z-LklGrpit%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNn3SSWhG2q83mLv9w%252FIXjMAWbbM%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="475"
                  height="405"
                  data-origin-width="978"
                  data-origin-height="834"
                  data-phocus-index="15"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">
              <br />위 그림은 윈도우 크기가 1000ms, 임계치가 10이며 이전
              윈도우에서 요청을 8개 처리했고, 현재 윈도우에서 1500ms에서 요청이
              3개 들어온 상황이다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>현재 윈도우의 요청 카운터: 3</li>
              <li>직전 윈도우의 요청 카운터: 8</li>
              <li>
                직전 윈도우와의 겹치는 비율: 0.5 (1500ms에서 요청이 왔기 때문에,
                딱 절반에 해당함)
              </li>
              <li>
                3 + 8 x 0.5 = 7이므로 1500ms에서는 3개의 요청을 더 허용할 수
                있다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-end="2279" data-start="2273" data-ke-size="size23">
              장점
            </h3>
            <ul
              style="list-style-type: disc"
              data-end="2398"
              data-start="2280"
              data-ke-list-type="disc"
            >
              <li data-end="2307" data-start="2280">
                키당 두 개의 숫자만 저장 → 메모리 효율적.
              </li>
              <li data-end="2356" data-start="2308">
                경계 부근에서도 부드럽게 제한 적용 → Fixed Window의 버스트 문제
                해결.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-end="2406" data-start="2400" data-ke-size="size23">
              단점
            </h3>
            <ul
              style="list-style-type: disc"
              data-end="2458"
              data-start="2407"
              data-ke-list-type="disc"
            >
              <li data-end="2431" data-start="2407">
                근사치 기반이라 100% 정확하진 않음. (직전 시간대에 도착한 요청에
                대한 계산은 전혀 수행하지 않음)
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <a
                href="https://blog.cloudflare.com/counting-things-a-lot-of-different-things/"
                target="_blank"
                rel="noopener"
                >Cloudflare의 기술 블로그에 따르면</a
              >, 40억 개의 요청에 대한 실험 결과에서 문제 발생 비율은 단
              0.003%에 불과했다고 한다.
            </p>
            <p data-ke-size="size16">(그래서 단점이라 보기에 좀 애매할 듯)</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1578"
              data-origin-height="844"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/cDf0zv/btsPO7Hwqs7/AAAAAAAAAAAAAAAAAAAAAC9behhNYkXMMW5wDeVLP1C4SkcPu5kXINGrJOI98RBS/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=HliEsQTT4PLemGK1eR7Al%2FknW4M%3D"
                data-phocus="https://blog.kakaocdn.net/dna/cDf0zv/btsPO7Hwqs7/AAAAAAAAAAAAAAAAAAAAAC9behhNYkXMMW5wDeVLP1C4SkcPu5kXINGrJOI98RBS/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=HliEsQTT4PLemGK1eR7Al%2FknW4M%3D"
                data-alt="cloudflare 기술 블로그 발췌"
                ><img
                  src="https://blog.kakaocdn.net/dna/cDf0zv/btsPO7Hwqs7/AAAAAAAAAAAAAAAAAAAAAC9behhNYkXMMW5wDeVLP1C4SkcPu5kXINGrJOI98RBS/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=HliEsQTT4PLemGK1eR7Al%2FknW4M%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FcDf0zv%2FbtsPO7Hwqs7%2FAAAAAAAAAAAAAAAAAAAAAC9behhNYkXMMW5wDeVLP1C4SkcPu5kXINGrJOI98RBS%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DHliEsQTT4PLemGK1eR7Al%252FknW4M%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="733"
                  height="392"
                  data-origin-width="1578"
                  data-origin-height="844"
                  data-phocus-index="16"
              /></span>
              <figcaption>cloudflare 기술 블로그 발췌</figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">만들어보기</h3>
            <pre
              id="code_1754792594293"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">export</span> <span class="hljs-keyword" style="">interface</span> SlidingWindowCounterConfig {
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 내 허용되는 최대 요청 수</span>
windowSizeMs: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 윈도우 크기 (밀리초)</span>
}</code></pre>
            <pre
              id="code_1754792611193"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">type</span> WindowCounter = {
<span class="hljs-attr" style="">count</span>: <span class="hljs-built_in" style="">number</span>;
windowStart: <span class="hljs-built_in" style="">number</span>;
};

<span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">SlidingWindowCounterRateLimiter</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">RateLimiter</span> </span>{
<span class="hljs-keyword" style="">private</span> previousWindows: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, WindowCounter&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();
<span class="hljs-keyword" style="">private</span> currentWindows: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, WindowCounter&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> config: SlidingWindowCounterConfig</span>)</span> {}

tryConsume(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">const</span> currentWindowStart = <span class="hljs-built_in" style="">this</span>.getCurrentWindowStart(now);

<span class="hljs-built_in" style="">this</span>.updateWindows(key, currentWindowStart);

<span class="hljs-comment" style="">// 현재 요청을 추가한 후의 예상 rate 계산</span>
<span class="hljs-keyword" style="">const</span> wouldBeRate = <span class="hljs-built_in" style="">this</span>.calculatePotentialRate(key, now, currentWindowStart);

<span class="hljs-keyword" style="">if</span> (wouldBeRate &gt; <span class="hljs-built_in" style="">this</span>.config.threshold) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Rate Limit Exceeded for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}

<span class="hljs-built_in" style="">this</span>.increaseCounter(key);
}

<span class="hljs-keyword" style="">private</span> increaseCounter(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">const</span> currentWindow = <span class="hljs-built_in" style="">this</span>.currentWindows.get(key);
<span class="hljs-keyword" style="">if</span> (!currentWindow) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Window not found for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}
currentWindow.count++;
}

<span class="hljs-keyword" style="">private</span> updateWindows(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">currentWindowStart</span>: <span class="hljs-built_in" style="">number</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">let</span> currentWindow = <span class="hljs-built_in" style="">this</span>.currentWindows.get(key);

<span class="hljs-keyword" style="">if</span> (!currentWindow || currentWindow.windowStart !== currentWindowStart) {
<span class="hljs-keyword" style="">if</span> (currentWindow) {
<span class="hljs-built_in" style="">this</span>.previousWindows.set(key, currentWindow);
}
currentWindow = { <span class="hljs-attr" style="">count</span>: <span class="hljs-number" style="">0</span>, <span class="hljs-attr" style="">windowStart</span>: currentWindowStart };
<span class="hljs-built_in" style="">this</span>.currentWindows.set(key, currentWindow);
}
}

<span class="hljs-keyword" style="">private</span> calculatePotentialRate(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">now</span>: <span class="hljs-built_in" style="">number</span>, <span class="hljs-attr" style="">currentWindowStart</span>: <span class="hljs-built_in" style="">number</span>): <span class="hljs-built_in" style="">number</span> {
<span class="hljs-keyword" style="">const</span> currentWindow = <span class="hljs-built_in" style="">this</span>.currentWindows.get(key);
<span class="hljs-keyword" style="">if</span> (!currentWindow) {
<span class="hljs-keyword" style="">return</span> <span class="hljs-number" style="">1</span>; <span class="hljs-comment" style="">// 윈도우가 없으면 새 요청 1개만 계산</span>
}

<span class="hljs-keyword" style="">const</span> previousWindow = <span class="hljs-built_in" style="">this</span>.previousWindows.get(key);
<span class="hljs-keyword" style="">const</span> previousWindowStart = currentWindowStart - <span class="hljs-built_in" style="">this</span>.config.windowSizeMs;

<span class="hljs-comment" style="">// 현재 윈도우 카운트에 1을 추가한 값으로 계산</span>
<span class="hljs-keyword" style="">let</span> rate = currentWindow.count + <span class="hljs-number" style="">1</span>;

<span class="hljs-keyword" style="">if</span> (previousWindow &amp;&amp; previousWindow.windowStart === previousWindowStart) {
<span class="hljs-comment" style="">// 현재 윈도우에서 경과한 시간</span>
<span class="hljs-keyword" style="">const</span> elapsedInCurrentWindow = now - currentWindowStart;
<span class="hljs-comment" style="">// 이전 윈도우와 겹치는 시간</span>
<span class="hljs-keyword" style="">const</span> overlapTime = <span class="hljs-built_in" style="">this</span>.config.windowSizeMs - elapsedInCurrentWindow;
<span class="hljs-comment" style="">// 이전 윈도우와 겹치는 비율</span>
<span class="hljs-keyword" style="">const</span> overlapRatio = overlapTime / <span class="hljs-built_in" style="">this</span>.config.windowSizeMs;
<span class="hljs-comment" style="">// 슬라이딩 윈도우 카운터 공식: 현재 윈도우 + (이전 윈도우 × 겹치는 비율)</span>
rate = currentWindow.count + <span class="hljs-number" style="">1</span> + <span class="hljs-built_in" style="">Math</span>.floor(previousWindow.count * overlapRatio);
}

<span class="hljs-keyword" style="">return</span> rate;
}

<span class="hljs-keyword" style="">private</span> getCurrentWindowStart(now: <span class="hljs-built_in" style="">number</span>): <span class="hljs-built_in" style="">number</span> {
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">Math</span>.floor(now / <span class="hljs-built_in" style="">this</span>.config.windowSizeMs) * <span class="hljs-built_in" style="">this</span>.config.windowSizeMs;
}

cleanup(): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">const</span> currentWindowStart = <span class="hljs-built_in" style="">this</span>.getCurrentWindowStart(now);
<span class="hljs-keyword" style="">const</span> previousWindowStart = currentWindowStart - <span class="hljs-built_in" style="">this</span>.config.windowSizeMs;

<span class="hljs-built_in" style="">this</span>.previousWindows.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style=""><span class="hljs-built_in" style="">window</span>, key</span>) =&gt;</span> {
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">window</span>.windowStart &lt; previousWindowStart) {
<span class="hljs-built_in" style="">this</span>.previousWindows.delete(key);
}
});

<span class="hljs-built_in" style="">this</span>.currentWindows.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style=""><span class="hljs-built_in" style="">window</span>, key</span>) =&gt;</span> {
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">window</span>.windowStart &lt; currentWindowStart) {
<span class="hljs-built_in" style="">this</span>.previousWindows.set(key, <span class="hljs-built_in" style="">window</span>);
<span class="hljs-built_in" style="">this</span>.currentWindows.delete(key);
}
});
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">통합 테스트</h3>
            <pre
              id="code_1754792633988"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">import</span> request <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"supertest"</span>;
<span class="hljs-keyword" style="">import</span> { createApp } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../../app"</span>;
<span class="hljs-keyword" style="">import</span> { createSlidingWindowCounterMiddleware } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../middleware"</span>;

describe(<span class="hljs-string" style="">"Sliding Window Counter Middleware Integration"</span>, <span class="hljs-function" style="">() =&gt;</span> {
it(<span class="hljs-string" style="">"rate limit 이하의 요청은 통과"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">3</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
}),
],
});

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all([
request(app).get(<span class="hljs-string" style="">"/"</span>),
request(app).get(<span class="hljs-string" style="">"/"</span>),
request(app).get(<span class="hljs-string" style="">"/"</span>),
]);

responses.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style="">response</span>) =&gt;</span> {
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
});
});

it(<span class="hljs-string" style="">"rate limit 초과 시 429 응답"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
}),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"서로 다른 IP는 독립적으로 rate limit 적용"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
}),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>).expect(<span class="hljs-number" style="">429</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>).expect(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"커스텀 키 생성기 사용"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
},
{
<span class="hljs-attr" style="">keyGenerator</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.headers[<span class="hljs-string" style="">"api-key"</span>] <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">string</span> || <span class="hljs-string" style="">"anonymous"</span>,
}
),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user1"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user1"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user1"</span>).expect(<span class="hljs-number" style="">429</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"user2"</span>).expect(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"skip 옵션으로 특정 요청 제외"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
},
{
<span class="hljs-attr" style="">skip</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.path === <span class="hljs-string" style="">"/health"</span>,
}
),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// health 엔드포인트는 rate limit 무시</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/health"</span>).expect(<span class="hljs-number" style="">404</span>); <span class="hljs-comment" style="">// 라우트가 없어서 404지만 429는 아님</span>
});

it(<span class="hljs-string" style="">"커스텀 에러 핸들러 사용"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware(
{
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
},
{
<span class="hljs-attr" style="">onLimitReached</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> {
  res.status(<span class="hljs-number" style="">503</span>).json({
    <span class="hljs-attr" style="">error</span>: <span class="hljs-string" style="">"Custom Error"</span>,
    <span class="hljs-attr" style="">message</span>: <span class="hljs-string" style="">"Please slow down"</span>,
  });
},
}
),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);

<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">503</span>);
expect(response.body).toEqual({
<span class="hljs-attr" style="">error</span>: <span class="hljs-string" style="">"Custom Error"</span>,
<span class="hljs-attr" style="">message</span>: <span class="hljs-string" style="">"Please slow down"</span>,
});
});

it(<span class="hljs-string" style="">"다양한 HTTP 메서드 지원"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [
createSlidingWindowCounterMiddleware({
<span class="hljs-attr" style="">threshold</span>: <span class="hljs-number" style="">5</span>,
<span class="hljs-attr" style="">windowSizeMs</span>: <span class="hljs-number" style="">1000</span>,
}),
],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).post(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).put(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).delete(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).patch(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">200</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).expect(<span class="hljs-number" style="">429</span>);
});

});</code></pre>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1248"
              data-origin-height="428"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bfnPe0/btsPPnp2qGy/AAAAAAAAAAAAAAAAAAAAAJzJZaKGZ8rXYKvMrxBVRiZ1it-juemLJNeg_8j644lz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=co7%2Bf%2BezLTKxYFhc81IPV%2B1YGh4%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bfnPe0/btsPPnp2qGy/AAAAAAAAAAAAAAAAAAAAAJzJZaKGZ8rXYKvMrxBVRiZ1it-juemLJNeg_8j644lz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=co7%2Bf%2BezLTKxYFhc81IPV%2B1YGh4%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bfnPe0/btsPPnp2qGy/AAAAAAAAAAAAAAAAAAAAAJzJZaKGZ8rXYKvMrxBVRiZ1it-juemLJNeg_8j644lz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=co7%2Bf%2BezLTKxYFhc81IPV%2B1YGh4%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbfnPe0%2FbtsPPnp2qGy%2FAAAAAAAAAAAAAAAAAAAAAJzJZaKGZ8rXYKvMrxBVRiZ1it-juemLJNeg_8j644lz%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dco7%252Bf%252BezLTKxYFhc81IPV%252B1YGh4%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1248"
                  height="428"
                  data-origin-width="1248"
                  data-origin-height="428"
                  data-phocus-index="17"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">정리</h2>
            <p data-ke-size="size16">
              이렇게 세 가지 Window 기반 Rate Limiter 알고리즘을 비교하면 다음과
              같다.
            </p>
            <div>
              <table
                style="border-collapse: collapse; width: 100%"
                border="1"
                data-end="2821"
                data-start="2567"
                data-ke-align="alignLeft"
                data-ke-style="style13"
              >
                <tbody>
                  <tr>
                    <td style="text-align: center">알고리즘</td>
                    <td style="text-align: center">메모리 효율</td>
                    <td style="text-align: center">구현 난이도</td>
                    <td style="text-align: center">버스트 방지</td>
                    <td style="text-align: center">정확도</td>
                  </tr>
                  <tr data-end="2722" data-start="2672">
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2695"
                      data-start="2672"
                    >
                      Fixed Window Counter
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2703"
                      data-start="2695"
                    >
                      매우 높음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2711"
                      data-start="2703"
                    >
                      매우 쉬움
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2716"
                      data-start="2711"
                    >
                      낮음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2722"
                      data-start="2716"
                    >
                      중간
                    </td>
                  </tr>
                  <tr data-end="2769" data-start="2723">
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2748"
                      data-start="2723"
                    >
                      Sliding Window Logging
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2753"
                      data-start="2748"
                    >
                      낮음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2758"
                      data-start="2753"
                    >
                      쉬움
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2763"
                      data-start="2758"
                    >
                      높음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2769"
                      data-start="2763"
                    >
                      높음
                    </td>
                  </tr>
                  <tr data-end="2821" data-start="2770">
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2795"
                      data-start="2770"
                    >
                      Sliding Window Counter
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2800"
                      data-start="2795"
                    >
                      높음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2805"
                      data-start="2800"
                    >
                      중간
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2810"
                      data-start="2805"
                    >
                      높음
                    </td>
                    <td
                      style="text-align: center"
                      data-col-size="sm"
                      data-end="2821"
                      data-start="2810"
                    >
                      높음(근사치)
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              글이 길어져서,&nbsp; 원래 하려고했던 Nest Throttler에서 어떤
              알고리즘들을 채택했고 어떻게 커스터마이징했는지는 다음 포스팅에서
              해당 시리즈의 마무리로 다뤄보도록 하겠다.
            </p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_eZFkzC"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_7_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_7"
                    name="aswift_7"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=795087416&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=174&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=8&amp;uci=a!8&amp;fsb=1&amp;dtd=177"
                    data-google-container-id="a!8"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CP6G75bqoI8DFUlBwgUd8pYjKQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 578,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-578"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnGocc%2FbtsPL2HK8SH%2FAAAAAAAAAAAAAAAAAAAAAAFHDgWp7P9_tt0RS860yktikx9AefdeOW3iuyV3WcOE%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXzQLxPq7chHhm2voP29vm69Vl4E%253D"
                  data-title="[Rate Limit - 3] Fixed Window Counter, Sliding Window Logging, Sliding Window Counter 알고리즘"
                  data-description="[목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 지난 포스팅에선, Bucket 방식의 Token Bucket, Leaky Bucket 알고리즘을 살펴보고, 직접 구현과 테스트를 진행했다.이번 글에선 Window 방식의 알고리즘인 Fixed Window Counter, Sliding Window Logging, Sliding Window Counter을 다룬다. 모든 예제 코드는 아래 Github에서 확인할 수 있다. GitHub - mag123c/rate-limiterContribute to mag123c/rate-.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/578"
                  data-relative-pc-url="/578"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="578"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="578"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a href="/tag/Fixed%20Window">Fixed Window</a>,
          <a href="/tag/Fixed%20Window%20Counter">Fixed Window Counter</a>,
          <a href="/tag/Rate%20Limit">Rate Limit</a>,
          <a href="/tag/Rate%20Limit%20Algorithm">Rate Limit Algorithm</a>,
          <a href="/tag/Rate%20Limiter">Rate Limiter</a>,
          <a href="/tag/Rate%20Limiter%20Algorithm">Rate Limiter Algorithm</a>,
          <a href="/tag/Sliding%20Window">Sliding Window</a>,
          <a href="/tag/Sliding%20Window%20Counter">Sliding Window Counter</a>,
          <a href="/tag/Sliding%20Window%20Logging">Sliding Window Logging</a>,
          <a href="/tag/throttler">throttler</a>
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry578Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://sky.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >한달동안</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.11 19:21
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=578&amp;commentId=27079544"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤슴다!</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F6137056%2Fattach%2F5a1602c773e447cf8094b694a65fcf7e"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author"
                      ><img
                        src="https://doctorjazz.tistory.com/favicon.ico"
                        width="16"
                        height="16"
                        alt="Favicon of https://doctorjazz.tistory.com"
                        onerror="this.onerror=null;this.parentNode.removeChild(this)" />
                      <img
                        src="https://doctorjazz.tistory.com/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://doctorjazz.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >닥터재즈</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.12 02:02
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=578&amp;commentId=27084557"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    mag1c님 유익한 정보 감사해용^^
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7042671%2Fattach%2F5585d2c997c347108c3a8b1624a453cf"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://eonyainy.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >어니이니</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.12 06:41
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=578&amp;commentId=27086291"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    mag1c님 늘 느끼지만 필력이 너무좋으신것같아요..! 행복한
                    하루보내세요! 도움드리고 갈께요 :)♥
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7745753%2Fattach%2Fdcf924eea8fd401eb748138ea3006fff"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <img
                        src="https://digital-nagane.tistory.com/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://digital-nagane.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >digital-nagane</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.13 19:54
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=578&amp;commentId=27133475"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘보고 갑니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F8212215%2Fattach%2Fd73f72596bb84dd88bdbf298bc0edb50"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://eunseong2.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >생활정보샘</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.13 21:00
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=578&amp;commentId=27135421"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다 감사합니다</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_578"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(578, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/578"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 578); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[578] = true;
          findFragmentAndHighlight(578);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            [Rate Limit - 2] Token Bucket, Leaky Bucket 알고리즘
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">공부방</span>

            <span class="post-hero-date">2025. 8. 8. 18:00</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/577?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(577); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_mRIHwz"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_8_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_8"
                    name="aswift_8"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=2396791979&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=180&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=9&amp;uci=a!9&amp;fsb=1&amp;dtd=182"
                    data-google-container-id="a!9"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CPOl8JbqoI8DFU5DwgUdC3MXPw"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">[목차]</p>
            <p style="text-align: center" data-ke-size="size16">
              <span style="color: #9d9d9d"
                ><u
                  ><a
                    style="color: #9d9d9d"
                    href="https://mag1c.tistory.com/576"
                    >1. Rate Limit이란? 설계 시 주의사항</a
                  ></u
                ></span
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <b
                ><span style="color: #009a87"
                  ><u>2. Token Bucket, Leaky Bucket 알고리즘</u></span
                ></b
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <span style="color: #9d9d9d"
                ><a
                  style="color: #9d9d9d"
                  href="https://mag1c.tistory.com/578"
                  target="_blank"
                  rel="noopener"
                  ><u
                    >3. Fixed Window, Sliding Window Logging, Sliding Window
                    Counter 알고리즘</u
                  ></a
                ></span
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              지난 포스팅에선, Rate Limit이란 무엇이고 설계시 주의사항, 특히
              분산 환경에서의 Race Condition 처리에 대해 알아보았다.
            </p>
            <p data-ke-size="size16">
              이번 포스팅에선, Rate Limit을 구현할 수 있는 알고리즘 중 Bucket
              기반의 알고리즘들에 대해 살펴보려고 한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이번 포스팅을 포함한 Rate Limit에 관련된 모든 코드는 아래
              깃허브에서 확인할 수 있다.
            </p>
            <figure
              id="og_1754314679884"
              contenteditable="false"
              data-ke-type="opengraph"
              data-ke-align="alignCenter"
              data-og-type="object"
              data-og-title="GitHub - mag123c/rate-limiter"
              data-og-description="Contribute to mag123c/rate-limiter development by creating an account on GitHub."
              data-og-host="github.com"
              data-og-source-url="https://github.com/mag123c/rate-limiter"
              data-og-url="https://github.com/mag123c/rate-limiter"
              data-og-image="https://blog.kakaocdn.net/dna/xeJjN/hyZrqrXJYR/AAAAAAAAAAAAAAAAAAAAAMd9lSkasrV5jGa-zaANl_9wiuqSAA5Kh0uQg7xthlBu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=hR6H8KEsMzZMft8t5kScAJjVbl4%3D"
            >
              <a
                href="https://github.com/mag123c/rate-limiter"
                target="_blank"
                rel="noopener"
                data-source-url="https://github.com/mag123c/rate-limiter"
              >
                <div
                  class="og-image"
                  style="
                    background-image: url('https://blog.kakaocdn.net/dna/xeJjN/hyZrqrXJYR/AAAAAAAAAAAAAAAAAAAAAMd9lSkasrV5jGa-zaANl_9wiuqSAA5Kh0uQg7xthlBu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=hR6H8KEsMzZMft8t5kScAJjVbl4%3D');
                  "
                >
                  &nbsp;
                </div>
                <div class="og-text">
                  <p class="og-title" data-ke-size="size16">
                    GitHub - mag123c/rate-limiter
                  </p>
                  <p class="og-desc" data-ke-size="size16">
                    Contribute to mag123c/rate-limiter development by creating
                    an account on GitHub.
                  </p>
                  <p class="og-host" data-ke-size="size16">github.com</p>
                </div>
              </a>
            </figure>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Token Bucket</h2>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1828"
              data-origin-height="1226"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bnlHTf/btsPEFGwjpM/AAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=I7vaslt25mdMOEt6n24By2IaJnY%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bnlHTf/btsPEFGwjpM/AAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=I7vaslt25mdMOEt6n24By2IaJnY%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bnlHTf/btsPEFGwjpM/AAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=I7vaslt25mdMOEt6n24By2IaJnY%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1828"
                  height="1226"
                  data-origin-width="1828"
                  data-origin-height="1226"
                  data-phocus-index="18"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              토큰 버킷 알고리즘은 단순한데, 지정된 용량만큼의 토큰을 가지고
              있고, 사전 설정된 양의 토큰이 주기적으로 채워진다.
            </p>
            <p data-ke-size="size16">
              토큰이 꽉 찬 버킷에는 더이상 토큰이 추가되지 않으며, 버킷에 잔여
              토큰이 없을 경우 요청은 버려진다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">만들어보기</h3>
            <p data-ke-size="size16">바로 코드로 알아보자.</p>
            <pre
              id="code_1754311548329"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">interface</span> TokenBucketConfig {
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 버킷 최대 토큰 개수</span>
refillRate: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 초당 재충전 개수</span>
consumePerRequest: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 요청 당 소모량</span>
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              버킷의 최대 토큰 개수와, 초당 재충전 개수를 설정한다.
            </p>
            <p data-ke-size="size16">
              요청당 소모량도 커스터마이징 할 수 있지만 거의 모든 상황에서 1로
              사용되지 않을까 싶다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754311688697"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">interface</span> TokenBucket {
<span class="hljs-attr" style="">token</span>: <span class="hljs-built_in" style="">number</span>;
lastRefillTime: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 마지막 요청 = 충전 시간</span>
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              버킷 구현체 정의를 위한 인터페이스이다. lastRequestTime 처럼
              마지막 요청 시간값이 필요한데, 이는 요청 시 RateLimiter에서 현재
              시간과 비교하여 얼마나 재충전해줄지 계산하기 위해서이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이런 구현 방식은 요청이 들어올 때만 충전이 일어나므로, 일정 시간
              동안 요청이 없으면 충천이 지연될 수 있다.
            </p>
            <p data-ke-size="size16">
              이는 Token Bucket 방식의 자연스러운 특징이며, 평시 부하를 줄이는
              효과가 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754311521446"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">interface</span> RateLimiter {
tryConsume(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span>;
}

<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">TokenBucketRateLimiter</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">RateLimiter</span> </span>{
<span class="hljs-keyword" style="">private</span> buckets: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, TokenBucket&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> config: TokenBucketConfig</span>)</span> {}

tryConsume(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">void</span> {
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">this</span>.hasEnoughTokens(key)) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">`Rate Limit Exceeded for key: <span class="hljs-subst" style="">${key}</span>`</span>);
}
<span class="hljs-built_in" style="">this</span>.consumeTokens(key);
}

<span class="hljs-keyword" style="">private</span> hasEnoughTokens(key: <span class="hljs-built_in" style="">string</span>): <span class="hljs-built_in" style="">boolean</span> {
<span class="hljs-keyword" style="">let</span> bucket = <span class="hljs-built_in" style="">this</span>.buckets.get(key);
<span class="hljs-keyword" style="">if</span> (!bucket) {
<span class="hljs-built_in" style="">this</span>.createBucket(key);
bucket = <span class="hljs-built_in" style="">this</span>.buckets.get(key)!;
}
<span class="hljs-built_in" style="">this</span>.refillTokens(bucket);

<span class="hljs-keyword" style="">return</span> bucket.token &gt;= <span class="hljs-built_in" style="">this</span>.config.consumePerRequest;
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">consumeTokens</span>(<span class="hljs-params" style="">key: <span class="hljs-built_in" style="">string</span></span>)</span> {
<span class="hljs-keyword" style="">const</span> bucket = <span class="hljs-built_in" style="">this</span>.buckets.get(key)!;
bucket.token -= <span class="hljs-built_in" style="">this</span>.config.consumePerRequest;
bucket.lastRefillTime = <span class="hljs-built_in" style="">Date</span>.now();
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">refillTokens</span>(<span class="hljs-params" style="">bucket: TokenBucket</span>)</span> {
<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">const</span> elapsedMs = now - bucket.lastRefillTime;
<span class="hljs-keyword" style="">const</span> elapsedSeconds = elapsedMs / <span class="hljs-number" style="">1000</span>;

<span class="hljs-keyword" style="">const</span> tokensToAdd = elapsedSeconds * <span class="hljs-built_in" style="">this</span>.config.refillRate;
bucket.token = <span class="hljs-built_in" style="">Math</span>.min(bucket.token + tokensToAdd, <span class="hljs-built_in" style="">this</span>.config.capacity);

bucket.lastRefillTime = now;
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">createBucket</span>(<span class="hljs-params" style="">key: <span class="hljs-built_in" style="">string</span></span>)</span> {
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">this</span>.buckets.set(key, {
<span class="hljs-attr" style="">token</span>: <span class="hljs-built_in" style="">this</span>.config.capacity,
<span class="hljs-attr" style="">lastRefillTime</span>: <span class="hljs-number" style="">0</span>,
});
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              위 인터페이스들을 가지고 TokenBucketRateLimiter을 구현해보았다.
            </p>
            <p data-ke-size="size16">
              설명이 단순한 것 처럼 코드도 단순한데, 버킷은 요청 키값 : 토큰
              개수와 마지막 요청 시간값 객체의 단순한 형태로 구성되어있다.
            </p>
            <p data-ke-size="size16">
              RateLimiter에서 요청이 들어올 때 마다 잔여 토큰을 확인하고 요청을
              처리하거나 버린다. 매 요청마다 정확한 토큰 수를 계산하기 위해 잔여
              토큰 확인 시점에 경과 시간만큼 토큰을 충전하는&nbsp; 방식을
              사용한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <blockquote data-ke-style="style2">
              필요하다면, 오래된 key를 정리하는 LRU나 TTL 기반의 Map을 사용하여
              메모리를 더 최적화할 수 있다.
            </blockquote>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              토큰 버킷 알고리즘의 특징과 구현 코드에서 알 수 있듯이, 명확하게
              장점이 보이는데,
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>구현이 쉽다.</li>
              <li>
                메모리 사용을 적게 한다. (키의 복잡성은 얼마든지 줄일 수 있다.
                해싱, 키 압축 등을 통해서)
              </li>
              <li>
                짧은 시간에 집중되는 트래픽 처리가 가능하다. (토큰이 버킷에
                남아있기만 하다면, 버킷 수만큼의 burst가 가능)
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              하지만, 최적의 값을 찾는 것이 어렵고 튜닝이 어렵다는 점이 단점이
              있다.
            </p>
            <p data-ke-size="size16">
              A/B 테스트를 통해 최적의 임계치를 찾아야하고, 엄격하게 제한할 경우
              정상 사용자도 금방 차단될 수 있으며, 느슨하게 제한할 경우 서버
              과부하의 위험이 발생할 것이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">통합 테스트</h3>
            <p data-ke-size="size16">통합 테스트도 구성해보았다.</p>
            <p data-ke-size="size16">
              실제 사용 환경을 테스트해보기 위해 express로 임시 서버와
              rateLimiter 미들웨어를 구축해서 테스트를 진행했다.<br /><br />
            </p>
            <p data-ke-size="size16">
              <a
                href="https://github.com/mag123c/rate-limiter/tree/main/src/token-bucket"
                target="_blank"
                rel="noopener"
                >(express 서버, 미들웨어 등의 전체 코드는 깃허브에서 확인할 수
                있다.)</a
              >
            </p>
            <pre
              id="code_1754314104644"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">import</span> request <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"supertest"</span>;
<span class="hljs-keyword" style="">import</span> { createApp } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../../app"</span>;
<span class="hljs-keyword" style="">import</span> { createTokenBucketMiddleware } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../middleware"</span>;

describe(<span class="hljs-string" style="">"Token Bucket Rate Limiter Integration"</span>, <span class="hljs-function" style="">() =&gt;</span> {
it(<span class="hljs-string" style="">"토큰 사용량만큼 요청을 처리한다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">3</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-comment" style="">// 용량만큼 요청 성공</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}

<span class="hljs-comment" style="">// 토큰 소진 시 429</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response.body.error).toBe(<span class="hljs-string" style="">"Too Many Requests"</span>);
});

it(<span class="hljs-string" style="">"다른 IP 주소는 독립적인 토큰 버킷을 가진다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">0.1</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-comment" style="">// IP 1.1.1.1로 2번 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);

<span class="hljs-comment" style="">// IP 2.2.2.2로 2번 요청</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);

<span class="hljs-comment" style="">// 각 IP별로 토큰 소진 확인</span>
<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>);

expect(response1.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"토큰이 재충전되면 다시 요청을 보낼 수 있다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">10</span>, <span class="hljs-comment" style="">// 초당 10개 충전</span>
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);

<span class="hljs-comment" style="">// 즉시 요청하면 실패</span>
<span class="hljs-keyword" style="">let</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// 100ms 후 1개 토큰 충전됨</span>
<span class="hljs-keyword" style="">await</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Promise</span>(<span class="hljs-function" style="">(<span class="hljs-params" style="">resolve</span>) =&gt;</span> <span class="hljs-built_in" style="">setTimeout</span>(resolve, <span class="hljs-number" style="">100</span>));
response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"동시 요청 처리 시 정확한 토큰 소비"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> capacity = <span class="hljs-number" style="">50</span>;
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
capacity,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">0</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 50개 동시 요청</span>
<span class="hljs-keyword" style="">const</span> promises = <span class="hljs-built_in" style="">Array</span>(capacity)
.fill(<span class="hljs-literal" style="">null</span>)
.map(<span class="hljs-function" style="">() =&gt;</span> request(app).get(<span class="hljs-string" style="">"/"</span>));

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);
<span class="hljs-keyword" style="">const</span> successCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">200</span>).length;
<span class="hljs-keyword" style="">const</span> failCount = responses.filter(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">429</span>).length;

expect(successCount).toBe(capacity);
expect(failCount).toBe(<span class="hljs-number" style="">0</span>);

<span class="hljs-comment" style="">// 추가 요청은 실패</span>
<span class="hljs-keyword" style="">const</span> extraResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(extraResponse.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"커스텀 키 생성기 사용 시 올바르게 동작"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware(
{
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">0</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
},
{
<span class="hljs-attr" style="">keyGenerator</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.headers[<span class="hljs-string" style="">"api-key"</span>]?.toString() || <span class="hljs-string" style="">"anonymous"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// API 키별로 독립적인 버킷</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);

<span class="hljs-comment" style="">// 각 키별로 토큰 소진 확인</span>
<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);

expect(response1.status).toBe(<span class="hljs-number" style="">429</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// anonymous 키는 별도 버킷</span>
<span class="hljs-keyword" style="">const</span> anonymousResponse = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(anonymousResponse.status).toBe(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"burst traffic 처리 가능 (Token Bucket의 장점)"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">100</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">10</span>, <span class="hljs-comment" style="">// 초당 10개</span>
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 한 번에 100개 요청 (burst) 가능</span>
<span class="hljs-keyword" style="">const</span> promises = <span class="hljs-built_in" style="">Array</span>(<span class="hljs-number" style="">100</span>)
.fill(<span class="hljs-literal" style="">null</span>)
.map(<span class="hljs-function" style="">() =&gt;</span> request(app).get(<span class="hljs-string" style="">"/"</span>));

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);
<span class="hljs-keyword" style="">const</span> allSuccess = responses.every(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status === <span class="hljs-number" style="">200</span>);
expect(allSuccess).toBe(<span class="hljs-literal" style="">true</span>);

<span class="hljs-comment" style="">// 토큰 소진 후 즉시 추가 요청은 실패</span>
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"consumePerRequest 옵션이 올바르게 동작"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">10</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">0</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">5</span>, <span class="hljs-comment" style="">// 요청당 5개 토큰 소비</span>
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 2번만 요청 가능 (10 / 5 = 2)</span>
<span class="hljs-keyword" style="">const</span> response1 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">const</span> response2 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">const</span> response3 = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);

expect(response1.status).toBe(<span class="hljs-number" style="">200</span>);
expect(response2.status).toBe(<span class="hljs-number" style="">200</span>);
expect(response3.status).toBe(<span class="hljs-number" style="">429</span>);
});

it(<span class="hljs-string" style="">"skip 옵션 사용 시 특정 요청은 토큰 소비하지 않음"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createTokenBucketMiddleware(
{
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">refillRate</span>: <span class="hljs-number" style="">0</span>,
<span class="hljs-attr" style="">consumePerRequest</span>: <span class="hljs-number" style="">1</span>,
},
{
<span class="hljs-attr" style="">skip</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.path === <span class="hljs-string" style="">"/health"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
<span class="hljs-attr" style="">setupRoutes</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">app</span>) =&gt;</span> {
app.get(<span class="hljs-string" style="">"/health"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> res.json({ <span class="hljs-attr" style="">status</span>: <span class="hljs-string" style="">"ok"</span> }));
},
});

<span class="hljs-comment" style="">// health check는 토큰 소비 안함</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">10</span>; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/health"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}

<span class="hljs-comment" style="">// 일반 요청은 토큰 소비</span>
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">429</span>);
});
});</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="928"
              data-origin-height="452"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bazBD1/btsPGFeZD0l/AAAAAAAAAAAAAAAAAAAAADU6ky383BtSwEN1HbFrfiitr2ooLC1ZW4z70cIBd0Sl/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=DPQSVrvSfFsN%2FYUZgI1kp7mM8z4%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bazBD1/btsPGFeZD0l/AAAAAAAAAAAAAAAAAAAAADU6ky383BtSwEN1HbFrfiitr2ooLC1ZW4z70cIBd0Sl/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=DPQSVrvSfFsN%2FYUZgI1kp7mM8z4%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bazBD1/btsPGFeZD0l/AAAAAAAAAAAAAAAAAAAAADU6ky383BtSwEN1HbFrfiitr2ooLC1ZW4z70cIBd0Sl/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=DPQSVrvSfFsN%2FYUZgI1kp7mM8z4%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbazBD1%2FbtsPGFeZD0l%2FAAAAAAAAAAAAAAAAAAAAADU6ky383BtSwEN1HbFrfiitr2ooLC1ZW4z70cIBd0Sl%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DDPQSVrvSfFsN%252FYUZgI1kp7mM8z4%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="928"
                  height="452"
                  data-origin-width="928"
                  data-origin-height="452"
                  data-phocus-index="19"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Leaky Bucket</h2>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="2162"
              data-origin-height="784"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/meRDS/btsPF9mylH1/AAAAAAAAAAAAAAAAAAAAAIXYa8SbMbNnzMqWvLZGIa9bbB9KAM44Vrykn-3DZrc3/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TsZJA1JQo0DVLIJOUmNWWUfgXZ0%3D"
                data-phocus="https://blog.kakaocdn.net/dna/meRDS/btsPF9mylH1/AAAAAAAAAAAAAAAAAAAAAIXYa8SbMbNnzMqWvLZGIa9bbB9KAM44Vrykn-3DZrc3/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TsZJA1JQo0DVLIJOUmNWWUfgXZ0%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/meRDS/btsPF9mylH1/AAAAAAAAAAAAAAAAAAAAAIXYa8SbMbNnzMqWvLZGIa9bbB9KAM44Vrykn-3DZrc3/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TsZJA1JQo0DVLIJOUmNWWUfgXZ0%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FmeRDS%2FbtsPF9mylH1%2FAAAAAAAAAAAAAAAAAAAAAIXYa8SbMbNnzMqWvLZGIa9bbB9KAM44Vrykn-3DZrc3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DTsZJA1JQo0DVLIJOUmNWWUfgXZ0%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="2162"
                  height="784"
                  data-origin-width="2162"
                  data-origin-height="784"
                  data-phocus-index="20"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">
              Leaky Bucket 알고리즘은, 요청 처리율이 고정되어있는
              <span style="color: #ee2323"><i>비동기</i></span> 방식으로
              <span style="color: #ee2323"><i>큐</i></span
              >를 사용한다.
            </p>
            <p data-ke-size="size16">
              큐에 작업을 넣어놓고 버킷에 설정된 처리율 만큼 주기 별로
              처리하는데, 큐의 크기를 제한해서 사용하고 고정된 처리율을 갖고
              있기 때문에 안정적인 처리가 가능하다. 말도 안되게 큐의 사이즈를
              늘려놓지 않는 이상, 적절하게 튜닝된 큐의 작업들을 안정적으로
              처리할 수 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              얼핏 들어보면 메시지 큐와 유사한데, 실제로도 그렇다.
            </p>
            <p data-ke-size="size16">
              실시간성이 부족하고 단시간에 많은 트래픽이 몰리는 경우에 적합하지
              않다. 큐 사이즈를 초과하는 요청은 전부 버려지기 때문이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">만들어보기</h3>
            <p data-ke-size="size16">
              장단점을 살펴봤으니, 마찬가지로 코드를 짜봤다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754314289249"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">interface</span> LeakyBucketConfig {
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 큐의 최대 크기</span>
leakRate: <span class="hljs-built_in" style="">number</span>; <span class="hljs-comment" style="">// 초당 처리 개수</span>
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              앞서 말한 것 처럼, 큐의 최대 크기와 초당 처리 개수를 지정한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754314339083"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">interface</span> AsyncRateLimiter {
enqueue(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">callback</span>: <span class="hljs-function" style="">() =&gt;</span> <span class="hljs-built_in" style="">void</span>): <span class="hljs-built_in" style="">Promise</span>&lt;<span class="hljs-built_in" style="">void</span>&gt;;
}

<span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">LeakyBucketRateLimiter</span> <span class="hljs-title" style="">implements</span> <span class="hljs-title" style="">AsyncRateLimiter</span> </span>{
<span class="hljs-keyword" style="">private</span> buckets: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, Queue&lt;<span class="hljs-function" style="">() =&gt;</span> <span class="hljs-built_in" style="">void</span>&gt;&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();
<span class="hljs-keyword" style="">private</span> intervals: <span class="hljs-built_in" style="">Map</span>&lt;<span class="hljs-built_in" style="">string</span>, NodeJS.Timeout&gt; = <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Map</span>();

<span class="hljs-function" style=""><span class="hljs-title" style="">constructor</span>(<span class="hljs-params" style=""><span class="hljs-keyword" style="">private</span> config: LeakyBucketConfig</span>)</span> {}

<span class="hljs-keyword" style="">async</span> enqueue(key: <span class="hljs-built_in" style="">string</span>, <span class="hljs-attr" style="">callback</span>: <span class="hljs-function" style="">() =&gt;</span> <span class="hljs-built_in" style="">void</span>): <span class="hljs-built_in" style="">Promise</span>&lt;<span class="hljs-built_in" style="">void</span>&gt; {
<span class="hljs-keyword" style="">let</span> queue = <span class="hljs-built_in" style="">this</span>.buckets.get(key);
<span class="hljs-keyword" style="">if</span> (!queue) {
queue = <span class="hljs-keyword" style="">new</span> Queue&lt;<span class="hljs-function" style="">() =&gt;</span> <span class="hljs-built_in" style="">void</span>&gt;();
<span class="hljs-built_in" style="">this</span>.buckets.set(key, queue);
<span class="hljs-built_in" style="">this</span>.startProcessing(key);
}

<span class="hljs-keyword" style="">if</span> (queue.size() &gt;= <span class="hljs-built_in" style="">this</span>.config.capacity) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Error</span>(<span class="hljs-string" style="">"Rate Limit Exceed"</span>);
}

queue.add(callback);
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-function" style=""><span class="hljs-title" style="">startProcessing</span>(<span class="hljs-params" style="">key: <span class="hljs-built_in" style="">string</span></span>)</span> {
<span class="hljs-keyword" style="">const</span> interval = <span class="hljs-built_in" style="">setInterval</span>(<span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">const</span> queue = <span class="hljs-built_in" style="">this</span>.buckets.get(key);
<span class="hljs-keyword" style="">if</span> (queue &amp;&amp; !queue.isEmpty()) {
<span class="hljs-keyword" style="">const</span> callback = queue.poll();
callback?.();
}
}, <span class="hljs-number" style="">1000</span> / <span class="hljs-built_in" style="">this</span>.config.leakRate);

<span class="hljs-built_in" style="">this</span>.intervals.set(key, interval);
}

<span class="hljs-function" style=""><span class="hljs-title" style="">cleanup</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-built_in" style="">this</span>.intervals.forEach(<span class="hljs-function" style=""><span class="hljs-params" style="">interval</span> =&gt;</span> <span class="hljs-built_in" style="">clearInterval</span>(interval));
<span class="hljs-built_in" style="">this</span>.intervals.clear();
<span class="hljs-built_in" style="">this</span>.buckets.clear();
}
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              비동기로 동작하게끔 구성해보았다. 여기서는 간단하게 구현해보기
              위해서 setInterval을 사용했는데 실제로는 컨텍스트가 완전 분리되어
              동작하지 않을까 싶다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">통합 테스트</h3>
            <p data-ke-size="size16">
              Token Bucket과 마찬가지로 통합 테스트를 작성해보았는데, 전체
              코드나 다른 설정 코드들은<a
                href="https://github.com/mag123c/rate-limiter/tree/main/src/leaky-bucket"
                target="_blank"
                rel="noopener"
              >
                깃허브를 참조하길 바란다.</a
              >
              (꾸벅)
            </p>
            <pre
              id="code_1754314699913"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">import</span> request <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"supertest"</span>;
<span class="hljs-keyword" style="">import</span> { createApp } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../../app"</span>;
<span class="hljs-keyword" style="">import</span> { createLeakyBucketMiddleware } <span class="hljs-keyword" style="">from</span> <span class="hljs-string" style="">"../middleware"</span>;

describe(<span class="hljs-string" style="">"Leaky Bucket Rate Limiter Integration"</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">let</span> rateLimiter: <span class="hljs-built_in" style="">any</span>;

afterEach(<span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-comment" style="">// cleanup을 호출하여 interval 정리</span>
<span class="hljs-keyword" style="">if</span> (rateLimiter &amp;&amp; rateLimiter.limiter &amp;&amp; rateLimiter.limiter.cleanup) {
rateLimiter.limiter.cleanup();
}
jest.clearAllTimers();
});

it(<span class="hljs-string" style="">"큐 용량 내에서는 요청이 대기 후 처리됨"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">3</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">10</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-keyword" style="">const</span> promises = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
promises.push(request(app).get(<span class="hljs-string" style="">"/"</span>));
}

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);
responses.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style="">response</span>) =&gt;</span> {
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
});
});

it(<span class="hljs-string" style="">"큐 용량을 초과하면 즉시 429 반환"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">1</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-keyword" style="">const</span> promises = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
promises.push(
request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.then(<span class="hljs-function" style="">(<span class="hljs-params" style="">res</span>) =&gt;</span> res)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);
}

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);

<span class="hljs-comment" style="">// 3번째는 큐가 가득 차서 즉시 429</span>
<span class="hljs-keyword" style="">const</span> statusCodes = responses.map(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status).sort();
expect(statusCodes).toEqual([<span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">429</span>]);
});

it(<span class="hljs-string" style="">"다른 IP 주소는 독립적인 큐를 가진다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,  <span class="hljs-comment" style="">// 각 IP당 큐 용량 2</span>
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">10</span>,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-comment" style="">// 같은 IP(1.1.1.1)에서 3번 요청</span>
<span class="hljs-keyword" style="">const</span> ip1Requests = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
ip1Requests.push(
request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"1.1.1.1"</span>)
.then(<span class="hljs-function" style="">(<span class="hljs-params" style="">res</span>) =&gt;</span> res)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);
}

<span class="hljs-comment" style="">// 다른 IP(2.2.2.2)에서 2번 요청</span>
<span class="hljs-keyword" style="">const</span> ip2Requests = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">2</span>; i++) {
ip2Requests.push(
request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"X-Forwarded-For"</span>, <span class="hljs-string" style="">"2.2.2.2"</span>)
);
}

<span class="hljs-keyword" style="">const</span> [ip1Results, ip2Results] = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all([
<span class="hljs-built_in" style="">Promise</span>.all(ip1Requests),
<span class="hljs-built_in" style="">Promise</span>.all(ip2Requests),
]);

<span class="hljs-comment" style="">// IP 1.1.1.1: 2개는 성공, 1개는 429</span>
<span class="hljs-keyword" style="">const</span> ip1StatusCodes = ip1Results.map(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status).sort();
expect(ip1StatusCodes).toEqual([<span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">429</span>]);

<span class="hljs-comment" style="">// IP 2.2.2.2: 모두 성공</span>
ip2Results.forEach(<span class="hljs-function" style="">(<span class="hljs-params" style="">result</span>) =&gt;</span> {
expect(result.status).toBe(<span class="hljs-number" style="">200</span>);
});
});

it(<span class="hljs-string" style="">"처리 속도에 따라 순차적으로 처리됨"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> processedTimes: <span class="hljs-built_in" style="">number</span>[] = [];

<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">10</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">5</span>, <span class="hljs-comment" style="">// 초당 5개 처리 (200ms마다 1개)</span>
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
<span class="hljs-attr" style="">setupRoutes</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">app</span>) =&gt;</span> {
app.get(<span class="hljs-string" style="">"/track"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> {
processedTimes.push(<span class="hljs-built_in" style="">Date</span>.now());
res.json({ <span class="hljs-attr" style="">processed</span>: <span class="hljs-literal" style="">true</span> });
});
},
});

<span class="hljs-keyword" style="">const</span> promises = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
<span class="hljs-keyword" style="">await</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">Promise</span>(<span class="hljs-function" style="">(<span class="hljs-params" style="">resolve</span>) =&gt;</span> <span class="hljs-built_in" style="">setTimeout</span>(resolve, <span class="hljs-number" style="">10</span>));
promises.push(request(app).get(<span class="hljs-string" style="">"/track"</span>));
}

<span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);

<span class="hljs-comment" style="">// 처리 간격 확인</span>
expect(processedTimes).toHaveLength(<span class="hljs-number" style="">3</span>);

<span class="hljs-keyword" style="">if</span> (processedTimes.length &gt;= <span class="hljs-number" style="">2</span>) {
<span class="hljs-keyword" style="">const</span> gap1 = processedTimes[<span class="hljs-number" style="">1</span>] - processedTimes[<span class="hljs-number" style="">0</span>];
expect(gap1).toBeGreaterThanOrEqual(<span class="hljs-number" style="">150</span>);
expect(gap1).toBeLessThan(<span class="hljs-number" style="">250</span>);
}

<span class="hljs-keyword" style="">if</span> (processedTimes.length &gt;= <span class="hljs-number" style="">3</span>) {
<span class="hljs-keyword" style="">const</span> gap2 = processedTimes[<span class="hljs-number" style="">2</span>] - processedTimes[<span class="hljs-number" style="">1</span>];
expect(gap2).toBeGreaterThanOrEqual(<span class="hljs-number" style="">150</span>);
expect(gap2).toBeLessThan(<span class="hljs-number" style="">250</span>);
}
});

it(<span class="hljs-string" style="">"커스텀 키 생성기 사용 시 올바르게 동작"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware(
{
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">10</span>,
},
{
<span class="hljs-attr" style="">keyGenerator</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span>
req.headers[<span class="hljs-string" style="">"api-key"</span>]?.toString() || <span class="hljs-string" style="">"anonymous"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
});

<span class="hljs-comment" style="">// 각 API 키로 2번씩 요청</span>
<span class="hljs-keyword" style="">const</span> key1Requests = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">2</span>; i++) {
key1Requests.push(
request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key1"</span>)
.then(<span class="hljs-function" style="">(<span class="hljs-params" style="">res</span>) =&gt;</span> res)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);
}

<span class="hljs-keyword" style="">const</span> key2Request = request(app).get(<span class="hljs-string" style="">"/"</span>).set(<span class="hljs-string" style="">"api-key"</span>, <span class="hljs-string" style="">"key2"</span>);

<span class="hljs-keyword" style="">const</span> [key1Results, key2Result] = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all([
<span class="hljs-built_in" style="">Promise</span>.all(key1Requests),
key2Request,
]);

<span class="hljs-comment" style="">// key1: 첫 번째는 성공, 두 번째는 429</span>
expect(key1Results[<span class="hljs-number" style="">0</span>].status).toBe(<span class="hljs-number" style="">200</span>);
expect(key1Results[<span class="hljs-number" style="">1</span>].status).toBe(<span class="hljs-number" style="">429</span>);

<span class="hljs-comment" style="">// key2: 성공</span>
expect(key2Result.status).toBe(<span class="hljs-number" style="">200</span>);
});

it(<span class="hljs-string" style="">"skip 옵션 사용 시 특정 요청은 큐에 추가되지 않음"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware(
{
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">2</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">1</span>,
},
{
<span class="hljs-attr" style="">skip</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req</span>) =&gt;</span> req.path === <span class="hljs-string" style="">"/health"</span>,
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
<span class="hljs-attr" style="">setupRoutes</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">app</span>) =&gt;</span> {
app.get(<span class="hljs-string" style="">"/health"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> res.json({ <span class="hljs-attr" style="">status</span>: <span class="hljs-string" style="">"ok"</span> }));
},
});

<span class="hljs-comment" style="">// health check는 큐에 추가 안됨</span>
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">10</span>; i++) {
<span class="hljs-keyword" style="">const</span> response = <span class="hljs-keyword" style="">await</span> request(app).get(<span class="hljs-string" style="">"/health"</span>);
expect(response.status).toBe(<span class="hljs-number" style="">200</span>);
}

<span class="hljs-comment" style="">// 일반 요청은 큐에 추가 (3개 요청, 2개만 큐에 들어감)</span>
<span class="hljs-keyword" style="">const</span> normalRequests = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">3</span>; i++) {
normalRequests.push(
request(app)
.get(<span class="hljs-string" style="">"/"</span>)
.then(<span class="hljs-function" style="">(<span class="hljs-params" style="">res</span>) =&gt;</span> res)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);
}

<span class="hljs-keyword" style="">const</span> results = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(normalRequests);
<span class="hljs-keyword" style="">const</span> statusCodes = results.map(<span class="hljs-function" style="">(<span class="hljs-params" style="">r</span>) =&gt;</span> r.status).sort();
expect(statusCodes).toEqual([<span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">429</span>]);
});

it(<span class="hljs-string" style="">"onLimitReached 콜백이 호출된다"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">let</span> callbackCalled = <span class="hljs-literal" style="">false</span>;
<span class="hljs-keyword" style="">let</span> limitedPath = <span class="hljs-string" style="">""</span>;

<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware(
{
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">1</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">100</span>, <span class="hljs-comment" style="">// 빠른 처리</span>
},
{
<span class="hljs-attr" style="">onLimitReached</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">req, res</span>) =&gt;</span> {
callbackCalled = <span class="hljs-literal" style="">true</span>;
limitedPath = req.path;
res.status(<span class="hljs-number" style="">429</span>).json({ <span class="hljs-attr" style="">error</span>: <span class="hljs-string" style="">"Queue is full"</span> });
},
}
);

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 두 요청을 거의 동시에 보내서 두 번째가 거부되도록</span>
<span class="hljs-keyword" style="">const</span> promises = [];
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">0</span>; i &lt; <span class="hljs-number" style="">2</span>; i++) {
promises.push(
request(app)
.get(<span class="hljs-string" style="">"/api/test"</span>)
.then(<span class="hljs-function" style="">(<span class="hljs-params" style="">res</span>) =&gt;</span> res)
.catch(<span class="hljs-function" style="">(<span class="hljs-params" style="">err</span>) =&gt;</span> err.response)
);
}

<span class="hljs-keyword" style="">const</span> results = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);

expect(callbackCalled).toBe(<span class="hljs-literal" style="">true</span>);
expect(limitedPath).toBe(<span class="hljs-string" style="">"/api/test"</span>);

<span class="hljs-comment" style="">// 하나는 200, 하나는 429</span>
<span class="hljs-keyword" style="">const</span> statusCodes = results.map(<span class="hljs-function" style=""><span class="hljs-params" style="">r</span> =&gt;</span> r.status).sort();
expect(statusCodes).toEqual([<span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">429</span>]);

<span class="hljs-keyword" style="">const</span> rejectedResponse = results.find(<span class="hljs-function" style=""><span class="hljs-params" style="">r</span> =&gt;</span> r.status === <span class="hljs-number" style="">429</span>);
expect(rejectedResponse.body.error).toBe(<span class="hljs-string" style="">"Queue is full"</span>);
}, <span class="hljs-number" style="">10000</span>);

it(<span class="hljs-string" style="">"다양한 HTTP 메서드에 대해 동일하게 작동"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">5</span>,
<span class="hljs-attr" style="">leakRate</span>: <span class="hljs-number" style="">100</span>, <span class="hljs-comment" style="">// 빠른 처리</span>
});

<span class="hljs-keyword" style="">const</span> app = createApp({ <span class="hljs-attr" style="">middlewares</span>: [rateLimiter] });

<span class="hljs-comment" style="">// 6개 요청 (다양한 메서드 5개 + 추가 1개)</span>
<span class="hljs-keyword" style="">const</span> promises = [
request(app).get(<span class="hljs-string" style="">"/"</span>),
request(app).post(<span class="hljs-string" style="">"/"</span>),
request(app).put(<span class="hljs-string" style="">"/"</span>),
request(app).delete(<span class="hljs-string" style="">"/"</span>),
request(app).patch(<span class="hljs-string" style="">"/"</span>),
request(app).get(<span class="hljs-string" style="">"/"</span>),  <span class="hljs-comment" style="">// 6번째 요청</span>
].map(<span class="hljs-function" style=""><span class="hljs-params" style="">p</span> =&gt;</span> p.then(<span class="hljs-function" style=""><span class="hljs-params" style="">res</span> =&gt;</span> res).catch(<span class="hljs-function" style=""><span class="hljs-params" style="">err</span> =&gt;</span> err.response));

<span class="hljs-keyword" style="">const</span> responses = <span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);
<span class="hljs-keyword" style="">const</span> statusCodes = responses.map(<span class="hljs-function" style="">(<span class="hljs-params" style="">r: <span class="hljs-built_in" style="">any</span></span>) =&gt;</span> r.status).sort();

<span class="hljs-comment" style="">// 5개는 큐에 들어가고, 1개는 429</span>
expect(statusCodes).toEqual([<span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">200</span>, <span class="hljs-number" style="">429</span>]);
}, <span class="hljs-number" style="">10000</span>);

it(<span class="hljs-string" style="">"일정한 속도로 요청 처리 (Leaky Bucket의 특징)"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> processedTimes: <span class="hljs-built_in" style="">number</span>[] = [];
<span class="hljs-keyword" style="">const</span> leakRate = <span class="hljs-number" style="">2</span>; <span class="hljs-comment" style="">// 초당 2개 처리</span>

<span class="hljs-keyword" style="">const</span> rateLimiter = createLeakyBucketMiddleware({
<span class="hljs-attr" style="">capacity</span>: <span class="hljs-number" style="">10</span>,
leakRate,
});

<span class="hljs-keyword" style="">const</span> app = createApp({
<span class="hljs-attr" style="">middlewares</span>: [rateLimiter],
<span class="hljs-attr" style="">setupRoutes</span>: <span class="hljs-function" style="">(<span class="hljs-params" style="">app</span>) =&gt;</span> {
app.get(<span class="hljs-string" style="">"/steady"</span>, <span class="hljs-function" style="">(<span class="hljs-params" style="">_req, res</span>) =&gt;</span> {
processedTimes.push(<span class="hljs-built_in" style="">Date</span>.now());
res.json({ <span class="hljs-attr" style="">processed</span>: <span class="hljs-literal" style="">true</span> });
});
},
});

<span class="hljs-comment" style="">// 5개 요청을 한 번에 보냄</span>
<span class="hljs-keyword" style="">const</span> promises = <span class="hljs-built_in" style="">Array</span>(<span class="hljs-number" style="">5</span>)
.fill(<span class="hljs-literal" style="">null</span>)
.map(<span class="hljs-function" style="">() =&gt;</span> request(app).get(<span class="hljs-string" style="">"/steady"</span>));

<span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">Promise</span>.all(promises);

<span class="hljs-comment" style="">// 처리 시간 간격 확인 (약 500ms 간격)</span>
expect(processedTimes).toHaveLength(<span class="hljs-number" style="">5</span>);

<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">let</span> i = <span class="hljs-number" style="">1</span>; i &lt; processedTimes.length; i++) {
<span class="hljs-keyword" style="">const</span> gap = processedTimes[i] - processedTimes[i - <span class="hljs-number" style="">1</span>];
expect(gap).toBeGreaterThanOrEqual(<span class="hljs-number" style="">400</span>); <span class="hljs-comment" style="">// 여유 있게 400ms</span>
expect(gap).toBeLessThan(<span class="hljs-number" style="">600</span>);
}
});
});</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1036"
              data-origin-height="344"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/6NTJs/btsPIv93Sqm/AAAAAAAAAAAAAAAAAAAAAFKGMffk4T0V-F6mx31Yr7-NwcaHoSXa2f5QgwzMcwtW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=GRrdusNK7GsRqffWhd4lJXble1w%3D"
                data-phocus="https://blog.kakaocdn.net/dna/6NTJs/btsPIv93Sqm/AAAAAAAAAAAAAAAAAAAAAFKGMffk4T0V-F6mx31Yr7-NwcaHoSXa2f5QgwzMcwtW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=GRrdusNK7GsRqffWhd4lJXble1w%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/6NTJs/btsPIv93Sqm/AAAAAAAAAAAAAAAAAAAAAFKGMffk4T0V-F6mx31Yr7-NwcaHoSXa2f5QgwzMcwtW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=GRrdusNK7GsRqffWhd4lJXble1w%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F6NTJs%2FbtsPIv93Sqm%2FAAAAAAAAAAAAAAAAAAAAAFKGMffk4T0V-F6mx31Yr7-NwcaHoSXa2f5QgwzMcwtW%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DGRrdusNK7GsRqffWhd4lJXble1w%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1036"
                  height="344"
                  data-origin-width="1036"
                  data-origin-height="344"
                  data-phocus-index="21"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">정리</h2>
            <table
              style="border-collapse: collapse; width: 100%"
              border="1"
              data-end="1526"
              data-start="1021"
              data-ke-align="alignLeft"
              data-ke-style="style13"
            >
              <tbody>
                <tr>
                  <td>특징</td>
                  <td>Tocken Bucket</td>
                  <td>Leaky Bucket</td>
                </tr>
                <tr data-end="1303" data-start="1220">
                  <td data-col-size="sm" data-end="1237" data-start="1220">
                    Burst 처리
                  </td>
                  <td data-col-size="sm" data-end="1271" data-start="1237">
                    가능 (idle 후 burst 가능)
                  </td>
                  <td data-col-size="sm" data-end="1303" data-start="1271">
                    불가능 (고정 속도 처리)
                  </td>
                </tr>
                <tr data-end="1388" data-start="1304">
                  <td data-col-size="sm" data-end="1319" data-start="1304">
                    처리 속도
                  </td>
                  <td data-col-size="sm" data-end="1351" data-start="1319">
                    가변 (토큰 수만큼)
                  </td>
                  <td data-col-size="sm" data-end="1388" data-start="1351">
                    고정 (leakRate 기준)
                  </td>
                </tr>
                <tr data-end="1460" data-start="1389">
                  <td data-col-size="sm" data-end="1401" data-start="1389">
                    트래픽 완화 방식
                  </td>
                  <td data-col-size="sm" data-end="1431" data-start="1401">
                    충전된 토큰 기반 소비
                  </td>
                  <td data-col-size="sm" data-end="1460" data-start="1431">
                    큐에 요청 저장 후 일정 속도 처리
                  </td>
                </tr>
                <tr data-end="1526" data-start="1461">
                  <td data-col-size="sm" data-end="1475" data-start="1461">
                    적합한 상황
                  </td>
                  <td data-col-size="sm" data-end="1500" data-start="1475">
                    단시간 요청 집중 허용, 유저 행동 기반
                  </td>
                  <td data-col-size="sm" data-end="1526" data-start="1500">
                    일정 처리량 유지, 백오피스 안정화 등
                  </td>
                </tr>
              </tbody>
            </table>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              Token Bucket과 Leaky Bucket 알고리즘에 대해 다뤘다.
            </p>
            <p data-ke-size="size16">
              두 방식은 각각 특성이 다르기 때문에 API의 특성, 사용자 행동
              패턴이나 인프라 구조에 따라 적절하게 선택해야 한다.
            </p>
            <p data-ke-size="size16">
              다음 글에서는 Fixed Window, Sliding Window 알고리즘에 대해
              살펴보고, NestJS의 Throttler은 어떤 알고리즘을 채택하여 어떻게
              구현되어 있는지 한 번 살펴보려고 한다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">References.</h2>
            <p data-ke-size="size16">
              <a
                href="https://product.kyobobook.co.kr/detail/S000001033116"
                target="_blank"
                rel="noopener"
                >알렉스 쉬 - 가상면접 사례로 배우는 대규모 시스템 설계
                기초[1]</a
              ><br /><a
                href="https://www.geeksforgeeks.org/system-design/rate-limiting-in-system-design/"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://www.geeksforgeeks.org/system-design/rate-limiting-in-system-design/</a
              >
            </p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_piqu9I"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_9_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_9"
                    name="aswift_9"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=99557255&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=186&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=10&amp;uci=a!a&amp;fsb=1&amp;dtd=189"
                    data-google-container-id="a!a"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CPSY8JbqoI8DFdZQwgUdjFgLFQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 577,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-577"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbnlHTf%2FbtsPEFGwjpM%2FAAAAAAAAAAAAAAAAAAAAABNIoRBTZMWHQ0iTxyvjmJxnzo5RnoIHn9vbeZC4MO2n%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DI7vaslt25mdMOEt6n24By2IaJnY%253D"
                  data-title="[Rate Limit - 2] Token Bucket, Leaky Bucket 알고리즘"
                  data-description="[목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 지난 포스팅에선, Rate Limit이란 무엇이고 설계시 주의사항, 특히 분산 환경에서의 Race Condition 처리에 대해 알아보았다.이번 포스팅에선, Rate Limit을 구현할 수 있는 알고리즘 중 Bucket 기반의 알고리즘들에 대해 살펴보려고 한다. 이번 포스팅을 포함한 Rate Limit에 관련된 모든 코드는 아래 깃허브에서 확인할 수 있다. GitHub - mag123c/rate-limiterContribute to mag123c/rate-limite.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/577"
                  data-relative-pc-url="/577"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="577"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="577"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a href="/tag/Leaky%20Bucket">Leaky Bucket</a>,
          <a href="/tag/NestJS%20Throttler">NestJS Throttler</a>,
          <a href="/tag/Rate%20Limit">Rate Limit</a>,
          <a href="/tag/Rate%20Limit%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98"
            >Rate Limit 알고리즘</a
          >, <a href="/tag/Rate%20Limiter">Rate Limiter</a>,
          <a href="/tag/throttler">throttler</a>,
          <a href="/tag/throttling">throttling</a>,
          <a href="/tag/Token%20Bucket">Token Bucket</a>,
          <a
            href="/tag/%EC%B2%98%EB%A6%AC%EC%9C%A8%20%EC%A0%9C%ED%95%9C%EA%B8%B0"
            >처리율 제한기</a
          >
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry577Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://new.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >정보왕창</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.08 19:35
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=577&amp;commentId=27021382"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고있어요~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5820797%2Fattach%2F84e692d25a0448cf831e7c997f087817"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://gameperson.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >푸른바다거북이</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.08 23:19
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=577&amp;commentId=27024409"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘봤습니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://good.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >욜로와요</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.09 12:20
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=577&amp;commentId=27031637"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤슴다!</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://sky.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >한달동안</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.11 10:33
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=577&amp;commentId=27067001"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤슴다!</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_577"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(577, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/577"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 577); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[577] = true;
          findFragmentAndHighlight(577);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtRPLV%2FbtsPF8txhld%2FAAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DQYkj%252BoNaiI3XNuUt4wt%252FFoK8s5A%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            [Rate Limit - 1] Rate Limit이란? (설계 시 주의사항)
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">공부방</span>

            <span class="post-hero-date">2025. 8. 6. 18:00</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/576?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(576); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_3DUmkS"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_10_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_10"
                    name="aswift_10"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=1247662849&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=86&amp;idt=192&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=11&amp;uci=a!b&amp;fsb=1&amp;dtd=194"
                    data-google-container-id="a!b"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CP7I8JbqoI8DFUBIwgUdqMcDPQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              사이드 프로젝트에서 AWS에 100달러 이상의 과금이 된 적이 있다. 이
              때 처음으로 Rate Limit을 도입했고, A/B 테스트를 통해 적절한
              임계치를 찾았던 기억이 있다. 최근,
              <a
                href="https://product.kyobobook.co.kr/detail/S000001033116"
                target="_blank"
                rel="noopener"
                >가상 면접 사례로 배우는 대규모 시스템 설계 기초</a
              >
              를 다시 읽으면서, Rate Limit에 대해 깊이 있게 정리해놓지 않았다는
              것을 깨닫고, 정리하는 글이 되시겠다(?)
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">[목차]</p>
            <p style="text-align: center" data-ke-size="size16">
              <span style="color: #009a87"
                ><b><u>1. Rate Limit이란? 설계 시 주의사항</u></b></span
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <a style="color: #0070d1" href="https://mag1c.tistory.com/577"
                ><span style="color: #9d9d9d"
                  ><u>2. Token Bucket, Leaky Bucket 알고리즘</u></span
                ></a
              >
            </p>
            <p style="text-align: center" data-ke-size="size16">
              <a
                href="https://mag1c.tistory.com/578"
                target="_blank"
                rel="noopener"
                ><span style="color: #9d9d9d"
                  ><u
                    >3. Fixed Window, Sliding Window Logging, Sliding Window
                    Counter 알고리즘</u
                  ></span
                ></a
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Rate Limit</h2>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="rate-limiter-intro.png"
              data-origin-width="1518"
              data-origin-height="684"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/tRPLV/btsPF8txhld/AAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=QYkj%2BoNaiI3XNuUt4wt%2FFoK8s5A%3D"
                data-phocus="https://blog.kakaocdn.net/dna/tRPLV/btsPF8txhld/AAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=QYkj%2BoNaiI3XNuUt4wt%2FFoK8s5A%3D"
                data-alt="https://ivov.dev/notes/rate-limiter"
                ><img
                  src="https://blog.kakaocdn.net/dna/tRPLV/btsPF8txhld/AAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=QYkj%2BoNaiI3XNuUt4wt%2FFoK8s5A%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtRPLV%2FbtsPF8txhld%2FAAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DQYkj%252BoNaiI3XNuUt4wt%252FFoK8s5A%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="740"
                  height="333"
                  data-filename="rate-limiter-intro.png"
                  data-origin-width="1518"
                  data-origin-height="684"
                  data-phocus-index="22"
              /></span>
              <figcaption>https://ivov.dev/notes/rate-limiter</figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              Rate Limit는 클라이언트 또는 서비스가 보내는 트래픽의
              처리율(rate)을 제어하기 위한 방법이다.
            </p>
            <p data-ke-size="size16">
              보통의 웹 애플리케이션이나 모바일 애플리케이션에서 특정 기간 내에
              전송되는 클라이언트의 요청 횟수를 제한한다.
            </p>
            <p data-ke-size="size16">
              API 요청 횟수가 제한 장치에 의해 정의된 임계치(threshold)를
              넘어서면 추가로 도달한 모든 호출은 처리가 중단된다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Rate Limit의 효과</h2>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="image-18.webp"
              data-origin-width="1290"
              data-origin-height="404"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/yYwTF/btsPDNj3MCD/AAAAAAAAAAAAAAAAAAAAAHxqlnH_MArKfNrEhJrEOj4EbuRCN5OVwzojn-iL4jU-/img.webp?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=YhlGutlRsJFBYNu96sF4NEE2wYM%3D"
                data-phocus="https://blog.kakaocdn.net/dna/yYwTF/btsPDNj3MCD/AAAAAAAAAAAAAAAAAAAAAHxqlnH_MArKfNrEhJrEOj4EbuRCN5OVwzojn-iL4jU-/img.webp?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=YhlGutlRsJFBYNu96sF4NEE2wYM%3D"
                data-alt="요즘은 특히 AI 구독제 때문에, Rate Limit을 일상 생활에서 더 빈번하게 접할 수 있다."
                ><img
                  src="https://blog.kakaocdn.net/dna/yYwTF/btsPDNj3MCD/AAAAAAAAAAAAAAAAAAAAAHxqlnH_MArKfNrEhJrEOj4EbuRCN5OVwzojn-iL4jU-/img.webp?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=YhlGutlRsJFBYNu96sF4NEE2wYM%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FyYwTF%2FbtsPDNj3MCD%2FAAAAAAAAAAAAAAAAAAAAAHxqlnH_MArKfNrEhJrEOj4EbuRCN5OVwzojn-iL4jU-%2Fimg.webp%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DYhlGutlRsJFBYNu96sF4NEE2wYM%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1290"
                  height="404"
                  data-filename="image-18.webp"
                  data-origin-width="1290"
                  data-origin-height="404"
                  data-phocus-index="23"
              /></span>
              <figcaption>
                요즘은 특히 AI 구독제 때문에, Rate Limit을 일상 생활에서 더
                빈번하게 접할 수 있다.
              </figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">
              Rate Limit을 설정하면 다음과 같은 이점이 있다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                서비스 안정성 및 성능의 보장: DoS 공격에 의한 자원 고갈을 방지할
                수 있다.
              </li>
              <li>
                비용 절감: 요청에 대한 처리를 제한하여 트래픽 비용을 절감할 수
                있다.
              </li>
              <li>
                서버 과부화를 막음: 봇의 무분별한 스크래핑, 사용자의 잘못된 이용
                패턴으로부터 오는 과요청을 사전에 차단한다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Rate Limiter의 설계</h2>
            <p data-ke-size="size16">
              Rate Limiter는 일반적으로 클라이언트에 두지 않는다. 안정적으로
              처리율을 제한할 수 없기 때문이다. 클라이언트 요청은 쉽게 위변조가
              가능하기 때문이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              그렇다면 서버 측에 제한 장치를 두어야 하는데 각자의 서버 환경에
              따라 다르게 구성하는 것이 옳다. 소규모 애플리케이션이라면 단순히
              API 서버에 단순하게 구성할 것이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1430"
              data-origin-height="542"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/d03tJ3/btsPDV3q0Wo/AAAAAAAAAAAAAAAAAAAAAIiFVLxheWxFSMdvy4YyP5xnCsgRe5fnEzqlAuAeXdRP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=LfxsRlvDFwWoFOI2uc1A8o728co%3D"
                data-phocus="https://blog.kakaocdn.net/dna/d03tJ3/btsPDV3q0Wo/AAAAAAAAAAAAAAAAAAAAAIiFVLxheWxFSMdvy4YyP5xnCsgRe5fnEzqlAuAeXdRP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=LfxsRlvDFwWoFOI2uc1A8o728co%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/d03tJ3/btsPDV3q0Wo/AAAAAAAAAAAAAAAAAAAAAIiFVLxheWxFSMdvy4YyP5xnCsgRe5fnEzqlAuAeXdRP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=LfxsRlvDFwWoFOI2uc1A8o728co%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fd03tJ3%2FbtsPDV3q0Wo%2FAAAAAAAAAAAAAAAAAAAAAIiFVLxheWxFSMdvy4YyP5xnCsgRe5fnEzqlAuAeXdRP%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DLfxsRlvDFwWoFOI2uc1A8o728co%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1430"
                  height="542"
                  data-origin-width="1430"
                  data-origin-height="542"
                  data-phocus-index="24"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              아래 예시는 Nest에서 제공하는 Throttler 모듈을 사용한 예시다.
            </p>
            <pre
              id="code_1754226965034"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// 애플리케이션 전역에 1분에 10번의 요청만 허용한다.</span>
<span class="hljs-meta" style="">@Module</span>({
<span class="hljs-attr" style="">imports</span>: [
ThrottlerModule.forRoot({
<span class="hljs-attr" style="">throttlers</span>: [
{
<span class="hljs-attr" style="">ttl</span>: <span class="hljs-number" style="">60000</span>,
<span class="hljs-attr" style="">limit</span>: <span class="hljs-number" style="">10</span>,
},
],
}),
],
})
<span class="hljs-keyword" style="">export</span> <span class="hljs-class" style=""><span class="hljs-keyword" style="">class</span> <span class="hljs-title" style="">AppModule</span> </span>{}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              만약, MSA 환경이라면 Rate Limiter은 보통 API Gateway에 구현된다.
              클라우드 서비스의 API Gateway는 사용자 인증, whitelist 관리, SSL
              termination 등을 지원하기 때문에 추가하기만 하면 되고,
              커스터마이징한 API Gateway일 경우에도, 기존의 다른 Gateway의
              미들웨어들처럼 추가해서 운영하면 된다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1398"
              data-origin-height="666"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/RR3Nq/btsPE81TbjB/AAAAAAAAAAAAAAAAAAAAAKxLIH2xFmU4YWxJZPc-3LvnfxiQ3VQ-feZnAy5t7Tl5/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sH8w3RfH7njP7zJZoTTmCv3Hoaw%3D"
                data-phocus="https://blog.kakaocdn.net/dna/RR3Nq/btsPE81TbjB/AAAAAAAAAAAAAAAAAAAAAKxLIH2xFmU4YWxJZPc-3LvnfxiQ3VQ-feZnAy5t7Tl5/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sH8w3RfH7njP7zJZoTTmCv3Hoaw%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/RR3Nq/btsPE81TbjB/AAAAAAAAAAAAAAAAAAAAAKxLIH2xFmU4YWxJZPc-3LvnfxiQ3VQ-feZnAy5t7Tl5/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=sH8w3RfH7njP7zJZoTTmCv3Hoaw%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FRR3Nq%2FbtsPE81TbjB%2FAAAAAAAAAAAAAAAAAAAAAKxLIH2xFmU4YWxJZPc-3LvnfxiQ3VQ-feZnAy5t7Tl5%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DsH8w3RfH7njP7zJZoTTmCv3Hoaw%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1398"
                  height="666"
                  data-origin-width="1398"
                  data-origin-height="666"
                  data-phocus-index="25"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              Rate Limiter을 서버에 두겠다고 선택했다면,
              <span style="color: #ee2323"
                ><i
                  >사용중인 프로그래밍 언어의 효율성을 따져보아야 한다.</i
                ></span
              >
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                우선, Rate Limit은 모든 요청마다 실시간으로 실행되기 때문에
                <span style="color: #ee2323"
                  ><i
                    >극도로 빠르게 동작하여 즉시 consume될 수 있는지
                    따져야한다.</i
                  ></span
                >
                언어가 느리면 요청 하나하나에 병목이 발생되어 전체 시스템의
                성능이 저하되기 쉽다.
              </li>
              <li>
                수백만 개의 클라이언트 IP, 사용자별 카운터를 메모리에
                유지해야하기 때문에
                <span style="color: #ee2323"
                  ><i>GC의 stop-the-world 시간이 긴 언어</i></span
                >는 요청 지연이 생길 수 있다.
              </li>
              <li>
                수천 개의 동시 요청을 처리하며 카운터를
                <span style="color: #ee2323"><i>원자적</i></span
                >으로 업데이트해야 하는데, 이 때 효율적인 락 매커니즘과 동시성을
                제어할 수 있어야 한다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              만약 위 내용에 적합하지 않은 인터프리터 기반의 싱글스레드 언어인
              Python, Ruby등의 언어를 사용하고 있다면
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                Redis 등의 외부 인메모리 저장소를 활용한 분산 Rate Limiting
                구조를 고려해야할 수도 있다.
              </li>
              <li>
                Envoy, Nginx와 같은 리버스 프록시 기반 Throttling 방식이 더
                적합할 수도 있다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Race Condition에 주의하라</h2>
            <p data-ke-size="size16">
              만약, 분산 환경에서 Rate Limiter을 구축했다면, 동시성을 제어하기
              위해 Redis와 같은 외부 인메모리 저장소를 활용하여 처리율을
              체크하고 있을 것이라 생각한다. Rate Limit도 마찬가지로 분산
              환경에서 공통으로 유의해야 할 Race Condition을 고려해야한다.
              Redis를 사용한다고 가정하고, Race Condition 문제를 어떻게
              해결해야할지 간단히 살펴보자.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">Race Condition</h3>
            <p data-ke-size="size16">
              Rate Limit은 보통 다음 흐름으로 동작한다.
            </p>
            <ol style="list-style-type: decimal" data-ke-list-type="decimal">
              <li>Redis에서 현재 카운터 값을 조회한다.</li>
              <li>요청이 임계값 이하인지 확인한다.</li>
              <li>조건을 만족하면 카운터를 증가시킨다.</li>
            </ol>
            <p data-ke-size="size16">
              이 흐름은 매우 간단하지만, 분산 환경에서 동시 요청이 많아질수록
              Race Condition은 더 자주 발생한다.예를 들어 동시에 두 요청이
              Redis에서 카운터를 읽었을 때, 둘 다 조건을 통과하여 값을
              증가시킨다면 실제 카운터는 limit을 초과하게 된다. 이는 Rate
              Limit이 무력화될 수 있다는 의미이다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1460"
              data-origin-height="1250"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/IZbsi/btsPEOv1SRO/AAAAAAAAAAAAAAAAAAAAAAWlX0qwCZzyvx_UxLhlzIJgg6CrpHgXRSep20obxopo/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=7Y6SoVGpkJkzhxEGZSJLLh%2BrVME%3D"
                data-phocus="https://blog.kakaocdn.net/dna/IZbsi/btsPEOv1SRO/AAAAAAAAAAAAAAAAAAAAAAWlX0qwCZzyvx_UxLhlzIJgg6CrpHgXRSep20obxopo/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=7Y6SoVGpkJkzhxEGZSJLLh%2BrVME%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/IZbsi/btsPEOv1SRO/AAAAAAAAAAAAAAAAAAAAAAWlX0qwCZzyvx_UxLhlzIJgg6CrpHgXRSep20obxopo/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=7Y6SoVGpkJkzhxEGZSJLLh%2BrVME%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FIZbsi%2FbtsPEOv1SRO%2FAAAAAAAAAAAAAAAAAAAAAAWlX0qwCZzyvx_UxLhlzIJgg6CrpHgXRSep20obxopo%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D7Y6SoVGpkJkzhxEGZSJLLh%252BrVME%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="744"
                  height="637"
                  data-origin-width="1460"
                  data-origin-height="1250"
                  data-phocus-index="26"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              위 그림은, 요청 1이 처리되기 이전에 동시 요청된 요청 2가 같이
              수행되었다. 여기에는 여러 문제가 있다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>counter은 11이 되어야한다.</li>
              <li>
                max_count는 10이기 때문에 애초에 요청 2는 처리되었으면 안된다.
              </li>
            </ul>
            <p data-ke-size="size16">
              Race Condition을 해결하기 위해 일반적으로 Lock을 사용할 수 있다.
              하지만<span style="color: #ee2323"
                ><i>
                  Lock이라는 매커니즘은 읽거나 쓰는 도중에 다른 요청은 대기하는
                  방식이기 때문에 시스템의 성능을 떨어뜨린다는 문제</i
                ></span
              >가 있다. 만약 위 예제처럼 Redis를 사용하는 상황이라면 Lua
              Script를 사용하거나, SortedSet 자료구조를 사용해서 해결할 수 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h4 data-ke-size="size20">Lua Script를 통한 Rate Limit 구현</h4>
            <pre
              id="code_1754229710475"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">const</span> luaScript = <span class="hljs-string" style="">`
local current = redis.call("GET", KEYS[1])
if current and tonumber(current) &gt;= tonumber(ARGV[1]) then
return 0
else
current = redis.call("INCR", KEYS[1])
if tonumber(current) == 1 then
redis.call("PEXPIRE", KEYS[1], ARGV[2])
end
return 1
end
`</span>

<span class="hljs-keyword" style="">const</span> result = <span class="hljs-keyword" style="">await</span> redis.eval(luaScript, <span class="hljs-number" style="">1</span>, <span class="hljs-string" style="">`rate_limit:user:<span class="hljs-subst" style="">${userId}</span>`</span>, maxCount, ttlMs);

<span class="hljs-keyword" style="">if</span> (result === <span class="hljs-number" style="">0</span>) {
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> TooManyRequestsException();
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              Lua Script는 Redis에서
              <span style="color: #ee2323"><i>원자적으로 실행</i></span
              >되기 때문에
              <span style="color: #ee2323"
                ><i>여러 명령을 하나의 트랜잭션처럼</i></span
              >
              묶어서 실행할 수 있다. 이 때문에 Race Condition으로부터 안전하게
              실행될 수 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <blockquote data-ke-style="style2">
              Lua Script는 실행 중 다른 Redis의 명령을 대기시킨다.<br />만약
              스크립트가 너무 복잡하거나 오래 걸리는 경우, 무한 루프에 빠지는
              경우 등을 조심해야한다.<br />간결하게 작성하여 Redis 처리 성능에
              최대한 영향을 끼쳐서는 안된다.
            </blockquote>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h4 data-ke-size="size20">SortedSet을 통한 Rate Limit 구현</h4>
            <p data-ke-size="size16">
              Lua Script말고도, SotredSet(ZSET)을 활용한 방법도 있다. 보통
              Sliding Window 방식을 ZSET으로 구현할 수 있다.
            </p>
            <ol style="list-style-type: decimal" data-ke-list-type="decimal">
              <li>ZADD로 요청 추가</li>
              <li>ZREMRANGEBYSCORE로 현재 시간에서 TTL만큼 지난 요청을 제거</li>
              <li>ZCARD로 남아있는 요청 수 계산</li>
              <li>limit보다 작으면 허용, 아니라면 차단</li>
            </ol>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1754230596690"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">local key = KEYS[<span class="hljs-number" style="">1</span>]
local now = tonumber(ARGV[<span class="hljs-number" style="">1</span>])
local <span class="hljs-built_in" style="">window</span> = tonumber(ARGV[<span class="hljs-number" style="">2</span>])
local limit = tonumber(ARGV[<span class="hljs-number" style="">3</span>])

redis.call(<span class="hljs-string" style="">"ZREMRANGEBYSCORE"</span>, key, <span class="hljs-number" style="">0</span>, now - <span class="hljs-built_in" style="">window</span>)

local count = redis.call(<span class="hljs-string" style="">"ZCARD"</span>, key)
<span class="hljs-keyword" style="">if</span> count &gt;= limit then
<span class="hljs-keyword" style="">return</span> <span class="hljs-number" style="">0</span>
end

redis.call(<span class="hljs-string" style="">"ZADD"</span>, key, now, now .. <span class="hljs-string" style="">"-"</span> .. math.random())

redis.call(<span class="hljs-string" style="">"PEXPIRE"</span>, key, <span class="hljs-built_in" style="">window</span>)
<span class="hljs-keyword" style="">return</span> <span class="hljs-number" style="">1</span>

<span class="hljs-keyword" style="">const</span> now = <span class="hljs-built_in" style="">Date</span>.now();
<span class="hljs-keyword" style="">const</span> result = <span class="hljs-keyword" style="">await</span> redis.eval(luaScript, <span class="hljs-number" style="">1</span>, <span class="hljs-string" style="">`rate_limit:user:<span class="hljs-subst" style="">${userId}</span>`</span>, now, <span class="hljs-number" style="">60000</span>, <span class="hljs-number" style="">10</span>);</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">ZSET을 이용한 방식의 장점으로는</p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                score를 기록하기 때문에 정확한 시간 단위로 요청 개수를 제한할 수
                있다.
              </li>
              <li>
                시간 경계의 쏠림 문제가 없다. (Fixed Window의 단점을 보완)
              </li>
              <li>
                Redis 연산이 원자적이기때문에 Race Condition에 안전하다. (Lua
                사용 시)
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              하지만, 이 방식의 단점도 있다. TTL Window 내의 모든 요청
              타임스탬프를 score에 저장하기 때문에 메모리 사용량이 높다. 그리고
              기본적인 Redis 연산이 많기 때문에 요청이 많을수록 Redis 부하가
              커질 수도 있겠다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">Rate Limiter가 사용하는 HTTP 헤더</h2>
            <p data-ke-size="size16">
              Rate Limiter을 사용할 때, 다음의 HTTP 헤더를 클라이언트에게
              보내야한다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>X-Ratelimit-Limit: 가능한 총 요청의 수</li>
              <li>X-Ratelimit-Remaning: 남은 처리 가능 요청 수&nbsp;</li>
              <li>
                X-Ratelimit-Retry-After: 몇 초 뒤에 다시 요청을 해야하는지
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              아직 규정되지는 않았기 때문에 헤더의 이름 자체를 조금 수정하는
              것은 괜찮을지 모르겠으나, 헤더를 사용하여 클라이언트에게 Rate
              Limit 관련 정보를 보내는 것은
              <a
                href="https://datatracker.ietf.org/doc/draft-ietf-httpapi-ratelimit-headers/"
                target="_blank"
                rel="noopener"
                >IETF의 권장사항</a
              >이다. 또한 사용자가 너무 많은 요청을 보내면 429(Too Many Request)
              오류를 X-Ratelimit-Retry-After 헤더와 함께 반환하여야 한다.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="2130"
              data-origin-height="348"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/btCluH/btsPF6xlHXZ/AAAAAAAAAAAAAAAAAAAAAOqML_7VOgy-zbWgQ8sSoatgkxEVzGIUYvxpeGPw3dAY/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XOEEUjy8fed%2Bp916Mu2QcTueYt0%3D"
                data-phocus="https://blog.kakaocdn.net/dna/btCluH/btsPF6xlHXZ/AAAAAAAAAAAAAAAAAAAAAOqML_7VOgy-zbWgQ8sSoatgkxEVzGIUYvxpeGPw3dAY/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XOEEUjy8fed%2Bp916Mu2QcTueYt0%3D"
                data-alt="nest/throttler을 사용했을 때 자동으로 헤더에 명시된다."
                ><img
                  src="https://blog.kakaocdn.net/dna/btCluH/btsPF6xlHXZ/AAAAAAAAAAAAAAAAAAAAAOqML_7VOgy-zbWgQ8sSoatgkxEVzGIUYvxpeGPw3dAY/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=XOEEUjy8fed%2Bp916Mu2QcTueYt0%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbtCluH%2FbtsPF6xlHXZ%2FAAAAAAAAAAAAAAAAAAAAAOqML_7VOgy-zbWgQ8sSoatgkxEVzGIUYvxpeGPw3dAY%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DXOEEUjy8fed%252Bp916Mu2QcTueYt0%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="2130"
                  height="348"
                  data-origin-width="2130"
                  data-origin-height="348"
                  data-phocus-index="27"
              /></span>
              <figcaption>
                nest/throttler을 사용했을 때 자동으로 헤더에 명시된다.
              </figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">References.</h2>
            <p data-ke-size="size16">
              <a
                href="https://product.kyobobook.co.kr/detail/S000001033116"
                target="_blank"
                rel="noopener"
                >알렉스 쉬 - 가상면접 사례로 배우는 대규모 시스템 설계
                기초[1]</a
              >
            </p>
            <p data-ke-size="size16">
              <a
                href="https://www.geeksforgeeks.org/system-design/rate-limiting-in-system-design/"
                target="_blank"
                rel="noopener&nbsp;noreferrer"
                >https://www.geeksforgeeks.org/system-design/rate-limiting-in-system-design/</a
              >
            </p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_lWs5Xh"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_11_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_11"
                    name="aswift_11"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=2873870873&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571419&amp;bpp=1&amp;bdt=87&amp;idt=200&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=12&amp;uci=a!c&amp;fsb=1&amp;dtd=202"
                    data-google-container-id="a!c"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CK6g8ZbqoI8DFXFAwgUd5zQ7gw"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 576,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-576"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FtRPLV%2FbtsPF8txhld%2FAAAAAAAAAAAAAAAAAAAAAD06kWLLdy31XA0f3CvF_K1co6ZklYFP_fEhMlTAavYN%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DQYkj%252BoNaiI3XNuUt4wt%252FFoK8s5A%253D"
                  data-title="[Rate Limit - 1] Rate Limit이란? (설계 시 주의사항)"
                  data-description="사이드 프로젝트에서 AWS에 100달러 이상의 과금이 된 적이 있다. 이 때 처음으로 Rate Limit을 도입했고, A/B 테스트를 통해 적절한 임계치를 찾았던 기억이 있다. 최근, 가상 면접 사례로 배우는 대규모 시스템 설계 기초 를 다시 읽으면서, Rate Limit에 대해 깊이 있게 정리해놓지 않았다는 것을 깨닫고, 정리하는 글이 되시겠다(?) [목차]1. Rate Limit이란? 설계 시 주의사항2. Token Bucket, Leaky Bucket 알고리즘3. Fixed Window, Sliding Window Logging, Sliding Window Counter 알고리즘 Rate Limit Rate Limit는 클라이언트 또는 서비스가 보내는 트래픽의 처리율(rate)을 제어하기 위.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/576"
                  data-relative-pc-url="/576"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="576"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="576"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry576Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F6705915%2Fattach%2F7d1875cef7e3471ab9c72faff28509db"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://jjintravel.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >칠브리즈 트래블러🎵</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.06 18:12
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=576&amp;commentId=26967441"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5820797%2Fattach%2F84e692d25a0448cf831e7c997f087817"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://gameperson.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >푸른바다거북이</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.06 19:59
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=576&amp;commentId=26969042"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 읽고 갑니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://sky.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >한달동안</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.07 11:29
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=576&amp;commentId=26980981"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고있어요~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://new.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >정보왕창</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.08 12:18
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=576&amp;commentId=27010076"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고있어요~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://good.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >욜로와요</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.09 13:48
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=576&amp;commentId=27033688"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤슴다!</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_576"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(576, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/576"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 576); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[576] = true;
          findFragmentAndHighlight(576);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdtmZ2C%2FbtsPFuXURZ5%2FAAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8Gv%252FI8G6cseYUU%252BTkEvQFo2MEVY%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            Claude Code Max (100 달러) 한 달 사용 후기
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">회고</span>

            <span class="post-hero-date">2025. 8. 3. 18:35</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/575?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(575); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_xAlqNc"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_12_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_12"
                    name="aswift_12"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=4028083391&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=205&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=13&amp;uci=a!d&amp;fsb=1&amp;dtd=207"
                    data-google-container-id="a!d"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CNqR8ZbqoI8DFRRAwgUdYA0qyA"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              돈 쓸 일이 많아서, 최대한 Gemini CLI를 주로 이용하고 GPT 4o를
              <a
                href="https://www.gamsgo.com/ko/?promote=sVffq"
                target="_blank"
                rel="noopener"
                >겜스고</a
              >에서 결제해서 사용하고 있었는데
            </p>
            <p data-ke-size="size16">
              개발자들 사이에서 Claude Code가 넘사라는 이야기를 링크드인, X,
              유튜브 등의 커뮤니티에서 너무 많이 듣다보니 도저히 안되겠다 싶어서
              Claude Code를 결제해서 한 달 사용해봤다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">
              <b
                ><span style="color: #9d9d9d"
                  >(겜스고는 클로드 코드 맥스 1인 구독권을 팔아라!!!
                  제발!!!)</span
                ></b
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="KakaoTalk_Photo_2025-08-03-17-21-42.jpeg"
              data-origin-width="3000"
              data-origin-height="4000"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/b4fQek/btsPFiQV2yg/AAAAAAAAAAAAAAAAAAAAAHNpNcYRHGP6UOSuIuxysXiDWEDtyIjUggZSaWdOCX5L/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=5WTUlLeU9Hd6Q6WC0bUd1XgvrTI%3D"
                data-phocus="https://blog.kakaocdn.net/dna/b4fQek/btsPFiQV2yg/AAAAAAAAAAAAAAAAAAAAAHNpNcYRHGP6UOSuIuxysXiDWEDtyIjUggZSaWdOCX5L/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=5WTUlLeU9Hd6Q6WC0bUd1XgvrTI%3D"
                data-alt="강아지 자랑"
                ><img
                  src="https://blog.kakaocdn.net/dna/b4fQek/btsPFiQV2yg/AAAAAAAAAAAAAAAAAAAAAHNpNcYRHGP6UOSuIuxysXiDWEDtyIjUggZSaWdOCX5L/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=5WTUlLeU9Hd6Q6WC0bUd1XgvrTI%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fb4fQek%2FbtsPFiQV2yg%2FAAAAAAAAAAAAAAAAAAAAAHNpNcYRHGP6UOSuIuxysXiDWEDtyIjUggZSaWdOCX5L%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D5WTUlLeU9Hd6Q6WC0bUd1XgvrTI%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="489"
                  height="652"
                  data-filename="KakaoTalk_Photo_2025-08-03-17-21-42.jpeg"
                  data-origin-width="3000"
                  data-origin-height="4000"
                  data-phocus-index="28"
              /></span>
              <figcaption>강아지 자랑</figcaption>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              처음에는 100달러, 200달러라는 요금이 두 강아지를 키우는
              가장(?)에게 너무 비싼 것 같아서 소소하게 Pro 요금제를 결제해서
              사용했는데, 문제는 20달러로는 금방 토큰 사용량을 초과해버려서,
              갈증이 났다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              큰 맘 먹고 Max 100 달러짜리로 사용해봤다.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1254"
              data-origin-height="1734"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/dtmZ2C/btsPFuXURZ5/AAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8Gv%2FI8G6cseYUU%2BTkEvQFo2MEVY%3D"
                data-phocus="https://blog.kakaocdn.net/dna/dtmZ2C/btsPFuXURZ5/AAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8Gv%2FI8G6cseYUU%2BTkEvQFo2MEVY%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/dtmZ2C/btsPFuXURZ5/AAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=8Gv%2FI8G6cseYUU%2BTkEvQFo2MEVY%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdtmZ2C%2FbtsPFuXURZ5%2FAAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8Gv%252FI8G6cseYUU%252BTkEvQFo2MEVY%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="835"
                  height="1155"
                  data-origin-width="1254"
                  data-origin-height="1734"
                  data-phocus-index="29"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              초라하기 짝이 없는 성적표(?)를 받았다. (커피한잔 앱으로 유명한
              <a
                href="https://jeho.page/essay/2025/07/15/claude-code.html"
                target="_blank"
                rel="noopener"
                >제호님의 한 달 사용 후기 포스팅</a
              >에 13000달러를 사용하신 분이 ㄷㄷ)
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              한 달 동안, 현업에서도 사용하고 이래저래 많은 곳에서 사용해보았다.
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                링크를 저장하는 Shared Extensions 기반 Android 앱 (심사중)
              </li>
              <li>
                소설 작가를 위한 글쓰기 웹 플랫폼 만들기 (글쓰기 + 히스토리
                관리)
              </li>
              <li>
                현업에서 사용 (코드 컨벤션을 엄격하게 만들어 놓고, 테스트 코드나
                기능 확장 등에 주로 사용)
              </li>
              <li>
                오픈 소스 기여 (이슈를 선정하면, 자동으로 워크 플로우를 정의
                해줄 수 있도록 구성하여 사용)
              </li>
            </ul>
            <p data-ke-size="size16">
              남들이 보기에 많은 사용량은 아닐지 모르겠지만, 서비스를 두 개
              만들었고, 현업에서도 거의 10배 정도의 생산성이 향상되었고 거의
              단순 작업에는 코드 작성보다 검수하는 일이 더 잦아졌다. 오픈 소스
              기여는 아직 할루시네이션이 있는 것 같아서, 절대 신뢰하지는 않지만
              교차 검증을 계속 하다보니 기여 속도가 빨라진 것을 체감하고 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              앞으로도 더 좋은 AI들이 나오겠지만, 여태 사용했던 AI들 중 가장
              만족감이 높은 것 같다.
            </p>
            <p data-ke-size="size16">
              많은 AI를 사용해보지는 않았지만 개인적으로 처음 GPT 4.0을 사용했을
              때의 충격보다 더 크게 다가오는 것 같다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1820"
              data-origin-height="574"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/bbxAFe/btsPEOpeSBe/AAAAAAAAAAAAAAAAAAAAAJEB876eojPFiG290KHYzWFN1DbE4-np3TE4EpdAXQ62/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=U%2BbI8aoGMI1EQ%2BYyLt0PdIrMGy4%3D"
                data-phocus="https://blog.kakaocdn.net/dna/bbxAFe/btsPEOpeSBe/AAAAAAAAAAAAAAAAAAAAAJEB876eojPFiG290KHYzWFN1DbE4-np3TE4EpdAXQ62/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=U%2BbI8aoGMI1EQ%2BYyLt0PdIrMGy4%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/bbxAFe/btsPEOpeSBe/AAAAAAAAAAAAAAAAAAAAAJEB876eojPFiG290KHYzWFN1DbE4-np3TE4EpdAXQ62/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=U%2BbI8aoGMI1EQ%2BYyLt0PdIrMGy4%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbbxAFe%2FbtsPEOpeSBe%2FAAAAAAAAAAAAAAAAAAAAAJEB876eojPFiG290KHYzWFN1DbE4-np3TE4EpdAXQ62%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DU%252BbI8aoGMI1EQ%252BYyLt0PdIrMGy4%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="835"
                  height="263"
                  data-origin-width="1820"
                  data-origin-height="574"
                  data-phocus-index="30"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">그래서!!!</p>
            <p data-ke-size="size16">
              이사도 끝냈고, 바쁜 일정들도 다 끝났으니 200달러 짜리 결제해서
              일을 더 시켜야겠다 ㅋㅋㅋㅋ 일해라 노예야!!
            </p>
            <p data-ke-size="size16">&nbsp;</p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_MusGcC"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_13_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_13"
                    name="aswift_13"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=2864524607&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=210&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=14&amp;uci=a!e&amp;fsb=1&amp;dtd=212"
                    data-google-container-id="a!e"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CJvk8ZbqoI8DFW9FwgUdrJkflw"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 575,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-575"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdtmZ2C%2FbtsPFuXURZ5%2FAAAAAAAAAAAAAAAAAAAAAEgUaDw3Sbm7fHtjXKwMQwP5MMaDrQspuaI1TWO18FlU%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D8Gv%252FI8G6cseYUU%252BTkEvQFo2MEVY%253D"
                  data-title="Claude Code Max (100 달러) 한 달 사용 후기"
                  data-description="돈 쓸 일이 많아서, 최대한 Gemini CLI를 주로 이용하고 GPT 4o를 겜스고에서 결제해서 사용하고 있었는데개발자들 사이에서 Claude Code가 넘사라는 이야기를 링크드인, X, 유튜브 등의 커뮤니티에서 너무 많이 듣다보니 도저히 안되겠다 싶어서 Claude Code를 결제해서 한 달 사용해봤다. (겜스고는 클로드 코드 맥스 1인 구독권을 팔아라!!! 제발!!!) 처음에는 100달러, 200달러라는 요금이 두 강아지를 키우는 가장(?)에게 너무 비싼 것 같아서 소소하게 Pro 요금제를 결제해서 사용했는데, 문제는 20달러로는 금방 토큰 사용량을 초과해버려서, 갈증이 났다. 큰 맘 먹고 Max 100 달러짜리로 사용해봤다. 초라하기 짝이 없는 성적표(?)를 받았다. (커피한잔 앱으로 유명한 .."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/575"
                  data-relative-pc-url="/575"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="575"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="575"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a href="/tag/claude%20code">claude code</a>,
          <a href="/tag/Claude%20Code%20Max">Claude Code Max</a>,
          <a href="/tag/Claude%20Code%20Max%20%ED%9B%84%EA%B8%B0"
            >Claude Code Max 후기</a
          >, <a href="/tag/Gamsgo%20Claude">Gamsgo Claude</a>,
          <a href="/tag/%EA%B2%9C%EC%8A%A4%EA%B3%A0%20Claude">겜스고 Claude</a>,
          <a
            href="/tag/%EA%B2%9C%EC%8A%A4%EA%B3%A0%20%ED%81%B4%EB%A1%9C%EB%93%9C"
            >겜스고 클로드</a
          >,
          <a
            href="/tag/%ED%81%B4%EB%A1%9C%EB%93%9C%20%EC%BD%94%EB%93%9C%20%EB%A7%A5%EC%8A%A4%20%ED%9B%84%EA%B8%B0"
            >클로드 코드 맥스 후기</a
          >,
          <a
            href="/tag/%ED%81%B4%EB%A1%9C%EB%93%9C%20%EC%BD%94%EB%93%9C%20%ED%9B%84%EA%B8%B0"
            >클로드 코드 후기</a
          >
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry575Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://sky.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >한달동안</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.03 19:38
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=575&amp;commentId=26892104"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤어요.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5820797%2Fattach%2F84e692d25a0448cf831e7c997f087817"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://gameperson.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >푸른바다거북이</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.04 10:13
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=575&amp;commentId=26904082"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://new.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >정보왕창</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.04 13:23
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=575&amp;commentId=26911955"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤어요.</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_575"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(575, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/575"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 575); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[575] = true;
          findFragmentAndHighlight(575);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FceSDIW%2FbtsPFjaiizE%2FAAAAAAAAAAAAAAAAAAAAAFflTWqYjz0CU3ty7RWp68j-gbaLz7XUzW2lc9yvGY_R%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252BfJ8cS9ynpqXSHlsYg1kaFDwG%252B8%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            님 방능임? 스타크래프트/워크래프트 포트포워딩의 원리
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">잡</span>

            <span class="post-hero-date">2025. 7. 31. 17:21</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/574?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(574); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_mP15xJ"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_14_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_14"
                    name="aswift_14"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=690410037&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=215&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=15&amp;uci=a!f&amp;fsb=1&amp;dtd=217"
                    data-google-container-id="a!f"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CIX88ZbqoI8DFSb4TAIdMQIR9w"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">추억의 "방능"</h2>
            <p data-ke-size="size16">
              공유기를 사용하는 집에서 스타크래프트, 워크래프트 같은 게임을 했던
              사람이라면, <span style="color: #ee2323"><i>방능</i></span
              >이라는 단어를 한 번씩 들어봤을거라 생각한다. 내가 만든 게임 방에
              다른 사람이 들어올 수 있는 상태를 뜻하는 말로, 그 시절에는 방능이
              안되면 <span style="color: #ee2323"><i>포트포워딩</i></span
              >을 해야했고, 네이버를 뒤져서 방법을 찾아보면 공유기에서 설정할 수
              있다는 말을 듣고 마구잡이로 따라했었다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="다운로드 (1).png"
              data-origin-width="720"
              data-origin-height="583"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/blv8l9/btsPEq8KVzn/AAAAAAAAAAAAAAAAAAAAAGk5mySRuNmTf3hdyFzwqKoiJ_tdALF72o_8EeE8Ep7e/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=ku6LoQ0arKxVQJhBNVLgKQ8Tmtc%3D"
                data-phocus="https://blog.kakaocdn.net/dna/blv8l9/btsPEq8KVzn/AAAAAAAAAAAAAAAAAAAAAGk5mySRuNmTf3hdyFzwqKoiJ_tdALF72o_8EeE8Ep7e/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=ku6LoQ0arKxVQJhBNVLgKQ8Tmtc%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/blv8l9/btsPEq8KVzn/AAAAAAAAAAAAAAAAAAAAAGk5mySRuNmTf3hdyFzwqKoiJ_tdALF72o_8EeE8Ep7e/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=ku6LoQ0arKxVQJhBNVLgKQ8Tmtc%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Fblv8l9%2FbtsPEq8KVzn%2FAAAAAAAAAAAAAAAAAAAAAGk5mySRuNmTf3hdyFzwqKoiJ_tdALF72o_8EeE8Ep7e%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dku6LoQ0arKxVQJhBNVLgKQ8Tmtc%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="595"
                  height="482"
                  data-filename="다운로드 (1).png"
                  data-origin-width="720"
                  data-origin-height="583"
                  data-phocus-index="31"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              최근 스타크래프트 영상을 몇 개 보다보니 갑자기 그 시절이 생각났다.
              그 때는 단순 따라하기만했던 블로그의 설정들을 개발자가 된 지금 왜
              공유기 설정이 필요했는지, 게임을 호스팅한다는 게 무슨 의미인지
              정리해볼 수 있었다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 style="color: #000000" data-ke-size="size26">
              <br />방장이 호스트인 P2P 통신
            </h2>
            <p data-ke-size="size16">
              스타크래프트, 워크래프트는 P2P 방식이다. 서버가 방을 관리하는 것이
              아닌, 내가 직접 방장이자 서버가 되는 구조이다.
            </p>
            <p data-ke-size="size16">
              요즘 게임들 중에서는 대표적으로 콜 오브 듀티가 P2P 방식인 것으로
              잘 알려져 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">
              <b><span style="color: #006dd7">게임 서버 = 나</span></b>
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              P2P는 게임의 메인 서버를 거치지 않고 임의의 사용자를 서버로
              만들어버린다. 이런 방식은 개발사에서 서버 비용을 절감할 수 있는
              장점이 있지만, 서버로 선정된 유저의 IP가 노출되어 보안에 취약할 수
              있고, 다른 참여자 플레이어들보다 더 유리한 환경에서 게임을 할 수
              있다. 소위<span>&nbsp;</span
              ><span style="color: #ee2323"><i>핑이 튀지 않는다 </i></span>는
              말이다.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1270"
              data-origin-height="1030"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/elq1Qv/btsPE7nlUqv/AAAAAAAAAAAAAAAAAAAAAPB6BBybswVE0WvqbdQmUp8cCH_mF83YBspfutEHTXwA/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=E%2FNhoWtJqqRK9%2BLvubbEr4ELzUI%3D"
                data-phocus="https://blog.kakaocdn.net/dna/elq1Qv/btsPE7nlUqv/AAAAAAAAAAAAAAAAAAAAAPB6BBybswVE0WvqbdQmUp8cCH_mF83YBspfutEHTXwA/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=E%2FNhoWtJqqRK9%2BLvubbEr4ELzUI%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/elq1Qv/btsPE7nlUqv/AAAAAAAAAAAAAAAAAAAAAPB6BBybswVE0WvqbdQmUp8cCH_mF83YBspfutEHTXwA/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=E%2FNhoWtJqqRK9%2BLvubbEr4ELzUI%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2Felq1Qv%2FbtsPE7nlUqv%2FAAAAAAAAAAAAAAAAAAAAAPB6BBybswVE0WvqbdQmUp8cCH_mF83YBspfutEHTXwA%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DE%252FNhoWtJqqRK9%252BLvubbEr4ELzUI%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="489"
                  height="397"
                  data-origin-width="1270"
                  data-origin-height="1030"
                  data-phocus-index="32"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">왜 아무도 못들어올까?</h2>
            <p style="text-align: center" data-ke-size="size16">
              <u
                ><b
                  ><span style="color: #006dd7"
                    >"나는 인터넷도 잘 되는데? 왜 못들어오는거지?"</span
                  ></b
                ></u
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              나는 게임 접속도 잘 되고, 인터넷도 잘 된다. 그런데 왜 다른
              사용자는 접속하지 못할까?
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이런 상황에서의 문제는 대부분
              <span style="color: #ee2323"><i>공유기 환경과 NAT</i></span>
              때문이다. 우리가 집에서 사용하는 공유기는 내부에 여러 장비를
              연결하고, 이들을
              <span style="color: #ee2323"
                ><i>하나의 Public IP로 인터넷에 연결해주는 역할 </i></span
              >을 한다. 즉,
              <span style="color: #ee2323"
                ><i>모든 트래픽은 공유기를 통과 </i></span
              >한다.&nbsp;
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">내가 방을 만들면,</p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                다른 유저는 내 PC의 IP:PORT가 아닌 공유기의 Public IP:PORT로
                접속을 시도한다.
              </li>
              <li>
                그런데, 공유기는 그 요청이 내 컴퓨터로 가야 한다는 걸 모른다.
              </li>
              <li>결국 공유기는 요청을 버린다.</li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">공유기와 NAT</h2>
            <p data-ke-size="size16">
              공유기는 단순 허브가 아니다. 내부망과 외부망을 연결하는 라우터
              역할을 하며, 이 과정에서
              <a
                href="https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%A3%BC%EC%86%8C_%EB%B3%80%ED%99%98"
                target="_blank"
                rel="noopener"
                >NAT(Network Address Translation)</a
              >라는 기술을 사용하게 된다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <blockquote data-ke-style="style3">
              NAT(Network Address Translation)<br />내부의 Private IP를 외부
              인터넷에 통용되는 Public IP로 변환해주는 기술로 하나의 Public IP로
              여러대의 PC가 동시에 인터넷을 사용할 수 있다. 외부에서 내 PC에
              요청을 보낼 때는, 외부의 라우팅 테이블에 등록되어 있는 내 공유기의
              Public IP를 사용하게 된다.
            </blockquote>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1038"
              data-origin-height="633"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/lWI3a/btsPDWGTbZS/AAAAAAAAAAAAAAAAAAAAAGmcGWyNvMZm1Q-1H1kIMkHA-f_MQKBIrU2SkT1e0syP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=hcE%2BcwBNOH24gavZARcfx57%2BeL8%3D"
                data-phocus="https://blog.kakaocdn.net/dna/lWI3a/btsPDWGTbZS/AAAAAAAAAAAAAAAAAAAAAGmcGWyNvMZm1Q-1H1kIMkHA-f_MQKBIrU2SkT1e0syP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=hcE%2BcwBNOH24gavZARcfx57%2BeL8%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/lWI3a/btsPDWGTbZS/AAAAAAAAAAAAAAAAAAAAAGmcGWyNvMZm1Q-1H1kIMkHA-f_MQKBIrU2SkT1e0syP/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=hcE%2BcwBNOH24gavZARcfx57%2BeL8%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FlWI3a%2FbtsPDWGTbZS%2FAAAAAAAAAAAAAAAAAAAAAGmcGWyNvMZm1Q-1H1kIMkHA-f_MQKBIrU2SkT1e0syP%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DhcE%252BcwBNOH24gavZARcfx57%252BeL8%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1038"
                  height="633"
                  data-origin-width="1038"
                  data-origin-height="633"
                  data-phocus-index="33"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              이러한 NAT 구조의 이점을 간략하게 언급하자면
            </p>
            <ul style="list-style-type: disc" data-ke-list-type="disc">
              <li>
                IPv4 주소의 절약: 기기마다 Public IP를 줄 수 없을 만큼 IPv4
                주소는 부족하다. 위 그림처럼 NAT를 통해 다수의 Private IP 대역을
                Public IP로 묶을 수 있다면, 수십 대의 기기를 Public IP 하나로
                인터넷에 연결할 수 있다.
              </li>
              <li>
                보안 이점: Private IP 대역은 외부에서 바로 접근할 수 없다.
                기본적인 방화벽 역할을 한다.
              </li>
              <li>
                내부망 관리 편의성: 같은 Private IP 대역 안에서는 기기 간 통신이
                자유롭다.
              </li>
            </ul>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">그래서 왜 방에 못들어가는데?</h2>
            <p data-ke-size="size16">
              우리는 방능자가 아닌 방을 들어가려 할 때 무한 로딩이 걸리다가 결국
              방에 입장할 수 없었다. 다시 아래 그림을 보자.
            </p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1524"
              data-origin-height="908"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/ejCRCB/btsPEtSdM2r/AAAAAAAAAAAAAAAAAAAAAN3lxrYexlbQZrBqD2a33vZZAIGlbjo87B7pNxqymdhh/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=PStlIwLKJbf2ClWYEn7nWowJDPM%3D"
                data-phocus="https://blog.kakaocdn.net/dna/ejCRCB/btsPEtSdM2r/AAAAAAAAAAAAAAAAAAAAAN3lxrYexlbQZrBqD2a33vZZAIGlbjo87B7pNxqymdhh/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=PStlIwLKJbf2ClWYEn7nWowJDPM%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/ejCRCB/btsPEtSdM2r/AAAAAAAAAAAAAAAAAAAAAN3lxrYexlbQZrBqD2a33vZZAIGlbjo87B7pNxqymdhh/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=PStlIwLKJbf2ClWYEn7nWowJDPM%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FejCRCB%2FbtsPEtSdM2r%2FAAAAAAAAAAAAAAAAAAAAAN3lxrYexlbQZrBqD2a33vZZAIGlbjo87B7pNxqymdhh%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DPStlIwLKJbf2ClWYEn7nWowJDPM%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="1524"
                  height="908"
                  data-origin-width="1524"
                  data-origin-height="908"
                  data-phocus-index="34"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              게임 방에 입장하고자 하는 유저는 Public IP:6112로 접속을 시도한다.
              그러나 NAT에는 이 포트가 어느 내부 IP:PORT에 매핑되어야 하는지에
              대한 정보가 없다. NAT 구조에서는 외부에서 먼저 시작된 연결 요청에
              대해 사전 정의된 포트 매핑이 없으면, 공유기는 해당 요청을 내부로
              전달하지 않고 조용히 버린다(DROP). 이 때 라우터는 내부 네트워크를
              스캔하거나 브로드캐스트하지 않으며 연결은 실패로 끝난다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-filename="images.jpeg"
              data-origin-width="254"
              data-origin-height="198"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/rC8Zw/btsPDmfc2kA/AAAAAAAAAAAAAAAAAAAAAPo3S8s63fibB6oZSoTa0SgXNGz3xXeOz-8bhxzAge8X/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=a0aSA4jnah2aGASz%2BSGXzFIa2%2FQ%3D"
                data-phocus="https://blog.kakaocdn.net/dna/rC8Zw/btsPDmfc2kA/AAAAAAAAAAAAAAAAAAAAAPo3S8s63fibB6oZSoTa0SgXNGz3xXeOz-8bhxzAge8X/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=a0aSA4jnah2aGASz%2BSGXzFIa2%2FQ%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/rC8Zw/btsPDmfc2kA/AAAAAAAAAAAAAAAAAAAAAPo3S8s63fibB6oZSoTa0SgXNGz3xXeOz-8bhxzAge8X/img.jpg?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=a0aSA4jnah2aGASz%2BSGXzFIa2%2FQ%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FrC8Zw%2FbtsPDmfc2kA%2FAAAAAAAAAAAAAAAAAAAAAPo3S8s63fibB6oZSoTa0SgXNGz3xXeOz-8bhxzAge8X%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Da0aSA4jnah2aGASz%252BSGXzFIa2%252FQ%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="254"
                  height="198"
                  data-filename="images.jpeg"
                  data-origin-width="254"
                  data-origin-height="198"
                  data-phocus-index="35"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              그래서 우리는 구글링을 통해 공유기 방능 방법을 찾아보고 포스팅의
              내용대로 포트포워딩 설정을 하게 된다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">포트포워딩</h2>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1750"
              data-origin-height="1092"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/clxcpC/btsPCMrUkIP/AAAAAAAAAAAAAAAAAAAAAOR6-aBlWnCZvjpoVk_af0Hz_8ash0EAb2LtSrAKa9ck/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TUzWQZISsgoeP93%2BFr440TeS1P0%3D"
                data-phocus="https://blog.kakaocdn.net/dna/clxcpC/btsPCMrUkIP/AAAAAAAAAAAAAAAAAAAAAOR6-aBlWnCZvjpoVk_af0Hz_8ash0EAb2LtSrAKa9ck/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TUzWQZISsgoeP93%2BFr440TeS1P0%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/clxcpC/btsPCMrUkIP/AAAAAAAAAAAAAAAAAAAAAOR6-aBlWnCZvjpoVk_af0Hz_8ash0EAb2LtSrAKa9ck/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=TUzWQZISsgoeP93%2BFr440TeS1P0%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FclxcpC%2FbtsPCMrUkIP%2FAAAAAAAAAAAAAAAAAAAAAOR6-aBlWnCZvjpoVk_af0Hz_8ash0EAb2LtSrAKa9ck%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DTUzWQZISsgoeP93%252BFr440TeS1P0%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="754"
                  height="470"
                  data-origin-width="1750"
                  data-origin-height="1092"
                  data-phocus-index="36"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <a
                style="
                  background-color: #e6f5ff;
                  color: #0070d1;
                  text-align: start;
                "
                href="https://ko.wikipedia.org/wiki/%ED%8F%AC%ED%8A%B8_%ED%8F%AC%EC%9B%8C%EB%94%A9"
                >포트포워딩이란</a
              ><span style="color: #333333; text-align: start"
                ><span>&nbsp;</span>라우터가 특정 포트로 들어온 요청을 특정 내부
                IP:PORT로 연결해주는 규칙을 등록하는 것이라고 표현하겠다. </span
              >위&nbsp; 그림처럼 포트포워딩 설정을 등록했을 때, 비로소 공유기를
              통해 내부 PC까지 요청이 도달할 수 있다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h3 data-ke-size="size23">부록 - DMZ 설정</h3>
            <p data-ke-size="size16">
              방능 설정을 검색하면 DMZ 설정이 간편하다는 내용들이 많다. DMZ도
              동일한 문제를 해결하는 하나의 방법이다.
            </p>
            <p data-ke-size="size16">
              DMZ는 우리에겐 아프지만 친숙한 비무장지대처럼 네트워크에서도
              비슷한 의미로 사용된다. 외부 네트워크와 내부 네트워크의 중간
              지점으로, DMZ 설정을 통해 특정 IP를 지정할 수 있다. DMZ 설정을
              하게 되면 모든 포트를 하나의 내부 IP로 전달하는게 가능해져
              편리하게 Private IP를 등록하는 것 만으로 방능이 가능해진다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              하지만 모든 요청을 다 받을 수 있기 때문에, 다른 프로세스도
              외부에서 접근이 가능해진다. 극단적인 예시를 들면, 누군가가 내
              카카오톡에 접근도 가능하다는 뜻이 되겠다. 그래서 일반적으로는
              포트포워딩으로 필요한 포트만 열어두는 것이 더 안전하다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">마무리</h2>
            <p data-ke-size="size16">
              어릴 때는 그저 "방능이 안돼!"라는 말만 반복하며 공유기 설정을 따라
              했지만, 지금은 그 이면에 있는 NAT 구조와 포트포워딩 개념을
              이해하게 되었다. 단순히 게임만 즐기던 시절과는 다르게, 이제는 내가
              만든 방이 곧 하나의 서버가 된다는 사실을 인지하게 되었고, 외부
              요청이 공유기에서 막히는 구조 또한 명확히 설명할 수 있게 됐다.
              그&nbsp;과정에서&nbsp;포트포워딩이라는&nbsp;설정이&nbsp;왜&nbsp;필요한지,&nbsp;그리고&nbsp;어떻게&nbsp;작동하는지도&nbsp;스스로&nbsp;설명할&nbsp;수&nbsp;있다.<br /><br />그냥
              게임을 하던 시절엔 몰랐던 걸, 개발자가 된 지금 다시 돌아보니 더
              재밌고, 더 깊이 이해된다. 특히, 단순 CS 지식만 학습해오던 걸 실제
              사례들에 적용해보면서 이런 원리였구나!! 라는 생각을 하면서
              바라보게 되니 더 머리 속에도 잘 남고 무엇보다도 재밌다. 앞으로도
              이런 실제 경험이나 사례를 CS에 녹여내는 방향으로도 포스팅을
              해봐야겠다.
            </p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_bZf4so"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_15_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_15"
                    name="aswift_15"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=3333348528&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=220&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=16&amp;uci=a!g&amp;fsb=1&amp;dtd=222"
                    data-google-container-id="a!g"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CKX28ZbqoI8DFf1JwgUdLFgaOQ"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 574,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-574"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FceSDIW%2FbtsPFjaiizE%2FAAAAAAAAAAAAAAAAAAAAAFflTWqYjz0CU3ty7RWp68j-gbaLz7XUzW2lc9yvGY_R%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252BfJ8cS9ynpqXSHlsYg1kaFDwG%252B8%253D"
                  data-title="님 방능임? 스타크래프트/워크래프트 포트포워딩의 원리"
                  data-description='추억의 "방능"공유기를 사용하는 집에서 스타크래프트, 워크래프트 같은 게임을 했던 사람이라면, 방능이라는 단어를 한 번씩 들어봤을거라 생각한다. 내가 만든 게임 방에 다른 사람이 들어올 수 있는 상태를 뜻하는 말로, 그 시절에는 방능이 안되면 포트포워딩을 해야했고, 네이버를 뒤져서 방법을 찾아보면 공유기에서 설정할 수 있다는 말을 듣고 마구잡이로 따라했었다. 최근 스타크래프트 영상을 몇 개 보다보니 갑자기 그 시절이 생각났다. 그 때는 단순 따라하기만했던 블로그의 설정들을 개발자가 된 지금 왜 공유기 설정이 필요했는지, 게임을 호스팅한다는 게 무슨 의미인지 정리해볼 수 있었다. 방장이 호스트인 P2P 통신스타크래프트, 워크래프트는 P2P 방식이다. 서버가 방을 관리하는 것이 아닌, 내가 직접 방장이..'
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/574"
                  data-relative-pc-url="/574"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="574"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="574"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <div class="post-tags">
          <a
            href="/tag/%EA%B3%B5%EC%9C%A0%EA%B8%B0%20%ED%8F%AC%ED%8A%B8%ED%8F%AC%EC%9B%8C%EB%94%A9"
            >공유기 포트포워딩</a
          >,
          <a
            href="/tag/%EC%8A%A4%ED%83%80%ED%81%AC%EB%9E%98%ED%94%84%ED%8A%B8%20%EB%B0%A9%EB%8A%A5"
            >스타크래프트 방능</a
          >,
          <a
            href="/tag/%EC%8A%A4%ED%83%80%ED%81%AC%EB%9E%98%ED%94%84%ED%8A%B8%20%EB%B0%A9%EB%8A%A5%20%EC%9B%90%EB%A6%AC"
            >스타크래프트 방능 원리</a
          >,
          <a
            href="/tag/%EC%9B%8C%ED%81%AC%EB%9E%98%ED%94%84%ED%8A%B8%20%EB%B0%A9%EB%8A%A5"
            >워크래프트 방능</a
          >,
          <a
            href="/tag/%EC%9B%8C%ED%81%AC%EB%9E%98%ED%94%84%ED%8A%B8%20%EB%B0%A9%EB%8A%A5%20%EC%9B%90%EB%A6%AC"
            >워크래프트 방능 원리</a
          >,
          <a href="/tag/%ED%8F%AC%ED%8A%B8%ED%8F%AC%EC%9B%8C%EB%94%A9"
            >포트포워딩</a
          >
        </div>

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry574Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5820797%2Fattach%2F84e692d25a0448cf831e7c997f087817"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://gameperson.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >푸른바다거북이</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.31 17:23
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26820703"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘봤습니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://new.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >정보왕창</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.31 18:07
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26821627"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤습니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F8132221%2Fattach%2F87ed3a0619004025aebdeb4ecf64dc96"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://myungheelee17.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >Myunghee</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.01 07:16
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26829926"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    안녕하세요. 만나서 반가워요.<br />나는 당신의 기사를 읽는
                    것이 정말 즐거웠습니다.<br />정말 좋았어요 계속
                    올려주세요.<br />자주 방문하겠습니다. 평화와 행복을
                    기원합니다.<br />오늘도 즐겁고 편안한 하루 보내세요.
                    [비밀댓글]
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://good.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >욜로와요</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.01 11:19
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26836648"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 봤어요.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7840194%2Fattach%2Fef15d6ca5c754bfe870a7cf4a492aa76"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://yjh0616.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >행복만땅가득</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.02 08:04
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26856990"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘보고 갑니다~</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F207031%2Fattach%2F106f4bfec5824eeba651f9c4a79377a2"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author"
                      ><img
                        src="https://damduck01.com/favicon.ico"
                        width="16"
                        height="16"
                        alt="Favicon of https://damduck01.com"
                        onerror="this.onerror=null;this.parentNode.removeChild(this)" />
                      <img
                        src="https://damduck01.com/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://damduck01.com"
                        onclick="return openLinkInNewWindow(this)"
                        >담덕.</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick='TistoryProfile.show(event, this, {"blogId":207031,"title":"담덕이의 탐방일지","url":"https://damduck01.com","nickname":"담덕.","items":[{"title":"facebook","url":"http://www.facebook.com/damduck01","d":0,"info":"","iconurl":"https://facebook.com/favicon.ico"},{"title":"twitter","url":"http://twitter.com/damduck01","d":1,"info":"twitter,damduck01","iconurl":"https://twitter.com/favicon.ico"}],"isSubscriber":false,"device":"web_pc"}); return false;'
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.02 20:42
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26872881"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    어~ 음~ 전 방능이라는 말을 처음 들었네요. 스타크래프트를 잘
                    하지 않기도 했고 PC방에서 하는 게 대부분이었어서... 😅
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Ftistory_admin%2Fstatic%2Fmanage%2Fimages%2Fr3%2Fdefault_L.png"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://sky.pluscode.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >한달동안</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.07 19:02
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=574&amp;commentId=26993912"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고있어요~</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_574"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(574, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/574"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 574); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[574] = true;
          findFragmentAndHighlight(574);
        </script>
      </article>

      <!-- 게시글 히어로 섹션 -->
      <section class="post-hero">
        <div
          class="post-hero-bg"
          style="
            background-image: url('https://img1.daumcdn.net/thumb/R750x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FraUNz%2FbtsPlG5UMka%2FAAAAAAAAAAAAAAAAAAAAAFwPiiMgOpyGGWvrPIQ5eAvXEEtT8H26AsvTfjQwV4B3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252FuQvzQk3sNAIOuvNEo9q3MIM3ss%253D');
          "
        ></div>

        <div class="post-hero-overlay"></div>

        <!-- 히어로 내 헤더 -->
        <header class="site-header hero-header">
          <div class="header-container">
            <h1 class="site-title">
              <a href="https://mag1c.tistory.com/">개발잘하고싶다</a>
            </h1>
            <div class="header-controls">
              <button class="search-toggle" aria-label="검색">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
              <button class="menu-toggle" aria-label="메뉴">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="post-hero-content">
          <h1 class="post-hero-title">
            오픈소스 기여하기) NestJS Express↔Fastify 미들웨어 등록 일관성
            개선하기
          </h1>
          <div class="post-hero-meta">
            <span class="post-hero-category">OpenSource</span>

            <span class="post-hero-date">2025. 7. 16. 23:24</span>
          </div>

          <!-- 게시글 소유자 관리 버튼 -->

          <div class="post-hero-admin">
            <a
              href="https://mag1c.tistory.com/manage/post/573?returnURL=ENTRY"
              class="hero-admin-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
              <span>수정</span>
            </a>
            <a href="#" onclick="" class="hero-admin-btn">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"
                ></path>
              </svg>
              <span>비공개</span>
            </a>
            <a
              href="#"
              onclick="deleteEntry(573); return false;"
              class="hero-admin-btn delete-btn"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
              <span>삭제</span>
            </a>
          </div>
        </div>
      </section>

      <article class="single-post">
        <!-- 보호글 처리 -->

        <div class="post-content">
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-OTmbULCyVaAvzV1W"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_NrpgKE"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">728x90</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 728px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_16_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 728px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_16"
                    name="aswift_16"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 728px;
                      height: 90px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="728"
                    height="90"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=90&amp;adk=3693308320&amp;adf=37292754&amp;w=728&amp;lmt=1755948571&amp;format=728x90&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=224&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=17&amp;uci=a!h&amp;fsb=1&amp;dtd=227"
                    data-google-container-id="a!h"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CK6M8pbqoI8DFXZIwgUdXe4T0A"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="tt_article_useless_p_margin contents_style">
            <h2 data-ke-size="size26">nest의 e2e</h2>
            <p data-ke-size="size16">
              이 글을 읽으시는 nest를 활용하는 개발자분들은, e2e를 작성하시나요?
              어떻게 작성하고 계신가요?<br />보통은
              <a
                href="https://docs.nestjs.com/fundamentals/testing#end-to-end-testing"
                target="_blank"
                rel="noopener"
                >nest의 공식 문서 가이드</a
              >에 따라
              <span style="background-color: #99cefa">TestingModule</span>을
              통해
              <span style="background-color: #99cefa">NestApplication</span>을
              <span style="background-color: #99cefa">init</span>한 후 사용하실
              겁니다.
            </p>
            <pre
              id="code_1752667437665"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">beforeAll(<span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> moduleRef = <span class="hljs-keyword" style="">await</span> Test.createTestingModule({
<span class="hljs-attr" style="">imports</span>: [CatsModule],
})
.overrideProvider(CatsService)
.useValue(catsService)
.compile();

app = moduleRef.createNestApplication();
app.use(thirdPartyMiddleWare()); <span class="hljs-comment" style="">// injected middleware</span>
<span class="hljs-keyword" style="">await</span> app.init();
});</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <span style="color: #ee2323">express에서는</span> 미들웨어를
              테스트 애플리케이션에 등록해야한다면,
              <span style="color: #ee2323">반드시 초기화 전에 등록</span
              >해야합니다. 그렇지 않으면 미들웨어가 등록되지 않죠.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">일관되지 않은 개발 경험</h2>
            <p data-ke-size="size16">
              아시겠지만, 이 테스팅 과정은 실제 프로덕션의 NestApplication을
              생성하는 과정과는 조금 상이합니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="808"
              data-origin-height="1260"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/JV9zA/btsPl97ynft/AAAAAAAAAAAAAAAAAAAAAD7XKd2EBCc5MVt_CZprxZ3lLIUF0d3URb_PUO3j6H-z/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0M27e3wBGSVPAT5keKDEjrgqrIo%3D"
                data-phocus="https://blog.kakaocdn.net/dna/JV9zA/btsPl97ynft/AAAAAAAAAAAAAAAAAAAAAD7XKd2EBCc5MVt_CZprxZ3lLIUF0d3URb_PUO3j6H-z/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0M27e3wBGSVPAT5keKDEjrgqrIo%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/JV9zA/btsPl97ynft/AAAAAAAAAAAAAAAAAAAAAD7XKd2EBCc5MVt_CZprxZ3lLIUF0d3URb_PUO3j6H-z/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0M27e3wBGSVPAT5keKDEjrgqrIo%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FJV9zA%2FbtsPl97ynft%2FAAAAAAAAAAAAAAAAAAAAAD7XKd2EBCc5MVt_CZprxZ3lLIUF0d3URb_PUO3j6H-z%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D0M27e3wBGSVPAT5keKDEjrgqrIo%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="409"
                  height="638"
                  data-origin-width="808"
                  data-origin-height="1260"
                  data-phocus-index="37"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              nest 컨테이너가 어떻게 생성되고, 모듈 간의 의존성을 어떻게
              효율적으로 찾아가는지 등은 이 포스팅에서 다루지 않습니다. 관련해서
              궁금하시다면, 정리해놓은 포스팅들(<a
                href="https://mag1c.tistory.com/553"
                target="_blank"
                rel="noopener"
                >포스팅1</a
              >,
              <a
                href="https://mag1c.tistory.com/556"
                target="_blank"
                rel="noopener"
                >포스팅2</a
              >)이 있으니 참고해보시면 좋을 것 같습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              요약하자면, NestFactory를 통해 NestApplication을 create 함수를
              사용하여 내부적으로 초기화가 되어 나온 NestApplication 인스턴스를
              사용할 수 있고, 이 애플리케이션에 필요한 미들웨어들을 주입하여
              사용하게 됩니다.
            </p>
            <pre
              id="code_1752669776907"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-keyword" style="">const</span> app = <span class="hljs-keyword" style="">await</span> NestFactory.create&lt;NestExpressApplication&gt;(AppModule);
app.use(something);</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <span style="color: #ee2323"
                >여기까지 오셨다면, 뭔가 이상함을 느꼈을 수도 있습니다.</span
              >
              테스트 환경에서는 TestingModule의 createNestApplication 함수는
              NestApplication을 초기화해주지 않습니다. 그래서 개발자가 직접
              <b
                ><i><u>create &gt; use &gt; init </u></i></b
              >과정을 모두 호출하여 테스트에 필요한 애플리케이션을 생성하게
              됩니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              <b
                ><i><u>제가 감히 추측해보자면</u>,</i></b
              >
              테스트 환경에서는 초기화 전 상태를 테스트하거나 모킹 등 더 세밀한
              제어들이 필요하기 때문에 테스트 환경과 운영 환경의 애플리케이션
              초기화 방식이 다를 것이라 생각합니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              다시 돌아와서, 문제는 하나 더 발생합니다. express에서는 이 순서를
              지키지 않아도, 테스트 애플리케이션의 초기화 과정에서 에러가
              발생하지 않습니다.&nbsp;
              <span style="color: #ee2323"
                >하지만 fastify에서는 미들웨어를 등록하는 구간에서 에러가
                발생합니다.&nbsp;</span
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1752671221600"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">describe(<span class="hljs-string" style="">"express (e2e)"</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">let</span> app: NestExpressApplication;
beforeAll(<span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> <span class="hljs-built_in" style="">module</span> = <span class="hljs-keyword" style="">await</span> Test.createTestingModule({
<span class="hljs-attr" style="">imports</span>: [AppModule],
}).compile();
app = <span class="hljs-built_in" style="">module</span>.createNestApplication&lt;NestExpressApplication&gt;({
<span class="hljs-attr" style="">bufferLogs</span>: <span class="hljs-literal" style="">true</span>,
});
<span class="hljs-keyword" style="">await</span> app.init();
app.use(requestLoggerMiddleware);
});

describe(<span class="hljs-string" style="">"health"</span>, <span class="hljs-function" style="">() =&gt;</span> {
it(<span class="hljs-string" style="">"should return healthy"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">await</span> request(app.getHttpServer()).get(<span class="hljs-string" style="">"/health"</span>).expect(<span class="hljs-number" style="">200</span>);
});
});
});</code></pre>
            <pre
              id="code_1752671232516"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;">describe(<span class="hljs-string" style="">"fastify (e2e)"</span>, <span class="hljs-function" style="">() =&gt;</span> {
<span class="hljs-keyword" style="">let</span> app: NestFastifyApplication;
beforeAll(<span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">const</span> <span class="hljs-built_in" style="">module</span> = <span class="hljs-keyword" style="">await</span> Test.createTestingModule({
<span class="hljs-attr" style="">imports</span>: [AppModule],
}).compile();
app = <span class="hljs-built_in" style="">module</span>.createNestApplication&lt;NestFastifyApplication&gt;(
<span class="hljs-keyword" style="">new</span> FastifyAdapter(),
{ <span class="hljs-attr" style="">bufferLogs</span>: <span class="hljs-literal" style="">true</span> }
);
app.use(requestLoggerMiddleware);
<span class="hljs-keyword" style="">await</span> app.init();
<span class="hljs-keyword" style="">await</span> app.getHttpAdapter().getInstance().ready();
});
describe(<span class="hljs-string" style="">"health"</span>, <span class="hljs-function" style="">() =&gt;</span> {
it(<span class="hljs-string" style="">"should return healthy"</span>, <span class="hljs-keyword" style="">async</span> () =&gt; {
<span class="hljs-keyword" style="">await</span> request(app.getHttpServer()).get(<span class="hljs-string" style="">"/health"</span>).expect(<span class="hljs-number" style="">200</span>);
});
});
});</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1854"
              data-origin-height="1516"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/EQ56L/btsPmxAbZZF/AAAAAAAAAAAAAAAAAAAAAPLFuGVH5HgF0y2yhHuSHD18g0ox6h78WdkF3bhMmUAi/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=lepvx4pp%2BP9cbIgrufAJ4TGYAcM%3D"
                data-phocus="https://blog.kakaocdn.net/dna/EQ56L/btsPmxAbZZF/AAAAAAAAAAAAAAAAAAAAAPLFuGVH5HgF0y2yhHuSHD18g0ox6h78WdkF3bhMmUAi/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=lepvx4pp%2BP9cbIgrufAJ4TGYAcM%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/EQ56L/btsPmxAbZZF/AAAAAAAAAAAAAAAAAAAAAPLFuGVH5HgF0y2yhHuSHD18g0ox6h78WdkF3bhMmUAi/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=lepvx4pp%2BP9cbIgrufAJ4TGYAcM%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FEQ56L%2FbtsPmxAbZZF%2FAAAAAAAAAAAAAAAAAAAAAPLFuGVH5HgF0y2yhHuSHD18g0ox6h78WdkF3bhMmUAi%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dlepvx4pp%252BP9cbIgrufAJ4TGYAcM%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="640"
                  height="523"
                  data-origin-width="1854"
                  data-origin-height="1516"
                  data-phocus-index="38"
              /></span>
            </figure>
            <p></p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">왜 다른걸까?</h2>
            <p data-ke-size="size16">
              <a
                style="
                  background-color: #e6f5ff;
                  color: #0070d1;
                  text-align: start;
                "
                href="https://expressjs.com/en/guide/using-middleware.html"
                >express</a
              >에서는 모든 것이 use를 통해 사용되죠. 이는 미들웨어 뿐 아니라
              라우트 등도 모두 동일합니다. 하지만 fastify는
              <a
                href="https://fastify.dev/docs/latest/Reference/Middleware/"
                target="_blank"
                rel="noopener"
                >공식 문서</a
              >에서도 나와있듯이 3.0.0버전 이후부터 @fastify/express,
              @fastify/middie등의 플러그인을 통해 미들웨어를 주입하도록
              되어있습니다.&nbsp;
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1752673286492"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// FastifyAdapter</span>
<span class="hljs-keyword" style="">public</span> <span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-title" style="">init</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">this</span>.isMiddieRegistered) {
<span class="hljs-keyword" style="">return</span>;
}
<span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">this</span>.registerMiddie();

<span class="hljs-comment" style="">// Register any pending middlewares that were added before init</span>
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">this</span>.pendingMiddlewares.length &gt; <span class="hljs-number" style="">0</span>) {
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">const</span> { args } <span class="hljs-keyword" style="">of</span> <span class="hljs-built_in" style="">this</span>.pendingMiddlewares) {
(<span class="hljs-built_in" style="">this</span>.instance.use <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>)(...args);
}
<span class="hljs-built_in" style="">this</span>.pendingMiddlewares = [];
}
}

<span class="hljs-keyword" style="">private</span> <span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-title" style="">registerMiddie</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-built_in" style="">this</span>.isMiddieRegistered = <span class="hljs-literal" style="">true</span>;
<span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">this</span>.register(
<span class="hljs-keyword" style="">import</span>(<span class="hljs-string" style="">'@fastify/middie'</span>) <span class="hljs-keyword" style="">as</span> Parameters&lt;TInstance[<span class="hljs-string" style="">'register'</span>]&gt;[<span class="hljs-number" style="">0</span>],
);
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              nest는 fastify를 초기화하는 시점에, @fastify/middie 플러그인을
              등록하도록 되어있습니다. 이런 이유 때문에, fastify는 정확한 실행
              순서를 지키지 않으면 FastifyAdapter에 미들웨어를 등록하지 못하고
              에러가 발생하게 됩니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">일관된 테스트를 위한 기여</h2>
            <p data-ke-size="size16">
              처음에는, 단순하게 테스트 환경에서 자동으로 어댑터를 초기화
              해보기로 했습니다.
            </p>
            <pre
              id="code_1752674054765"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// TestingModule.createNestApplication()</span>
<span class="hljs-comment" style="">// 첫 번째 시도: TestingModule에 auto-init 로직 추가</span>
<span class="hljs-keyword" style="">if</span> (<span class="hljs-keyword" style="">typeof</span> (httpAdapter <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>)?.init === <span class="hljs-string" style="">'function'</span>) {
<span class="hljs-keyword" style="">const</span> originalInit = (proxy <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>).init;
(proxy <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>).init = <span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-keyword" style="">function</span> (<span class="hljs-params" style=""><span class="hljs-built_in" style="">this</span>: <span class="hljs-built_in" style="">any</span></span>) </span>{
<span class="hljs-keyword" style="">await</span> (httpAdapter <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>).init(); <span class="hljs-comment" style="">// 어댑터 자동 초기화</span>
<span class="hljs-keyword" style="">if</span> (originalInit) {
<span class="hljs-keyword" style="">return</span> originalInit.call(<span class="hljs-built_in" style="">this</span>);
}
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">this</span>;
};
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              하지만 이 방식의 문제는 NestApplication 생성은 동기 함수이고,
              FastifyAdapter의 init은 비동기 함수이기 때문에, 근본적으로
              돌아가지 않습니다. 미들웨어 등록 시점에는 여전히 플러그인 등록이
              Pending 상태일 수도 있기 때문이죠. 이러한 프록시 래핑으로는 실제
              미들웨어 타이밍을 제어할 수 없었습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              위 문제를 해결하기 위해 생각하다,
              <b
                ><i
                  ><u
                    >스스로 내린 결론은 애플리케이션 생성 함수를 비동기함수로
                    추가하는 방향이었습니다.</u
                  ></i
                ></b
              >
              그러다보니, 우선 개발자에게 명확한 에러 메시지를 유도하고, PR을
              마무리한 후 새로운 이슈를 제기하려고 했습니다. use를 오버로딩해서,
              에러메시지만 제공하는 방향으로 다시 커밋을 올렸어요.
            </p>
            <pre
              id="code_1752674460152"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// FastifyAdapter</span>
<span class="hljs-keyword" style="">public</span> <span class="hljs-function" style=""><span class="hljs-title" style="">use</span>(<span class="hljs-params" style="">...args: <span class="hljs-built_in" style="">any</span>[]</span>)</span> {
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">this</span>.isMiddieRegistered) {
Logger.warn(
<span class="hljs-string" style="">'Middleware registration requires the "@fastify/middie" plugin to be registered first. '</span> +
<span class="hljs-string" style="">'Make sure to call app.init() before registering middleware with the Fastify adapter. '</span> +
<span class="hljs-string" style="">'See https://github.com/nestjs/nest/issues/15310 for more details.'</span>,
FastifyAdapter.name,
);
<span class="hljs-keyword" style="">throw</span> <span class="hljs-keyword" style="">new</span> <span class="hljs-built_in" style="">TypeError</span>(<span class="hljs-string" style="">'this.instance.use is not a function'</span>);
}
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">super</span>.use(...args);
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              하지만 우리의(?) 카밀 아저씨(?)가 좋은 아이디어를 제시해줬습니다.
              메인테이너가 제안해준 의견 덕분에 미들웨어를 큐에 캐싱해두고
              지연등록하는 FastifyAdapter의 미들웨어 등록 시스템 기능을 만들 수
              있었습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p></p>
            <figure
              class="imageblock alignCenter"
              data-ke-mobilestyle="widthOrigin"
              data-origin-width="1600"
              data-origin-height="464"
            >
              <span
                data-url="https://blog.kakaocdn.net/dna/9MbXF/btsPlhrSmo1/AAAAAAAAAAAAAAAAAAAAADexr9msRaPh859HN3oxrMG-a99B3dIY0ssmKq18By7r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0pI6PQOU8y1gSTZ%2F0coZzCm4iC0%3D"
                data-phocus="https://blog.kakaocdn.net/dna/9MbXF/btsPlhrSmo1/AAAAAAAAAAAAAAAAAAAAADexr9msRaPh859HN3oxrMG-a99B3dIY0ssmKq18By7r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0pI6PQOU8y1gSTZ%2F0coZzCm4iC0%3D"
                ><img
                  src="https://blog.kakaocdn.net/dna/9MbXF/btsPlhrSmo1/AAAAAAAAAAAAAAAAAAAAADexr9msRaPh859HN3oxrMG-a99B3dIY0ssmKq18By7r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&amp;expires=1756652399&amp;allow_ip=&amp;allow_referer=&amp;signature=0pI6PQOU8y1gSTZ%2F0coZzCm4iC0%3D"
                  srcset="
                    https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F9MbXF%2FbtsPlhrSmo1%2FAAAAAAAAAAAAAAAAAAAAADexr9msRaPh859HN3oxrMG-a99B3dIY0ssmKq18By7r%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D0pI6PQOU8y1gSTZ%252F0coZzCm4iC0%253D
                  "
                  onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';"
                  loading="lazy"
                  width="794"
                  height="230"
                  data-origin-width="1600"
                  data-origin-height="464"
                  data-phocus-index="39"
              /></span>
            </figure>
            <p></p>
            <p style="position: absolute" data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <pre
              id="code_1752674851306"
              class="typescript"
              data-ke-language="typescript"
              data-ke-type="codeblock"
              style=""
            ><code class="hljs" style="margin-top: 0px; margin-bottom: 0px;"><span class="hljs-comment" style="">// FastifyAdapter</span>
<span class="hljs-keyword" style="">private</span> pendingMiddlewares: <span class="hljs-built_in" style="">Array</span>&lt;{ <span class="hljs-attr" style="">args</span>: <span class="hljs-built_in" style="">any</span>[] }&gt; = [];

<span class="hljs-keyword" style="">public</span> <span class="hljs-keyword" style="">async</span> <span class="hljs-function" style=""><span class="hljs-title" style="">init</span>(<span class="hljs-params" style=""></span>)</span> {
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">this</span>.isMiddieRegistered) {
<span class="hljs-keyword" style="">return</span>;
}
<span class="hljs-keyword" style="">await</span> <span class="hljs-built_in" style="">this</span>.registerMiddie();

<span class="hljs-comment" style="">// Register any pending middlewares that were added before init</span>
<span class="hljs-keyword" style="">if</span> (<span class="hljs-built_in" style="">this</span>.pendingMiddlewares.length &gt; <span class="hljs-number" style="">0</span>) {
<span class="hljs-keyword" style="">for</span> (<span class="hljs-keyword" style="">const</span> { args } <span class="hljs-keyword" style="">of</span> <span class="hljs-built_in" style="">this</span>.pendingMiddlewares) {
(<span class="hljs-built_in" style="">this</span>.instance.use <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>)(...args);
}
<span class="hljs-built_in" style="">this</span>.pendingMiddlewares = [];
}
}

<span class="hljs-keyword" style="">public</span> <span class="hljs-function" style=""><span class="hljs-title" style="">use</span>(<span class="hljs-params" style="">...args: <span class="hljs-built_in" style="">any</span>[]</span>)</span> {
<span class="hljs-comment" style="">// Fastify requires @fastify/middie plugin to be registered before middleware can be used.</span>
<span class="hljs-comment" style="">// If middie is not registered yet, we queue the middleware and register it later during init.</span>
<span class="hljs-keyword" style="">if</span> (!<span class="hljs-built_in" style="">this</span>.isMiddieRegistered) {
<span class="hljs-built_in" style="">this</span>.pendingMiddlewares.push({ args });
<span class="hljs-keyword" style="">return</span> <span class="hljs-built_in" style="">this</span>;
}
<span class="hljs-keyword" style="">return</span> (<span class="hljs-built_in" style="">this</span>.instance.use <span class="hljs-keyword" style="">as</span> <span class="hljs-built_in" style="">any</span>)(...args);
}</code></pre>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">&nbsp;</p>
            <h2 data-ke-size="size26">마치며...</h2>
            <p data-ke-size="size16">
              글을 정리하다보니 저 혼자 오픈소스의 은사(?)라고 생각하는
              김인제님께서 말씀하시던 게 생각납니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p style="text-align: center" data-ke-size="size16">
              <u
                ><i><b>"오픈소스 기여로 수억명에게 임팩트 만들기"</b></i></u
              >
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              실제로 몇 명이나 될 지는 모르겠지만, express와 fastify 모두
              app.use() 호출 타이밍에 제약이 없어졌기 때문에 동일한 코드
              패턴으로 미들웨어 등록이 가능해졌습니다. 서버 프레임워크의 변환 시
              조금이나마 코드 변경을 줄일 수 있지 않을까요? DX 향상에 미약하나마
              도움이 되는 기여였으면 좋겠습니다.
            </p>
            <p data-ke-size="size16">&nbsp;</p>
            <p data-ke-size="size16">
              항상 기여하면서 느끼는거지만, 오픈소스 자체에 깊은 이해와 더불어
              오픈소스 구현에 사용된 다른 프레임워크나 그 근간이 되는 개념들을
              자연스레 학습할 수 있게 되고, 더 깊게 이해할 수 있는 것 같습니다.
              오픈소스의 진정한 가치는 이런 데서 나오는 게 아닌가 싶습니다.
            </p>
          </div>
          <!-- System - START -->
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adfit">
              <div class="revenue_unit_info">728x90</div>
              <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-isTIwaHDB2LH285K"
                data-ad-width="728px"
                data-ad-height="90px"
                id="kakao_ad_XaxGBk"
              ></ins>
              <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async="async"
              ></script>
            </div>
          </div>
          <div class="revenue_unit_wrap">
            <div class="revenue_unit_item adsense">
              <div class="revenue_unit_info">300x250</div>
              <script
                src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
                async="async"
              ></script>
              <ins
                class="adsbygoogle"
                style="display: inline-block; width: 300px; height: 0px"
                data-ad-host="ca-host-pub-9691043933427338"
                data-ad-client="ca-pub-7990673941637819"
                data-adsbygoogle-status="done"
                data-ad-status="unfilled"
                ><div
                  id="aswift_17_host"
                  style="
                    border: none;
                    height: 0px;
                    width: 300px;
                    margin: 0px;
                    padding: 0px;
                    position: relative;
                    visibility: visible;
                    background-color: transparent;
                    display: inline-block;
                    overflow: hidden;
                    opacity: 0;
                  "
                >
                  <iframe
                    id="aswift_17"
                    name="aswift_17"
                    browsingtopics="true"
                    style="
                      left: 0;
                      position: absolute;
                      top: 0;
                      border: 0;
                      width: 300px;
                      height: 250px;
                      min-height: auto;
                      max-height: none;
                      min-width: auto;
                      max-width: none;
                    "
                    sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
                    width="300"
                    height="250"
                    frameborder="0"
                    marginwidth="0"
                    marginheight="0"
                    vspace="0"
                    hspace="0"
                    allowtransparency="true"
                    scrolling="no"
                    allow="attribution-reporting; run-ad-auction"
                    src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;h=250&amp;adk=2709625604&amp;adf=1263809198&amp;w=300&amp;lmt=1755948571&amp;format=300x250&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;wgl=1&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571420&amp;bpp=1&amp;bdt=87&amp;idt=229&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7CneoEr%7C&amp;abl=CS&amp;pfx=0&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=18&amp;uci=a!i&amp;fsb=1&amp;dtd=231"
                    data-google-container-id="a!i"
                    tabindex="0"
                    title="Advertisement"
                    aria-label="Advertisement"
                    data-google-query-id="CM7285bqoI8DFc1OwgUdmKIadA"
                    data-load-complete="true"
                  ></iframe></div
              ></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <!-- System - END -->

          <div class="container_postbtn #post_button_group">
            <div class="postbtn_like">
              <script>
                window.ReactionButtonType = "reaction";
                window.ReactionApiUrl = "//mag1c.tistory.com/reaction";
                window.ReactionReqBody = {
                  entryId: 573,
                };
              </script>
              <div
                class="wrap_btn"
                id="reaction-573"
                data-tistory-react-app="Reaction"
              >
                <button
                  class="btn_post uoc-icon"
                  data-tiara-action-name="공감_클릭"
                >
                  <div class="uoc-icon empathy_up_without_ani like_on">
                    <span class="ico_postbtn ico_like">좋아요</span
                    ><span class="txt_like uoc-count">13</span>
                  </div>
                </button>
              </div>
              <div class="wrap_btn wrap_btn_share">
                <button
                  type="button"
                  class="btn_post sns_btn btn_share"
                  aria-expanded="false"
                  data-thumbnail-url="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FraUNz%2FbtsPlG5UMka%2FAAAAAAAAAAAAAAAAAAAAAFwPiiMgOpyGGWvrPIQ5eAvXEEtT8H26AsvTfjQwV4B3%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D%252FuQvzQk3sNAIOuvNEo9q3MIM3ss%253D"
                  data-title="오픈소스 기여하기) NestJS Express&amp;harr;Fastify 미들웨어 등록 일관성 개선하기"
                  data-description="nest의 e2e이 글을 읽으시는 nest를 활용하는 개발자분들은, e2e를 작성하시나요? 어떻게 작성하고 계신가요?보통은 nest의 공식 문서 가이드에 따라 TestingModule을 통해 NestApplication을 init한 후 사용하실 겁니다.beforeAll(async () =&gt; { const moduleRef = await Test.createTestingModule({ imports: [CatsModule], }) .overrideProvider(CatsService) .useValue(catsService) .compile(); app = moduleRef.createNestApplication(); app.use(thirdPartyMiddleWare()); // i.."
                  data-profile-image="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
                  data-profile-name="mag1c"
                  data-pc-url="https://mag1c.tistory.com/573"
                  data-relative-pc-url="/573"
                  data-blog-title="개발잘하고싶다"
                >
                  <span class="ico_postbtn ico_share">공유하기</span>
                </button>
                <div class="layer_post" id="tistorySnsLayer"></div>
              </div>
              <div class="wrap_btn">
                <button
                  type="button"
                  class="btn_post"
                  data-entry-id="573"
                  data-tiara-action-name="글통계_클릭"
                >
                  <span class="ico_postbtn ico_statistics">통계</span>
                </button>
              </div>
              <div
                class="wrap_btn wrap_btn_etc"
                data-entry-id="573"
                data-entry-visibility="public"
                data-category-visibility="public"
              >
                <button
                  type="button"
                  class="btn_post btn_etc1"
                  aria-expanded="false"
                >
                  <span class="ico_postbtn ico_etc">게시글 관리</span>
                </button>
                <div class="layer_post" id="tistoryEtcLayer"></div>
              </div>
            </div>
            <div class="postbtn_ccl" data-ccl-type="2" data-ccl-derive="1">
              <a
                href="https://creativecommons.org/licenses/by/4.0/deed.ko"
                target="_blank"
                class="link_ccl"
                rel="license"
              >
                <span class="bundle_ccl">
                  <span class="ico_postbtn ico_ccl1">저작자표시</span>
                </span>
                <span class="screen_out">(새창열림)</span>
              </a>
            </div>
            <!--
<rdf:RDF xmlns="https://web.resource.org/cc/" xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:rdf="https://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<license rdf:resource="https://creativecommons.org/licenses/by/4.0/deed.ko" />
</Work>
<License rdf:about="https://creativecommons.org/licenses/by/4.0/deed.ko">
<permits rdf:resource="https://web.resource.org/cc/Reproduction"/>
<permits rdf:resource="https://web.resource.org/cc/Distribution"/>
<requires rdf:resource="https://web.resource.org/cc/Notice"/>
<requires rdf:resource="https://web.resource.org/cc/Attribution"/>
<permits rdf:resource="https://web.resource.org/cc/DerivativeWorks"/>

</License>
</rdf:RDF>
-->
            <div data-tistory-react-app="SupportButton"></div>
          </div>
        </div>

        <!-- 게시글 태그 -->

        <!-- 게시글 액션 버튼 -->
        <div class="post-actions">
          <button class="action-btn like-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
              ></path>
            </svg>
            <span>공감</span>
          </button>
          <button class="action-btn share-btn" onclick="">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>퍼가기</span>
          </button>
          <button class="action-btn subscribe-btn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>구독하기</span>
          </button>
        </div>

        <!-- 티스토리 기본 액션 버튼 (숨김) -->
        <div style="display: none"></div>

        <!-- 작성자 프로필 -->
        <div class="author-profile">
          <div class="author-avatar">
            <img
              src="https://tistory1.daumcdn.net/tistory/5765047/attach/03766535b5904f7e828f4bfd24bb1970"
              alt="mag1c"
              onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_L.png'"
            />
          </div>
          <div class="author-info">
            <h3 class="author-name">mag1c</h3>
            <p class="author-desc">2년차 주니어 개발자.</p>
            <div class="author-links"></div>
          </div>
        </div>

        <!-- 댓글 -->
        <div data-tistory-react-app="Namecard">
          <div class="tt_box_namecard">
            <div class="tt_cont">
              <a class="tt_tit_cont" href="https://mag1c.tistory.com"
                >개발잘하고싶다</a
              ><a class="tt_desc" href="https://mag1c.tistory.com"
                >2년차 주니어 개발자.</a
              >
            </div>
            <a class="tt_wrap_thumb" href="https://mag1c.tistory.com"
              ><span
                class="tt_thumb_g"
                style="
                  background-image: url('https://img1.daumcdn.net/thumb/S56x56/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5765047%2Fattach%2F03766535b5904f7e828f4bfd24bb1970');
                "
              ></span
            ></a>
          </div>
        </div>
        <div id="entry573Comment">
          <section class="comments-section">
            <h3>댓글</h3>

            <div class="comment-list">
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5634297%2Fattach%2F1aa8860aad224da99c78261bd9dd40bc"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author"
                      ><img
                        src="https://lovepodo.tistory.com/favicon.ico"
                        width="16"
                        height="16"
                        alt="Favicon of https://lovepodo.tistory.com"
                        onerror="this.onerror=null;this.parentNode.removeChild(this)" />
                      <a
                        href="https://lovepodo.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >짱포도</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 09:07
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26588556"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    읽고 배워갑니다. <br />한결같이 성실하신 블로거님이 바라는
                    일 모두 승승장구하셔서 훨훨 나시길 바랍니다.
                    <br />감사합니다.
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F8001414%2Fattach%2Fa2b3c908ad8042f983add60410e604b5"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://jfancyglobal.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >jfancyglobal</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 09:07
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26588563"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    잘 보고 갑니다.<br />오늘도 행복한 하루되세요
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7889721%2Fattach%2F0c1d7acb1ede45e6b36141ae32a92f1d"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://insightego.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >시간의 정원</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 09:10
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26588591"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">
                    🛠️Express와 Fastify 간 미들웨어 등록 방식의 불일치를 해결한
                    기여는, NestJS 개발자들의 테스트 경험을 한층 더 일관되고
                    매끄럽게 만들어주는 것같군요.<br /><br />유익한 정보
                    감사합니다 ^^<br />시간되시면 제 블로그도 방문부탁드려도
                    될까요^^
                  </div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F6641691%2Fattach%2Fa9d07c2468044027941cc6d4113f0f7c"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://archisafety.com"
                        onclick="return openLinkInNewWindow(this)"
                        >♥소일만공♥</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 09:30
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26588806"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 읽고 갑니다</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7731248%2Fattach%2Fc00c239090824093b98cfba81470b199"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://davidkang9.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >데이비드강구</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 09:55
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26589091"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F5820797%2Fattach%2F84e692d25a0448cf831e7c997f087817"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <a
                        href="https://gameperson.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >푸른바다거북이</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.17 11:59
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26590770"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘보고 갑니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7158329%2Fattach%2F07efd3a6fda84ca3b92ca396d40cddca"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author"
                      ><img
                        src="https://sojione.co.kr/favicon.ico"
                        width="16"
                        height="16"
                        alt="Favicon of https://sojione.co.kr"
                        onerror="this.onerror=null;this.parentNode.removeChild(this)" />
                      <img
                        src="https://sojione.co.kr/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://sojione.co.kr"
                        onclick="return openLinkInNewWindow(this)"
                        >Issue Reporter</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.18 07:23
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26601960"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">mag1c님 좋은글 감사합니다.</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7141191%2Fattach%2Fb71b0b58ae564973ac140698137805b9"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author">
                      <img
                        src="https://100jamga.tistory.com/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://100jamga.tistory.com"
                        onclick="return openLinkInNewWindow(this)"
                        >티끌로그</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.07.20 10:48
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26632478"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다</div>
                </div>
              </div>
              <div class="comment">
                <div class="comment-avatar">
                  <img
                    src="https://img1.daumcdn.net/thumb/C100x100/?scode=mtistory2&amp;fname=https%3A%2F%2Ftistory1.daumcdn.net%2Ftistory%2F7699198%2Fattach%2F200b79ac24394db8958fadf17397d52b"
                    alt="Avatar"
                    onerror="this.src='https://t1.daumcdn.net/tistory_admin/static/manage/images/r3/default_S.png'"
                  />
                </div>
                <div class="comment-body">
                  <div class="comment-header">
                    <span class="comment-author"
                      ><img
                        src="https://go-mary.com/favicon.ico"
                        width="16"
                        height="16"
                        alt="Favicon of https://go-mary.com"
                        onerror="this.onerror=null;this.parentNode.removeChild(this)" />
                      <img
                        src="https://go-mary.com/index.gif"
                        alt="BlogIcon"
                        width="16"
                        height="16"
                        onerror="this.parentNode.removeChild(this)" />
                      <a
                        href="https://go-mary.com"
                        onclick="return openLinkInNewWindow(this)"
                        >지식 라이프 스타일</a
                      ><span
                        class="tistoryProfileLayerTrigger"
                        onclick="TistoryProfile.show(event, this, null); return false;"
                      ></span
                    ></span>
                    <span class="comment-date"
                      >2025.08.01 07:52
                      <a
                        href="/toolbar/popup/abuseReport/?entryId=573&amp;commentId=26830263"
                        onclick="window.open(this.href, 'ThisBlogReportPopup', 'width=550, height=510, toolbar=no, menubar=no, status=no, scrollbars=no'); return false;"
                        >신고</a
                      ></span
                    >
                  </div>
                  <div class="comment-content">잘 보고 갑니다</div>
                </div>
              </div>
              <div
                id="none_display_division_for_comment_list_573"
                style="display: none"
              ></div>
              <script type="text/javascript">
                setInitialEntryComments(573, 1755948570);
              </script>
            </div>

            <form
              method="post"
              action="/comment/add/573"
              onsubmit="return false"
              style="margin: 0"
            >
              <div class="comment-input-wrapper">
                <textarea
                  name="comment"
                  placeholder="댓글을 입력하세요"
                  required=""
                ></textarea>

                <div class="comment-form-footer">
                  <button
                    type="submit"
                    onclick="addComment(this, 573); return false;"
                  >
                    작성
                  </button>
                </div>
              </div>
            </form>
          </section>
        </div>
        <script type="text/javascript">
          loadedComments[573] = true;
          findFragmentAndHighlight(573);
        </script>
      </article>

      <!-- 방명록 페이지 -->
    </main>

    <!-- 플로팅 버튼 -->
    <div class="floating-buttons">
      <button class="subscribe-floating" aria-label="구독">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
        </svg>
        <span>구독</span>
      </button>
      <a href="/guestbook" class="guestbook-floating" aria-label="방명록">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
          ></path>
        </svg>
        <span>방명록</span>
      </a>
    </div>

    <!-- 푸터 -->
    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-links"></div>
        <div class="footer-copyright">
          <p>
            Powered by TISTORY | Designed by
            <a href="https://mag1c.tistory.com" target="_blank">mag1c</a>
          </p>
        </div>
      </div>
    </footer>

    <script src="https://tistory1.daumcdn.net/tistory/5765047/skin/images/script.js?_version_=1755948427"></script>
    <div class="#menubar menu_toolbar">
      <h2 class="screen_out">티스토리툴바</h2>
      <div
        class="btn_tool btn_tool_type1"
        id="menubar_wrapper"
        data-tistory-react-app="Menubar"
      >
        <button class="btn_menu_toolbar btn_menu_type2">
          <span class="img_common_tistory ico_tistory_sign">관리메뉴열기</span>
        </button>
        <div class="header_layer layer_profile" style="display: none">
          <div class="inner_header_layer">
            <h2 class="screen_out">개인정보</h2>
            <div class="info_profile">
              <a class="txt_id txt_id_type2" href="#">mag1c</a
              ><span class="txt_email">95jjh@naver.com</span
              ><a
                class="link_setting link_setting_type2"
                href="https://www.tistory.com/member"
                >계정관리</a
              >
            </div>
            <div class="wrap_list #blogList" style="max-height: 300px">
              <div>
                <h3 class="tit_list_type">운영중인 블로그</h3>
                <div class="info_profile info_profile_type1">
                  <a class="txt_id" href="https://mag1c.tistory.com"
                    >개발잘하고싶다</a
                  ><a
                    class="img_common_tistory link_edit"
                    href="https://mag1c.tistory.com/manage/post"
                    >쓰기</a
                  ><a
                    class="img_common_tistory link_setting"
                    href="https://mag1c.tistory.com/manage"
                    >블로그 관리</a
                  >
                </div>
                <div class="info_profile info_profile_type1">
                  <a class="txt_id" href="https://customskintest.tistory.com"
                    >custom-skin</a
                  ><a
                    class="img_common_tistory link_edit"
                    href="https://customskintest.tistory.com/manage/post"
                    >쓰기</a
                  ><a
                    class="img_common_tistory link_setting"
                    href="https://customskintest.tistory.com/manage"
                    >블로그 관리</a
                  >
                </div>
              </div>
            </div>
            <div class="wrap_toolbar">
              <h2 class="screen_out">이동링크목록</h2>
              <ul class="list_toolbar">
                <li>
                  <a class="link_list" href="https://www.tistory.com"
                    >티스토리 홈</a
                  >
                </li>
                <li>
                  <a class="link_list" href="https://www.tistory.com/feed"
                    >피드</a
                  >
                </li>
                <li><a class="link_list" href="#">로그아웃</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="header_layer tooltip">
          <div class="inner_header_layer">
            <p class="desc_tooltip">
              메뉴바를 클릭하면 계정을 관리할 수 있어요
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="layer_tooltip">
      <div class="inner_layer_tooltip">
        <p class="desc_g"></p>
      </div>
    </div>
    <div
      id="editEntry"
      style="
        position: absolute;
        width: 1px;
        height: 1px;
        left: -100px;
        top: -100px;
      "
    ></div>

    <!-- DragSearchHandler - START -->
    <script src="//search1.daumcdn.net/search/statics/common/js/g/search_dragselection.min.js"></script>

    <!-- DragSearchHandler - END -->

    <!-- SyntaxHighlight - START -->
    <link
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/styles/atom-one-dark-reasonable.min.css"
      rel="stylesheet"
    />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/delphi.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/php.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/python.min.js"></script>
    <script
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/r.min.js"
      defer=""
    ></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/ruby.min.js"></script>
    <script
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/scala.min.js"
      defer=""
    ></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/shell.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/sql.min.js"></script>
    <script
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/swift.min.js"
      defer=""
    ></script>
    <script
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/typescript.min.js"
      defer=""
    ></script>
    <script
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/vbnet.min.js"
      defer=""
    ></script>
    <script>
      hljs.highlightAll();
    </script>

    <!-- SyntaxHighlight - END -->

    <div
      style="
        margin: 0;
        padding: 0;
        border: none;
        background: none;
        float: none;
        clear: none;
        z-index: 0;
      "
    ></div>
    <script
      type="text/javascript"
      src="https://tistory1.daumcdn.net/tistory_admin/userblog/userblog-39ee03342e373848ba7c0bb12e153b29db04aa6b/static/script/common.js"
    ></script>
    <script type="text/javascript">
      window.roosevelt_params_queue = window.roosevelt_params_queue || [
        { channel_id: "dk", channel_label: "{tistory}" },
      ];
    </script>
    <script
      type="text/javascript"
      src="//t1.daumcdn.net/midas/rt/dk_bt/roosevelt_dk_bt.js"
      async="async"
    ></script>

    <script>
      window.tiara = {
        svcDomain: "user.tistory.com",
        section: "블로그",
        trackPage: "블로그홈_보기",
        page: "블로그홈",
        key: "5765047",
        customProps: {
          userId: "5711895",
          blogId: "5765047",
          entryId: "null",
          role: "owner",
          trackPage: "블로그홈_보기",
          filterTarget: false,
        },
        entry: null,
        kakaoAppKey: "3e6ddd834b023f24221217e370daed18",
        appUserId: "2515188820",
      };
    </script>
    <script
      type="module"
      src="https://t1.daumcdn.net/tistory_admin/frontend/tiara/v1.0.5/index.js"
    ></script>
    <script
      src="https://t1.daumcdn.net/tistory_admin/frontend/tiara/v1.0.5/polyfills-legacy.js"
      nomodule="true"
      defer="true"
    ></script>
    <script
      src="https://t1.daumcdn.net/tistory_admin/frontend/tiara/v1.0.5/index-legacy.js"
      nomodule="true"
      defer="true"
    ></script>

    <div class="toc-container">
      <div class="toc-title">목차</div>
      <ul class="toc-list">
        <li class="toc-item toc-h2">
          <a class="toc-link" href="#heading-0">서론</a>
        </li>
        <li class="toc-item toc-h2">
          <a class="toc-link" href="#heading-1"
            >문제 원인: 타입 퍼포먼스 개선</a
          >
        </li>
        <li class="toc-item toc-h2">
          <a class="toc-link" href="#heading-2">타입 퍼포먼스 개선의 이유</a>
        </li>
        <li class="toc-item toc-h4">
          <a class="toc-link" href="#heading-3">1. 문제 원인</a>
        </li>
        <li class="toc-item toc-h4">
          <a class="toc-link" href="#heading-4">2. 개선</a>
        </li>
        <li class="toc-item toc-h2">
          <a class="toc-link" href="#heading-5">breaking changes 해결하기</a>
        </li>
        <li class="toc-item toc-h2">
          <a class="toc-link" href="#heading-6">정리</a>
        </li>
        <li class="toc-item toc-h2">
          <a class="toc-link active" href="#heading-7">참조</a>
        </li>
      </ul>
    </div>
    <ins
      class="adsbygoogle adsbygoogle-noablate"
      data-adsbygoogle-status="done"
      style="display: none !important"
      data-ad-status="unfilled"
      ><div
        id="aswift_18_host"
        style="
          border: none;
          height: 0px;
          width: 0px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
        "
      >
        <iframe
          id="aswift_18"
          name="aswift_18"
          browsingtopics="true"
          style="
            left: 0;
            position: absolute;
            top: 0;
            border: 0;
            width: undefinedpx;
            height: undefinedpx;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7990673941637819&amp;output=html&amp;adk=2654006795&amp;adf=462269707&amp;lmt=1755948571&amp;plat=2%3A16777216%2C4%3A16%2C9%3A134250504%2C16%3A8388608%2C17%3A32%2C24%3A32%2C25%3A32%2C30%3A1081344%2C32%3A32%2C41%3A32%2C42%3A32&amp;plas=435x784_l&amp;format=0x0&amp;url=https%3A%2F%2Fmag1c.tistory.com%2F&amp;host=ca-host-pub-9691043933427338&amp;pra=7&amp;wgl=1&amp;aihb=0&amp;asro=0&amp;aifxl=29_18~30_19&amp;itsi=2&amp;aiapm=0.1542&amp;aiapmd=0.25178&amp;aiapmi=0.16&amp;aiapmid=1&amp;aiact=0.5423&amp;aiactd=0.7&amp;aicct=0.7&amp;aicctd=0.5799&amp;ailct=0.5849&amp;ailctd=0.65&amp;aimart=4&amp;aimartd=4&amp;uach=WyJtYWNPUyIsIjE1LjMuMiIsImFybSIsIiIsIjEzOS4wLjcyNTguMTI4IixudWxsLDAsbnVsbCwiNjQiLFtbIk5vdDtBPUJyYW5kIiwiOTkuMC4wLjAiXSxbIkdvb2dsZSBDaHJvbWUiLCIxMzkuMC43MjU4LjEyOCJdLFsiQ2hyb21pdW0iLCIxMzkuMC43MjU4LjEyOCJdXSwwXQ..&amp;abgtt=9&amp;dt=1755948571469&amp;bpp=5&amp;bdt=136&amp;idt=184&amp;shv=r20250820&amp;mjsv=m202508190101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D5018e9ccedf0d7c2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MatYxTeIInIUA9ZbghaZbF93sM1Cg&amp;gpic=UID%3D0000105a75ec024d%3AT%3D1741570656%3ART%3D1755948299%3AS%3DALNI_MZECL9seRb4ddz2UcE_lXgZK2hhqg&amp;eo_id_str=ID%3Df8536258bd7e30a2%3AT%3D1741570656%3ART%3D1755948299%3AS%3DAA-AfjYxxXNSdWC25VITlOo1bhPZ&amp;prev_fmts=728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250%2C728x90%2C300x250&amp;nras=1&amp;correlator=7792042947413&amp;frm=20&amp;pv=1&amp;u_tz=540&amp;u_his=17&amp;u_h=1117&amp;u_w=1728&amp;u_ah=1079&amp;u_aw=1728&amp;u_cd=30&amp;u_sd=2&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=1713&amp;bih=992&amp;scr_x=0&amp;scr_y=0&amp;eid=31094244%2C95362656%2C95368763%2C95369196%2C95369704%2C95368519%2C95359266%2C31092547%2C95368427&amp;oid=2&amp;pvsid=6277825708785981&amp;tmod=1068360052&amp;uas=0&amp;nvt=1&amp;fsapi=1&amp;ref=https%3A%2F%2Fmag1c.tistory.com%2F580&amp;fc=896&amp;brdim=0%2C38%2C0%2C38%2C1728%2C38%2C1728%2C1079%2C1728%2C992&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=32768&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;pgls=CAk.&amp;ifi=19&amp;uci=a!j&amp;fsb=1&amp;dtd=200"
          data-google-container-id="a!j"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
        ></iframe></div
    ></ins>
    <div id="__phocus__" class="__phocus__" tabindex="-1"></div>
    <div id="shortcutLayer" class="doc_help" style="display: none">
      <button class="btn_doc_close">닫기</button>
      <h2 class="title">단축키</h2>
      <div class="content mac_platform">
        <div class="container">
          <h3 class="item_title">내 블로그</h3>
          <table class="item">
            <tbody>
              <tr>
                <th>내 블로그 - 관리자 홈 전환</th>
                <td>
                  <div class="pc">
                    <kbd>Q</kbd>
                  </div>
                  <div class="mac">
                    <kbd>Q</kbd>
                  </div>
                </td>
              </tr>

              <tr>
                <th>새 글 쓰기</th>
                <td>
                  <div class="pc">
                    <kbd>W</kbd>
                  </div>
                  <div class="mac">
                    <kbd>W</kbd>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <h3 class="item_title">블로그 게시글</h3>
          <table class="item">
            <tbody>
              <tr>
                <th>글 수정 (권한 있는 경우)</th>
                <td>
                  <div class="pc">
                    <kbd>E</kbd>
                  </div>
                  <div class="mac">
                    <kbd>E</kbd>
                  </div>
                </td>
              </tr>

              <tr>
                <th>댓글 영역으로 이동</th>
                <td>
                  <div class="pc">
                    <kbd>C</kbd>
                  </div>
                  <div class="mac">
                    <kbd>C</kbd>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="container">
          <h3 class="item_title">모든 영역</h3>
          <table class="item">
            <tbody>
              <tr>
                <th>이 페이지의 URL 복사</th>
                <td>
                  <div class="pc">
                    <kbd>S</kbd>
                  </div>
                  <div class="mac">
                    <kbd>S</kbd>
                  </div>
                </td>
              </tr>

              <tr>
                <th>맨 위로 이동</th>
                <td>
                  <div class="pc">
                    <kbd>T</kbd>
                  </div>
                  <div class="mac">
                    <kbd>T</kbd>
                  </div>
                </td>
              </tr>

              <tr>
                <th>티스토리 홈 이동</th>
                <td>
                  <div class="pc">
                    <kbd>H</kbd>
                  </div>
                  <div class="mac">
                    <kbd>H</kbd>
                  </div>
                </td>
              </tr>

              <tr>
                <th>단축키 안내</th>
                <td>
                  <div class="pc"><kbd>Shift</kbd> + <kbd>/</kbd></div>
                  <div class="mac"><kbd>⇧</kbd> + <kbd>/</kbd></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="info">
        * 단축키는 한글/영문 대소문자로 이용 가능하며, 티스토리 기본
        도메인에서만 동작합니다.
      </p>
    </div>
    <iframe
      src="https://www.google.com/recaptcha/api2/aframe"
      width="0"
      height="0"
      style="display: none"
    ></iframe>
  </body>
  <iframe
    id="google_esf"
    name="google_esf"
    src="https://googleads.g.doubleclick.net/pagead/html/r20250820/r20190131/zrt_lookup_fy2021.html"
    style="display: none"
  ></iframe
  ><ins
    class="adsbygoogle adsbygoogle-noablate"
    data-adsbygoogle-status="done"
    style="
      display: none !important;
      width: 100vw !important;
      height: 100vh !important;
      inset: 0px auto auto 0px !important;
      clear: none !important;
      float: none !important;
      margin: 0px !important;
      max-height: none !important;
      max-width: none !important;
      opacity: 1 !important;
      overflow: visible !important;
      padding: 0px !important;
      position: fixed !important;
      vertical-align: baseline !important;
      visibility: visible !important;
      z-index: 2147483647 !important;
      background: transparent !important;
    "
    aria-hidden="true"
    data-ad-status="filled"
    data-vignette-loaded="true"
    ><div
      id="aswift_23_host"
      style="
        border: none !important;
        height: 100vh !important;
        width: 100vw !important;
        margin: 0px !important;
        padding: 0px !important;
        position: relative !important;
        visibility: visible !important;
        background-color: transparent !important;
        display: inline-block !important;
        inset: auto !important;
        clear: none !important;
        float: none !important;
        max-height: none !important;
        max-width: none !important;
        opacity: 1 !important;
        overflow: visible !important;
        vertical-align: baseline !important;
        z-index: auto !important;
      "
    >
      <iframe
        id="aswift_23"
        name="aswift_23"
        browsingtopics="true"
        style="
          min-height: auto !important;
          max-height: none !important;
          min-width: auto !important;
          max-width: none !important;
          width: 100vw !important;
          height: 100vh !important;
          inset: 0px auto auto 0px !important;
          position: absolute !important;
          clear: none !important;
          display: inline !important;
          float: none !important;
          margin: 0px !important;
          opacity: 1 !important;
          overflow: visible !important;
          padding: 0px !important;
          vertical-align: baseline !important;
          visibility: visible !important;
          z-index: auto !important;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width=""
        height=""
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/html/r20250820/r20190131/zrt_lookup_fy2021.html#RS-0-&amp;adk=2654006798&amp;client=ca-pub-7990673941637819&amp;fa=8&amp;ifi=24&amp;uci=a!o"
        data-google-container-id="a!o"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="CI-a9JbqoI8DFXZIwgUdXe4T0A"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</html>
